/**
 * Copyright (c) 2015 pointofpresence
 * ReSampled.Pixla (pixla) - Online image filter
 * @version v0.0.21
 * @build Fri, 26 Jun 2015 19:30:51 GMT
 * @link https://github.com/pointofpresence/pixla
 * @license MIT
 */
define("lib/Canvas",[],function(){"use strict";return{createEmptyCanvas:function(w,h){var canvas=document.createElement("canvas");return canvas.width=w,canvas.height=h,canvas},convertImageToCanvas:function(image){var canvas=this.createEmptyCanvas(image.width,image.height);return canvas.getContext("2d").drawImage(image,0,0),canvas},convertCanvasToImage:function(canvas,callback){var image=new Image;image.onload=function(){callback(image)},image.src=canvas.toDataURL("image/png")}}}),define("lib/Fileinput",["jquery"],function($){"use strict";var b=function(d,e){this.options=e,this.$elementFilestyle=[],this.$element=$(d)};b.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},disabled:function(d){if(d===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(d!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(d){if(d===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(d!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(d){if(d===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(d!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".glyphicon").remove())}},input:function(e){if(e===!0)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(e!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var d=this.pushNameFiles();d.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+d.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(d){if(void 0===d)return this.options.size;var f=this.$elementFilestyle.find("label"),e=this.$elementFilestyle.find("input");f.removeClass("btn-lg btn-sm"),e.removeClass("input-lg input-sm"),"nr"!=d&&(f.addClass("btn-"+d),e.addClass("input-"+d))},buttonText:function(d){return void 0===d?this.options.buttonText:(this.options.buttonText=d,void this.$elementFilestyle.find("label span").html(this.options.buttonText))},buttonName:function(d){return void 0===d?this.options.buttonName:(this.options.buttonName=d,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(d){return void 0===d?this.options.iconName:void this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="glyphicon '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" disabled> ':""},pushNameFiles:function(){var d="",f=[];void 0===this.$element[0].files?f[0]={name:this.$element[0]&&this.$element[0].value}:f=this.$element[0].files;for(var e=0;e<f.length;e++)d+=f[e].name.split("\\").pop()+", ";return this.$elementFilestyle.find(":text").val(""!==d?d.replace(/\, $/g,""):""),f},constructor:function(){var h=this,f="",g=h.$element.attr("id"),i="";""!==g&&g||(g="filestyle-"+$(".bootstrap-filestyle").length,h.$element.attr({id:g})),i='<span class="group-span-filestyle '+(h.options.input?"input-group-btn":"")+'"><label for="'+g+'" class="btn '+h.options.buttonName+" "+("nr"==h.options.size?"":"btn-"+h.options.size)+'" '+(h.options.disabled?'disabled="true"':"")+">"+h.htmlIcon()+h.options.buttonText+"</label></span>",f=h.options.buttonBefore?i+h.htmlInput():h.htmlInput()+i,h.$elementFilestyle=$('<div class="bootstrap-filestyle input-group">'+f+"</div>"),h.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(j){return 13===j.keyCode||32===j.charCode?(h.$elementFilestyle.find("label").click(),!1):void 0}),h.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(h.$elementFilestyle),h.options.disabled&&h.$element.attr("disabled","true"),h.$element.change(function(){var j=h.pushNameFiles();0==h.options.input&&h.options.badge?0==h.$elementFilestyle.find(".badge").length?h.$elementFilestyle.find("label").append(' <span class="badge">'+j.length+"</span>"):0==j.length?h.$elementFilestyle.find(".badge").remove():h.$elementFilestyle.find(".badge").html(j.length):h.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&h.$elementFilestyle.find("label").click(function(){return h.$element.click(),!1})}};var a=$.fn.filestyle;$.fn.filestyle=function(e,d){var f="",g=this.each(function(){if("file"===$(this).attr("type")){var j=$(this),h=j.data("filestyle"),i=$.extend({},$.fn.filestyle.defaults,e,"object"==typeof e&&e);h||(j.data("filestyle",h=new b(this,i)),h.constructor()),"string"==typeof e&&(f=h[e](d))}});return"undefined"!=typeof f?f:g},$.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1},$.fn.filestyle.noConflict=function(){return $.fn.filestyle=a,this},$(function(){$(".filestyle").each(function(){var e=$(this),d={input:"false"!==e.attr("data-input"),icon:"false"!==e.attr("data-icon"),buttonBefore:"true"===e.attr("data-buttonBefore"),disabled:"true"===e.attr("data-disabled"),size:e.attr("data-size"),buttonText:e.attr("data-buttonText"),buttonName:e.attr("data-buttonName"),iconName:e.attr("data-iconName"),badge:"false"!==e.attr("data-badge")};e.filestyle(d)})})}),define("models/TriangleAbstract",["backbone","underscore","lib/Canvas"],function(Backbone,_,Canvas){"use strict";return Backbone.Model.extend({defaults:{name:"Abstract Generator",description:"Abstract Model for Generators"},options:{},w:0,h:0,clone:function(data){return _.map(data,_.clone)},readOptions:function(){return localStorage[this.cid]?JSON.parse(localStorage[this.cid]):{}},setPixel:function(data,index,color){var i=4*index;data[i]=color[0],data[i+1]=color[1],data[i+2]=color[2],data[i+3]=color[3]},getPixel:function(data,index){var i=4*index;return[data[i],data[i+1],data[i+2],data[i+3]]},getPixelXY:function(data,x,y){return this.getPixel(data,y*this.w+x)},setPixelXY:function(data,x,y,color){return this.setPixel(data,y*this.w+x,color)},componentToHex:function(c){var hex=c.toString(16);return 1==hex.length?"0"+hex:hex},rgbaToHex:function(color){return this.componentToHex(color[0])+this.componentToHex(color[1])+this.componentToHex(color[2])+this.componentToHex(color[3])},setShadeBlendPixel:function(data,x,y,percent,blendColor){var oc=this.getPixelXY(data,x,y),n=0>percent?-1*percent:percent;blendColor=blendColor?blendColor:0>percent?[0,0,0,oc[3]]:[255,255,255,oc[3]];var R=Math.round((blendColor[0]-oc[0])*n)+oc[0],G=Math.round((blendColor[1]-oc[1])*n)+oc[1],B=Math.round((blendColor[2]-oc[2])*n)+oc[2],A=Math.round((blendColor[3]-oc[3])*n)+oc[3];this.setPixelXY(data,x,y,[R,G,B,A])},createEmptyBuffer:function(w,h){var cvs=document.createElement("canvas");cvs.width=w,cvs.height=h;var ctx=cvs.getContext("2d");return ctx.getImageData(0,0,cvs.width,cvs.height)},crop:function(data,x,y,w,h){return data=this.grab(data,x,y,w,h),this.w=w,this.h=h,data},grab:function(data,x,y,w,h){var tempCvs=Canvas.createEmptyCanvas(this.w,this.h),tempCtx=tempCvs.getContext("2d"),tempIData=tempCtx.createImageData(this.w,this.h);return tempIData.data.set(data),tempCtx.putImageData(tempIData,0,0),tempCtx.getImageData(x,y,w,h).data},draw:function(srcData,destData,destX,destY,srcW,srcH){var tempCvs=Canvas.createEmptyCanvas(this.w,this.h),tempCtx=tempCvs.getContext("2d"),tempSrcIData=tempCtx.createImageData(srcW,srcH),tempDestIData=tempCtx.createImageData(this.w,this.h);return tempDestIData.data.set(destData),tempCtx.putImageData(tempDestIData,0,0),tempSrcIData.data.set(srcData),tempCtx.putImageData(tempSrcIData,destX,destY),tempCtx.getImageData(0,0,this.w,this.h).data},flipX:function(data,w,h){var i,flip,x,y,c,tempData=this.clone(data);for(y=0;h>y;y++)for(x=0;w>x;x++)for(i=4*(y*w+x),flip=4*(y*w+(w-x-1)),c=0;4>c;c++)tempData[i+c]=data[flip+c];return tempData},flipY:function(data,w,h){var i,flip,x,y,c,tempData=this.clone(data);for(y=0;h>y;y++)for(x=0;w>x;x++)for(i=4*(y*w+x),flip=4*((h-y-1)*w+x),c=0;4>c;c+=1)tempData[i+c]=data[flip+c];return tempData},rotate:function(data,w,h){var i,flip,x,y,c,tempData=this.clone(data);for(y=1;h-1>y;y+=1)for(x=1;w-1>x;x+=1)for(i=4*(y*w+x),flip=4*(x*w+(w-y)),c=0;4>c;c+=1)tempData[i+c]=data[flip+c];return tempData},grayscale:function(data){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2],v=.2126*r+.7152*g+.0722*b;data[i]=data[i+1]=data[i+2]=v}return data},monochrome:function(data){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2],v=Math.floor((r+g+b)/3);data[i]=data[i+1]=data[i+2]=v>127?255:0,data[i+3]=255}return data},brightness:function(data,adjustment){for(var i=0;i<data.length;i+=4)data[i]+=adjustment,data[i+1]+=adjustment,data[i+2]+=adjustment;return data},threshold:function(data,threshold){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2],v=.2126*r+.7152*g+.0722*b>=threshold?255:0;data[i]=data[i+1]=data[i+2]=v}return data},sepia:function(data){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2];data[i]=.393*r+.769*g+.189*b,data[i+1]=.349*r+.686*g+.168*b,data[i+2]=.272*r+.534*g+.131*b}return data},red:function(data){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2];data[i]=(r+g+b)/3,data[i+1]=data[i+2]=0}return data},green:function(data){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2];data[i+1]=(r+g+b)/3,data[i]=data[i+2]=0}return data},blue:function(data){for(var i=0;i<data.length;i+=4){var r=data[i],g=data[i+1],b=data[i+2];data[i+2]=(r+g+b)/3,data[i]=data[i+1]=0}return data},invert:function(data){for(var i=0;i<data.length;i+=4)data[i]=255-data[i],data[i+1]=255-data[i+1],data[i+2]=255-data[i+2];return data},convolve3x3:function(data,w,m,divisor,offset){divisor||(divisor=m.reduce(function(a,b){return a+b})||1);for(var newData=new Uint8ClampedArray(data.length),len=newData.length,res=0,i=0;len>i;i++)if((i+1)%4!==0){res=0;for(var these=[data[i-4*w-4]||data[i],data[i-4*w]||data[i],data[i-4*w+4]||data[i],data[i-4]||data[i],data[i],data[i+4]||data[i],data[i+4*w-4]||data[i],data[i+4*w]||data[i],data[i+4*w+4]||data[i]],j=0;9>j;j++)res+=these[j]*m[j];res/=divisor,offset&&(res+=offset),newData[i]=res}else newData[i]=data[i];return newData},sobel:function(data,w){for(var grayscale=this.grayscale(data),vertical=this.convolve3x3(grayscale,w,[-1,0,1,-2,0,2,-1,0,1]),horizontal=this.convolve3x3(grayscale,w,[-1,-2,-1,0,0,0,1,2,1]),newData=new Uint8ClampedArray(data.length),i=0;i<data.length;i+=4){var v=Math.abs(vertical[i]);newData[i]=v;var h=Math.abs(horizontal[i]);newData[i+1]=h,newData[i+2]=(v+h)/4,newData[i+3]=255}return newData},convolute:function(data,w,h,weights,opaque){for(var side=Math.round(Math.sqrt(weights.length)),halfSide=Math.floor(side/2),dst=new Uint8ClampedArray(data.length),alphaFac=opaque?1:0,y=0;h>y;y++)for(var x=0;w>x;x++){for(var sy=y,sx=x,dstOff=4*(y*w+x),r=0,g=0,b=0,a=0,cy=0;side>cy;cy++)for(var cx=0;side>cx;cx++){var scy=sy+cy-halfSide,scx=sx+cx-halfSide;if(scy>=0&&h>scy&&scx>=0&&w>scx){var srcOff=4*(scy*w+scx),wt=weights[cy*side+cx];r+=data[srcOff]*wt,g+=data[srcOff+1]*wt,b+=data[srcOff+2]*wt,a+=data[srcOff+3]*wt}}dst[dstOff]=r,dst[dstOff+1]=g,dst[dstOff+2]=b,dst[dstOff+3]=a+alphaFac*(255-a)}return dst},setMixPixel:function(data,x,y,blendColor){var oc=this.getPixelXY(data,x,y),n=blendColor[3]/255,n2=1-n;this.setPixelXY(data,x,y,[Math.floor(oc[0]*n2+blendColor[0]*n),Math.floor(oc[1]*n2+blendColor[1]*n),Math.floor(oc[2]*n2+blendColor[2]*n),oc[3]])},centerKaleidoskope:function(data,w,h){data=this.grab(data,0,0,2*w,2*h),this.w=2*w,this.h=2*h;var block=this.grab(data,0,0,w,h);return data=this.draw(block,data,0,0,w,h),block=this.flipX(block,w,h),data=this.draw(block,data,w,0,w,h),block=this.flipY(block,w,h),data=this.draw(block,data,w,h,w,h),block=this.flipX(block,w,h),data=this.draw(block,data,0,h,w,h)},centerOutsideKaleidoskope:function(data,w,h){data=this.grab(data,0,0,2*w,2*h),this.w=2*w,this.h=2*h;var block=this.grab(data,0,0,w,h);return data=this.draw(block,data,0,0,w,h),block=this.flipY(block,w,h),data=this.draw(block,data,w,0,w,h),block=this.flipX(block,w,h),data=this.draw(block,data,w,h,w,h),block=this.flipY(block,w,h),data=this.draw(block,data,0,h,w,h)},outsideKaleidoskope:function(data,w,h){data=this.grab(data,0,0,2*w,2*h),this.w=2*w,this.h=2*h;var block=this.grab(data,0,0,w,h);return block=this.flipX(block,w,h),data=this.draw(block,data,0,0,w,h),block=this.flipX(block,w,h),data=this.draw(block,data,w,0,w,h),block=this.flipY(block,w,h),data=this.draw(block,data,w,h,w,h),block=this.flipX(block,w,h),data=this.draw(block,data,0,h,w,h)},vertKaleidoskope:function(data,w,h){data=this.grab(data,0,0,2*w,2*h),this.w=2*w,this.h=2*h;var block=this.grab(data,0,0,this.w,h);return data=this.draw(block,data,0,0,this.w,h),block=this.flipY(block,this.w,h),data=this.draw(block,data,0,h,this.w,h)},cardKaleidoskope:function(data,w,h){data=this.grab(data,0,0,2*w,2*h),this.w=2*w,this.h=2*h;var block=this.grab(data,0,0,this.w,h);return data=this.draw(block,data,0,0,this.w,h),block=this.flipY(block,this.w,h),block=this.flipX(block,this.w,h),data=this.draw(block,data,0,h,this.w,h)},horizKaleidoskope:function(data,w,h){data=this.grab(data,0,0,2*w,2*h),this.w=2*w,this.h=2*h;var block=this.grab(data,0,0,w,this.h);return data=this.draw(block,data,0,0,w,this.h),block=this.flipX(block,w,this.h),data=this.draw(block,data,w,0,w,this.h)}})}),define("models/TriangleCross",["backbone","underscore","models/TriangleAbstract"],function(Backbone,_,TriangleAbstractModel){"use strict";return TriangleAbstractModel.extend({defaults:_.extend({},TriangleAbstractModel.prototype.defaults,{name:"Triangle Cross",description:"Triangle Cross Filter"}),initialize:function(){this.options=_.extend({},TriangleAbstractModel.prototype.options,{kaleidoscope:{name:"Калейдоскоп",type:"Select",options:[{text:"Нет"},{text:"К центру",cb:this.centerKaleidoskope},{text:"В стороны",cb:this.outsideKaleidoskope},{text:"К центру и в стороны",cb:this.centerOutsideKaleidoskope},{text:"По горизонтали",cb:this.horizKaleidoskope},{text:"По вертикали",cb:this.vertKaleidoskope},{text:"Игральная карта",cb:this.cardKaleidoskope}]},colors:{name:"Цвет",type:"Select",options:[{text:"Нет"},{text:"Монохром",cb:this.monochrome},{text:"Градации серого",cb:this.grayscale},{text:"Сепия",cb:this.sepia},{text:"Красный",cb:this.red},{text:"Зеленый",cb:this.green},{text:"Синий",cb:this.blue}]},brightness:{name:"Яркость",type:"Slider",min:0,max:200,cb:this.brightness},threshold:{name:"Порог",type:"Slider",min:0,max:200,cb:this.threshold},blur:{name:"Размытие",type:"Slider",min:0,max:3},sharpen:{name:"Резкость",type:"Slider",min:0,max:10},edge:{name:"Поиск края",type:"Slider",min:0,max:2},emboss:{name:"Рельеф",type:"Slider",min:0,max:2},sobel:{name:"Оператор Собеля",type:"Slider",min:0,max:1},thin:{name:"Контур",type:"Slider",min:0,max:1},invert:{name:"Инверсия",type:"Slider",min:0,max:1}})},pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],[4,4,1,1,1,1,1,1,1,1,1,1,1,1,2,2],[4,4,4,1,1,1,1,1,1,1,1,1,1,2,2,2],[4,4,4,4,1,1,1,1,1,1,1,1,2,2,2,2],[4,4,4,4,4,1,1,1,1,1,1,2,2,2,2,2],[4,4,4,4,4,4,1,1,1,1,2,2,2,2,2,2],[4,4,4,4,4,4,4,1,1,2,2,2,2,2,2,2],[4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2],[4,4,4,4,4,4,4,3,3,2,2,2,2,2,2,2],[4,4,4,4,4,4,3,3,3,3,2,2,2,2,2,2],[4,4,4,4,4,3,3,3,3,3,3,2,2,2,2,2],[4,4,4,4,3,3,3,3,3,3,3,3,2,2,2,2],[4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2],[4,4,3,3,3,3,3,3,3,3,3,3,3,3,2,2],[4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2]],TILE_WIDTH:16,TILE_HEIGHT:16,getColors:function(data,x,y){var colors=[];return colors[1]=this.getPixelXY(data,x+this.TILE_WIDTH/2,y+this.TILE_HEIGHT/4),colors[2]=this.getPixelXY(data,x+this.TILE_WIDTH-this.TILE_WIDTH/4,y+this.TILE_HEIGHT/2),colors[3]=this.getPixelXY(data,x+this.TILE_WIDTH/2,y+this.TILE_HEIGHT-this.TILE_HEIGHT/4),colors[4]=this.getPixelXY(data,x+this.TILE_WIDTH/4,y+this.TILE_HEIGHT/2),colors},doit:function(data,w,h){var options=this.readOptions();this.w=w,this.h=h;var src=new Uint8ClampedArray(data.data),tilesW=Math.floor(this.w/this.TILE_WIDTH),tilesH=Math.floor(this.h/this.TILE_HEIGHT),newW=tilesW*this.TILE_WIDTH,newH=tilesH*this.TILE_HEIGHT;src=this.crop(src,0,0,newW,newH);var colors,x,y,px,py,out=new Uint8ClampedArray(src.length),pattern=this.pattern;for(x=0;newW+1>x;x+=this.TILE_WIDTH)for(y=0;newH+1>y;y+=this.TILE_HEIGHT)for(colors=this.getColors(src,x,y),px=0;px<this.TILE_WIDTH;px++)for(py=0;py<this.TILE_WIDTH;py++)pattern[py][px]&&this.setPixelXY(out,x+px,y+py,colors[pattern[py][px]]);if(options.kaleidoscope&&this.options.kaleidoscope.options[options.kaleidoscope].cb&&this.options.kaleidoscope.options[options.kaleidoscope]&&(out=this.options.kaleidoscope.options[options.kaleidoscope].cb.call(this,out,Math.floor(tilesW/2)*this.TILE_WIDTH,Math.floor(tilesH/2)*this.TILE_HEIGHT)),options.colors&&this.options.colors.options[options.colors].cb&&this.options.colors.options[options.colors]&&(out=this.options.colors.options[options.colors].cb.call(this,out)),parseInt(options.brightness)&&this.options.brightness.cb&&(out=this.options.brightness.cb.call(this,out,parseInt(options.brightness))),parseInt(options.threshold)&&this.options.threshold.cb&&(out=this.options.threshold.cb.call(this,out,parseInt(options.threshold))),parseInt(options.blur)){var bFac=parseInt(options.blur)+7;out=this.convolute(out,this.w,this.h,[1/bFac,1/bFac,1/bFac,1/bFac,1/bFac,1/bFac,1/bFac,1/bFac,1/bFac])}if(parseInt(options.sharpen)){var sFac=parseInt(options.sharpen),sMtx=[];2>sFac?(sFac+=4,sMtx=[0,-1,0,-1,sFac,-1,0,-1,0]):(sFac+=7,sMtx=[-1,-1,-1,-1,sFac,-1,-1,-1,-1]),out=this.convolute(out,this.w,this.h,sMtx)}if(parseInt(options.edge)){var edFac=parseInt(options.edge),edMtx=[];switch(edFac){case 1:edMtx=[1,1,1,1,-7,1,1,1,1];break;case 2:edMtx=[-5,0,0,0,0,0,0,0,5]}out=this.convolve3x3(out,this.w,edMtx)}if(parseInt(options.emboss)){var eFac=parseInt(options.emboss),eMtx=[];switch(eFac){case 1:eMtx=[1,1,-1,1,3,-1,1,-1,-1];break;case 2:eMtx=[2,0,0,0,-1,0,0,0,-1]}out=this.convolve3x3(out,this.w,eMtx)}return parseInt(options.sobel)&&(out=this.sobel(out,this.w)),parseInt(options.thin)&&(out=this.convolute(out,this.w,this.h,[1,1,1,1,-7,1,1,1,1])),parseInt(options.invert)&&(out=this.invert(out)),{data:out,w:this.w,h:this.h}}})}),define("models/TriangleCrossRadial",["backbone","underscore","models/TriangleCross"],function(Backbone,_,TriangleCrossModel){"use strict";return TriangleCrossModel.extend({defaults:_.extend({},TriangleCrossModel.prototype.defaults,{name:"Triangle Cross Radial",description:"Triangle Cross Radial Filter"}),getColors:function(data,x,y){var colors=[];return colors[1]=this.getPixelXY(data,x,y),colors[2]=this.getPixelXY(data,x+2,y+2),colors[3]=this.getPixelXY(data,x+4,y+4),colors[4]=this.getPixelXY(data,x+6,y+6),colors},pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]})}),define("models/TriangleCube",["backbone","underscore","models/TriangleAbstract"],function(Backbone,_,TriangleAbstractModel){"use strict";return TriangleAbstractModel.extend({defaults:_.extend({},TriangleAbstractModel.prototype.defaults,{name:"Triangle Cube",description:"Triangle Cube Filter"}),initialize:function(){this.options=_.extend({},TriangleAbstractModel.prototype.options,{kaleidoscope:{name:"Калейдоскоп",type:"Select",options:[{text:"Нет"},{text:"К центру",cb:this.centerKaleidoskope},{text:"В стороны",cb:this.outsideKaleidoskope},{text:"К центру и в стороны",cb:this.centerOutsideKaleidoskope},{text:"По горизонтали",cb:this.horizKaleidoskope},{text:"По вертикали",cb:this.vertKaleidoskope},{text:"Игральная карта",cb:this.cardKaleidoskope}]}})},TILE_WIDTH:21,TILE_HEIGHT:21,doit:function(data,w,h){var options=this.readOptions();this.w=w,this.h=h;for(var out=new Uint8ClampedArray(data.data),tilesW=Math.floor(this.w/this.TILE_WIDTH),tilesH=Math.floor(this.h/this.TILE_HEIGHT),pattern=[[0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0],[0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5],[4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,5,5],[4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5],[4,4,4,4,4,4,4,4,3,3,3,3,3,3,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,3,3,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5],[0,0,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,0],[0,0,0,0,4,4,4,4,4,4,4,5,5,5,5,5,5,5,0,0,0],[0,0,0,0,0,0,4,4,4,4,4,5,5,5,5,5,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,4,4,5,5,5,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0]],border=[[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0]],hot=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0],[0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0],[0,0,0,0,0,0,2,2,0,0,0,0,0,0,2,2,0,0,0,0,0],[0,0,0,0,0,0,0,0,2,2,0,0,2,2,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],spark=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],top=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0,0,0],[0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0],[0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0],[0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0],[0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0],[0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0],[0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],shadow=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],step=0,border_c=[0,0,0,196],hot_c=[255,255,255,128],top_c=[255,255,255,128],shadow_c=[0,0,0,128],spark_c=[255,255,255,255],y=-this.TILE_HEIGHT;y<this.h;y+=this.TILE_HEIGHT-6){for(var x=-this.TILE_WIDTH;x<this.w;x+=this.TILE_WIDTH-1){var colors=[];colors[1]=border_c,colors[2]=hot_c;var x3=parseInt(x+this.TILE_WIDTH/2);x3=x3>this.w?this.w:x3,x3=0>x3?0:x3,colors[3]=this.getPixelXY(data.data,x3,y+3);var x4=x+5;x4=x4>this.w?this.w:x4,x4=0>x4?0:x4;var y4=y+11;y4=y4>this.h?this.h:y4,colors[4]=this.getPixelXY(data.data,x4,y4);var x5=x+14;x5=x5>this.w?this.w:x5,x5=0>x5?0:x5;var y5=y+11;y5=y5>this.h?this.h:y5,colors[5]=this.getPixelXY(data.data,x5,y5),colors[6]=top_c,colors[7]=shadow_c,colors[8]=spark_c;var offsetX=0;1==step&&(offsetX=10);for(var px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(var py=0;py<this.TILE_HEIGHT;py++)pattern[py][px]&&this.setPixelXY(out,x+px+offsetX,y+py,colors[pattern[py][px]]);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)hot[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,hot_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)top[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,top_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)shadow[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,shadow_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)spark[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,spark_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)border[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,border_c)}step=1==step?0:1}return options.kaleidoscope&&this.options.kaleidoscope.options[options.kaleidoscope].cb&&this.options.kaleidoscope.options[options.kaleidoscope]&&(out=this.options.kaleidoscope.options[options.kaleidoscope].cb.call(this,out,Math.floor(tilesW/2)*this.TILE_WIDTH-3,Math.floor(tilesH/2)*this.TILE_HEIGHT-6)),{data:out,w:this.w,h:this.h}}})}),define("models/TriangleCubeSimple",["backbone","underscore","models/TriangleAbstract"],function(Backbone,_,TriangleAbstractModel){"use strict";return TriangleAbstractModel.extend({defaults:_.extend({},TriangleAbstractModel.prototype.defaults,{name:"Triangle Cube Simple",description:"Triangle Cube Simple Filter"}),initialize:function(){this.options=_.extend({},TriangleAbstractModel.prototype.options,{kaleidoscope:{name:"Калейдоскоп",type:"Select",options:[{text:"Нет"},{text:"К центру",cb:this.centerKaleidoskope},{text:"В стороны",cb:this.outsideKaleidoskope},{text:"К центру и в стороны",cb:this.centerOutsideKaleidoskope},{text:"По горизонтали",cb:this.horizKaleidoskope},{text:"По вертикали",cb:this.vertKaleidoskope},{text:"Игральная карта",cb:this.cardKaleidoskope}]}})},TILE_WIDTH:21,TILE_HEIGHT:21,doit:function(data,w,h){var options=this.readOptions();this.w=w,this.h=h;for(var out=new Uint8ClampedArray(data.data),tilesW=Math.floor(this.w/this.TILE_WIDTH),tilesH=Math.floor(this.h/this.TILE_HEIGHT),pattern=[[0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0],[0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0],[0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],[0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0],[0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0]],border=[[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0]],hot=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0],[0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0],[0,0,0,0,0,0,2,2,0,0,0,0,0,0,2,2,0,0,0,0,0],[0,0,0,0,0,0,0,0,2,2,0,0,2,2,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],spark=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],top=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0,0,0],[0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0],[0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0],[0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0],[0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0],[0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0],[0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],shadow=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],step=0,border_c=[0,0,0,196],hot_c=[255,255,255,128],top_c=[255,255,255,128],shadow_c=[0,0,0,128],spark_c=[255,255,255,255],y=-this.TILE_HEIGHT;y<this.h;y+=this.TILE_HEIGHT-6){
for(var x=-this.TILE_WIDTH;x<this.w;x+=this.TILE_WIDTH-1){var colors=[];colors[1]=border_c,colors[2]=hot_c;var x3=parseInt(x+this.TILE_WIDTH/2);x3=x3>this.w?this.w:x3,x3=0>x3?0:x3;var y3=parseInt(y+this.TILE_HEIGHT/2);y3=y3>this.h?this.h:y3,colors[3]=this.getPixelXY(data.data,x3,y3),colors[6]=top_c,colors[7]=shadow_c,colors[8]=spark_c;var offsetX=0;1==step&&(offsetX=10);for(var px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(var py=0;py<this.TILE_HEIGHT;py++)pattern[py][px]&&this.setPixelXY(out,x+px+offsetX,y+py,colors[pattern[py][px]]);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)hot[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,hot_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)top[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,top_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)shadow[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,shadow_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)spark[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,spark_c);for(px=0;px<this.TILE_WIDTH;px++)if(!(x+px+offsetX>this.w||0>x+px+offsetX))for(py=0;py<this.TILE_HEIGHT;py++)border[py][px]&&this.setMixPixel(out,x+px+offsetX,y+py,border_c)}step=1==step?0:1}return options.kaleidoscope&&this.options.kaleidoscope.options[options.kaleidoscope].cb&&this.options.kaleidoscope.options[options.kaleidoscope]&&(out=this.options.kaleidoscope.options[options.kaleidoscope].cb.call(this,out,Math.floor(tilesW/2)*this.TILE_WIDTH-3,Math.floor(tilesH/2)*this.TILE_HEIGHT-6)),{data:out,w:this.w,h:this.h}}})}),define("models/TriangleDithering",["backbone","underscore","models/TriangleCross"],function(Backbone,_,TriangleCrossModel){"use strict";return TriangleCrossModel.extend({defaults:_.extend({},TriangleCrossModel.prototype.defaults,{name:"Triangle Dither",description:"Triangle Dither Filter"}),getColors:function(data,x,y){var colors=[];return colors[1]=this.getPixelXY(data,x,y),colors[2]=this.getPixelXY(data,x,y+4),colors[3]=this.getPixelXY(data,x,y+8),colors[4]=this.getPixelXY(data,x,y+12),colors},pattern:[[1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1],[1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2],[1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1],[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],[2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2],[2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],[2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1]]})}),define("models/TriangleLine",["backbone","underscore","models/TriangleCross"],function(Backbone,_,TriangleCrossModel){"use strict";return TriangleCrossModel.extend({defaults:_.extend({},TriangleCrossModel.prototype.defaults,{name:"Triangle Line",description:"Triangle Line Filter"}),getColors:function(data,x,y){var colors=[];return colors[1]=this.getPixelXY(data,x,y),colors[2]=this.getPixelXY(data,x,y+4),colors[3]=this.getPixelXY(data,x,y+8),colors[4]=this.getPixelXY(data,x,y+12),colors},pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]]})}),define("models/TriangleRealCross",["backbone","underscore","models/TriangleCross"],function(Backbone,_,TriangleCrossModel){"use strict";return TriangleCrossModel.extend({defaults:_.extend({},TriangleCrossModel.prototype.defaults,{name:"Triangle Real Cross",description:"Triangle Real Cross Filter"}),getColors:function(data,x,y){var colors=[];return colors[1]=this.getPixelXY(data,x,y),colors[2]=this.getPixelXY(data,x+2,y+2),colors[3]=this.getPixelXY(data,x+4,y+4),colors[4]=this.getPixelXY(data,x+6,y+6),colors},pattern:[[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1]]})}),define("collections/Generator",["backbone"],function(Backbone){"use strict";return Backbone.Collection.extend({comparator:"name",doit:function(cid,data,w,h){return this.get({cid:cid}).doit(data,w,h)}})}),define("views/Wizard",["backbone","jquery","underscore","templates","lib/Canvas"],function(Backbone,$,_,templates,Canvas){"use strict";return Backbone.View.extend({el:"#wizard",encoded:null,imageName:null,elements:[],filterCid:null,initialize:function(){this.elements.preloader=this.$(".preloader"),this.elements.error=this.$(".error400"),this.elements.srcImage=this.$(".src-image"),this.elements.dstImage=this.$(".dst-image"),this.elements.inputFilter=this.$("#input-filter"),this.elements.optionsModal=this.$("#options-modal"),this.elements.messageModal=this.$("#message"),this.elements.filterOptionsBtn=this.$("#filter-options"),this.collection.each(function(generator){this.elements.inputFilter.append($("<option/>",{value:generator.cid,text:generator.get("name")}))},this),this.filterCid=this.elements.inputFilter.val(),this.filterChanged()},events:{"click #input-url":"selectAll","click #input-url-button":"loadUrl","click #filter-options":"onFilterOptionsClick","click #options-apply":"onOptionsApplyClick","change #input-file":"select","change #input-filter":"onFilterChange"},message:function(msg){this.elements.messageModal.find(".message-body p").text(msg),this.elements.messageModal.modal()},buildOptions:function(model){var options=model.options,html="";return _.each(options,function(o,id){html+=templates.options[o.type]({option:o,id:id,value:localStorage[this.filterCid]?JSON.parse(localStorage[this.filterCid])[id]:null})},this),html},onOptionsApplyClick:function(e){e.preventDefault();var options={};this.elements.optionsModal.find("[data-option]").each(function(){var $e=$(this);options[$e.data("option")]=$e.val()}),localStorage[this.filterCid]=JSON.stringify(options),this.elements.optionsModal.modal("hide"),this.render()},onFilterChange:function(e){this.filterCid=$(e.currentTarget).val(),this.filterChanged()},filterChanged:function(){if(this.filterCid){var model=this.collection.get(this.filterCid),options=model.options;options&&Object.keys(options).length?this.elements.filterOptionsBtn.prop("disabled",!1):this.elements.filterOptionsBtn.prop("disabled",!0),this.render()}else this.elements.filterOptionsBtn.prop("disabled",!0)},onFilterOptionsClick:function(e){e.preventDefault();var model=this.collection.get(this.filterCid);this.elements.optionsModal.find(".modal-title").html(templates.OptionsTitle({name:model.get("name")})),this.elements.optionsModal.find(".description").text(model.get("description"));var form=this.buildOptions(model);this.elements.optionsModal.find(".options-form").html(form),this.elements.optionsModal.modal()},showPreloader:function(state){state===!0||"undefined"==typeof state?this.elements.preloader.show():this.elements.preloader.fadeOut()},loadUrl:function(e){e.preventDefault();var url=$.trim(this.$("#input-url").val());!url.length||url.length>8190||(this.showPreloader(),$.getJSON("/api.php",{url:url},function(data){0==parseInt(data.error)?(this.elements.srcImage.title=data.name,this.elements.srcImage.attr("src",data.data),this.imageName=data.name,this.encoded=data.data,this.render()):this.elements.error.show(),this.showPreloader(!1)}.bind(this)))},selectAll:function(e){$(e.currentTarget).select()},render:function(){if(this.encoded){this.showPreloader(),this.elements.error.hide();var srcImage=this.elements.srcImage[0],cvsIn=Canvas.createEmptyCanvas(srcImage.width,srcImage.height),ctxIn=cvsIn.getContext("2d");ctxIn.drawImage(srcImage,0,0,cvsIn.width,cvsIn.height);var idtIn=ctxIn.getImageData(0,0,cvsIn.width,cvsIn.height),result=this.collection.doit(this.filterCid,idtIn,cvsIn.width,cvsIn.height),cvsOut=Canvas.createEmptyCanvas(result.w,result.h),ctxOut=cvsOut.getContext("2d"),idtOut=ctxOut.createImageData(result.w,result.h);idtOut.data.set(result.data),ctxOut.putImageData(idtOut,0,0),this.elements.dstImage.attr("src",cvsOut.toDataURL("image/png")),this.showPreloader(!1)}},select:function(event){var selectedFile=event.target.files[0],reader=new FileReader;this.elements.srcImage.title=selectedFile.name,this.imageName=selectedFile.name,reader.onload=function(event){this.elements.srcImage.attr("src",event.target.result),this.encoded=event.target.result,this.render()}.bind(this),reader.readAsDataURL(selectedFile)}})}),define("templates",function(require){"use strict";return{OptionsTitle:require("tpl!templates/OptionsTitle.ejs"),options:{Select:require("tpl!templates/options/Select.ejs"),Slider:require("tpl!templates/options/Slider.ejs")}}}),require.config({paths:{underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min",bootstrap:"//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min",share:"//yastatic.net/share/share"},shim:{underscore:{exports:"_"},backbone:{exports:"Backbone",deps:["jquery","underscore"]},bootstrap:{deps:["jquery"]}},waitSeconds:60}),require(["jquery","models/TriangleCross","models/TriangleCrossRadial","models/TriangleRealCross","models/TriangleCube","models/TriangleCubeSimple","models/TriangleLine","models/TriangleDithering","collections/Generator","views/Wizard","bootstrap","share","lib/Fileinput"],function($,TriangleCrossModel,TriangleCrossRadialModel,TriangleRealCrossModel,TriangleCubeModel,TriangleCubeSimpleModel,TriangleLineModel,TriangleDitheringModel,GeneratorCollection,WizardView){"use strict";$(function(){if($(document).on("click","a[href=#]",function(e){e.preventDefault()}),$("footer").css("background-color",$("body > nav").css("background-color")),$("footer *").css("color",$(".navbar-default .navbar-nav > li > a").css("color")),"undefined"==typeof FileReader||!$.isFunction(FileReader))return void $("#old-browser").fadeIn("slow");$('[data-toggle="tooltip"]').tooltip(),$("#wizard").show(),$(":file").filestyle({buttonText:"",buttonName:"btn-primary"});var generators=new GeneratorCollection([new TriangleCrossModel,new TriangleCrossRadialModel,new TriangleRealCrossModel,new TriangleCubeModel,new TriangleCubeSimpleModel,new TriangleLineModel,new TriangleDitheringModel]);new WizardView({collection:generators})})});