/**
 * Copyright (c) 2016 pointofpresence
 * ReSampled.Pixla (pixla) - Creative online image filter
 * @version v0.2.1
 * @link https://github.com/pointofpresence/pixla
 * @license MIT
 */
!function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(require,module,exports){(function(process,Buffer){var fabric=fabric||{version:"1.5.0"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",function(){function t(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}function n(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,r=i.length;r>n;n++)i[n].call(this,e||{});return this}}}fabric.Observable={observe:e,stopObserving:i,fire:n,on:e,off:i,trigger:n}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;e>t;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=0,n=arguments.length;n>i;i++)t=e.indexOf(arguments[i]),-1!==t&&(e.splice(t,1),this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=i.length;n--;)t.call(e,i[n],n,i);return this},getObjects:function(t){return"undefined"==typeof t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},function(t){var e=Math.sqrt,i=Math.atan2,n=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*n},radiansToDegrees:function(t){return t/n},rotatePoint:function(t,e,i){var n=Math.sin(i),r=Math.cos(i);t.subtractEquals(e);var o=t.x*r-t.y*n,s=t.x*n+t.y*r;return new fabric.Point(o,s).addEquals(e)},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},invertTransform:function(t){var e=t.slice(),i=1/(t[0]*t[3]-t[1]*t[2]);e=[i*t[3],-i*t[1],-i*t[2],i*t[0],0,0];var n=fabric.util.transformPoint({x:t[4],y:t[5]},e);return e[4]=-n.x,e[5]=-n.y,e},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;for(var i=e.split("."),n=i.length,r=t||fabric.window,o=0;n>o;++o)r=r[i[o]];return r},loadImage:function(t,e,i,n){if(!t)return void(e&&e.call(i,t));var r=fabric.util.createImage();r.onload=function(){e&&e.call(i,r),r=r.onload=r.onerror=null},r.onerror=function(){fabric.log("Error loading "+r.src),e&&e.call(i,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&"undefined"!=typeof n&&(r.crossOrigin=n),r.src=t},enlivenObjects:function(t,e,i,n){function r(){++s===a&&e&&e(o)}t=t||[];var o=[],s=0,a=t.length;return a?void t.forEach(function(t,e){if(!t||!t.type)return void r();var s=fabric.util.getKlass(t.type,i);s.async?s.fromObject(t,function(i,s){s||(o[e]=i,n&&n(t,o[e])),r()}):(o[e]=s.fromObject(t),n&&n(t,o[e]),r())}):void(e&&e(o))},groupSVGElements:function(t,e,i){var n;return n=new fabric.PathGroup(t,e),"undefined"!=typeof i&&n.setSourcePath(i),n},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;r>n;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,r,o,s,a){var h=o-n,l=s-r,c=e(h*h+l*l),u=i(l,h),f=a.length,d=0,p=!0;for(t.save(),t.translate(n,r),t.moveTo(0,0),t.rotate(u),n=0;c>n;)n+=a[d++%f],n>c&&(n=c),t[p?"lineTo":"moveTo"](n,0),p=!p;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var n=e.stateProperties[i],r=n.charAt(0).toUpperCase()+n.slice(1),o="set"+r,s="get"+r;e[s]||(e[s]=function(t){return new Function('return this.get("'+t+'")')}(n)),e[o]||(e[o]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(n))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);for(var r=!0,o=t.getImageData(e,i,2*n||1,2*n||1),s=3,a=o.data.length;a>s;s+=4){var h=o.data[s];if(r=0>=h,r===!1)break}return o=null,r}}}("undefined"!=typeof exports?exports:this),function(){function t(t,n,o,s,h,l,c){var u=a.call(arguments);if(r[u])return r[u];var f=Math.PI,d=c*f/180,p=Math.sin(d),g=Math.cos(d),v=0,m=0;o=Math.abs(o),s=Math.abs(s);var y=-g*t*.5-p*n*.5,b=-g*n*.5+p*t*.5,_=o*o,x=s*s,w=b*b,C=y*y,S=_*x-_*w-x*C,T=0;if(0>S){var O=Math.sqrt(1-S/(_*x));o*=O,s*=O}else T=(h===l?-1:1)*Math.sqrt(S/(_*w+x*C));var E=T*o*b/s,A=-T*s*y/o,k=g*E-p*A+.5*t,j=p*E+g*A+.5*n,I=i(1,0,(y-E)/o,(b-A)/s),M=i((y-E)/o,(b-A)/s,(-y-E)/o,(-b-A)/s);0===l&&M>0?M-=2*f:1===l&&0>M&&(M+=2*f);for(var P=Math.ceil(Math.abs(M/f*2)),D=[],L=M/P,R=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),N=I+L,B=0;P>B;B++)D[B]=e(I,N,g,p,o,s,k,j,R,v,m),v=D[B][4],m=D[B][5],I=N,N+=L;return r[u]=D,D}function e(t,e,i,n,r,s,h,l,c,u,f){var d=a.call(arguments);if(o[d])return o[d];var p=Math.cos(t),g=Math.sin(t),v=Math.cos(e),m=Math.sin(e),y=i*r*v-n*s*m+h,b=n*r*v+i*s*m+l,_=u+c*(-i*r*g-n*s*p),x=f+c*(-n*r*g+i*s*p),w=y+c*(i*r*m+n*s*v),C=b+c*(n*r*m-i*s*v);return o[d]=[_,x,w,C,y,b],o[d]}function i(t,e,i,n){var r=Math.atan2(e,t),o=Math.atan2(n,i);return o>=r?o-r:2*Math.PI-(r-o)}function n(t,e,i,n,r,o,h,l){var c=a.call(arguments);if(s[c])return s[c];var u,f,d,p,g,v,m,y,b=Math.sqrt,_=Math.min,x=Math.max,w=Math.abs,C=[],S=[[],[]];f=6*t-12*i+6*r,u=-3*t+9*i-9*r+3*h,d=3*i-3*t;for(var T=0;2>T;++T)if(T>0&&(f=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*l,d=3*n-3*e),w(u)<1e-12){if(w(f)<1e-12)continue;p=-d/f,p>0&&1>p&&C.push(p)}else m=f*f-4*d*u,0>m||(y=b(m),g=(-f+y)/(2*u),g>0&&1>g&&C.push(g),v=(-f-y)/(2*u),v>0&&1>v&&C.push(v));for(var O,E,A,k=C.length,j=k;k--;)p=C[k],A=1-p,O=A*A*A*t+3*A*A*p*i+3*A*p*p*r+p*p*p*h,S[0][k]=O,E=A*A*A*e+3*A*A*p*n+3*A*p*p*o+p*p*p*l,S[1][k]=E;S[0][j]=t,S[1][j]=e,S[0][j+1]=h,S[1][j+1]=l;var I=[{x:_.apply(null,S[0]),y:_.apply(null,S[1])},{x:x.apply(null,S[0]),y:x.apply(null,S[1])}];return s[c]=I,I}var r={},o={},s={},a=Array.prototype.join;fabric.util.drawArc=function(e,i,n,r){for(var o=r[0],s=r[1],a=r[2],h=r[3],l=r[4],c=r[5],u=r[6],f=[[],[],[],[]],d=t(c-i,u-n,o,s,h,l,a),p=0,g=d.length;g>p;p++)f[p][0]=d[p][0]+i,f[p][1]=d[p][1]+n,f[p][2]=d[p][2]+i,f[p][3]=d[p][3]+n,f[p][4]=d[p][4]+i,f[p][5]=d[p][5]+n,e.bezierCurveTo.apply(e,f[p])},fabric.util.getBoundsOfArc=function(e,i,r,o,s,a,h,l,c){for(var u=0,f=0,d=[],p=[],g=t(l-e,c-i,r,o,a,h,s),v=[[],[]],m=0,y=g.length;y>m;m++)d=n(u,f,g[m][0],g[m][1],g[m][2],g[m][3],g[m][4],g[m][5]),v[0].x=d[0].x+e,v[0].y=d[0].y+i,v[1].x=d[1].x+e,v[1].y=d[1].y+i,p.push(v[0]),p.push(v[1]),u=g[m][4],f=g[m][5];return p},fabric.util.getBoundsOfCurve=n}(),function(){function t(t,e){for(var i=r.call(arguments,2),n=[],o=0,s=t.length;s>o;o++)n[o]=i.length?t[o][e].apply(t[o],i):t[o][e].call(t[o]);return n}function e(t,e){return n(t,e,function(t,e){return t>=e})}function i(t,e){return n(t,e,function(t,e){return e>t})}function n(t,e,i){if(t&&0!==t.length){var n=t.length-1,r=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],r)&&(r=t[n][e]);else for(;n--;)i(t[n],r)&&(r=t[n]);return r}}var r=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);i>r;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;n>i;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,r=this.length>>>0;r>n;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;n>i;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;n>i;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],r=0,o=this.length>>>0;o>r;r++)r in this&&(i=this[r],t.call(e,i,r,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(arguments.length>1)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;i>n;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={invoke:t,min:i,max:e}}(),function(){function t(t,e){for(var i in e)t[i]=e[i];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(n){var r,o=this,s=t.call(arguments,1);return r=s.length?function(){return e.call(o,this instanceof i?this:n,s.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof i?this:n,arguments)},i.prototype=this.prototype,r.prototype=new i,r})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,n.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var o=null,a=n.call(arguments,0);"function"==typeof a[0]&&(o=a.shift()),i.superclass=o,i.subclasses=[],o&&(t.prototype=o.prototype,i.prototype=new t,o.subclasses.push(i));for(var h=0,l=a.length;l>h;h++)s(i,a[h],o);return i.prototype.initialize||(i.prototype.initialize=r),i.prototype.constructor=i,i.prototype.callSuper=e,i}var n=Array.prototype.slice,r=function(){},o=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),s=function(t,e,i){for(var n in e)n in t.prototype&&"function"==typeof t.prototype[n]&&(e[n]+"").indexOf("callSuper")>-1?t.prototype[n]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);return this.constructor.superclass=n,"initialize"!==t?r:void 0}}(n):t.prototype[n]=e[n],o&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),r=n.length;for(i=0;r>i;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(s(t),i||fabric.window.event)}}function n(t,e){return function(i){if(g[t]&&g[t][e])for(var n=g[t][e],r=0,o=n.length;o>r;r++)n[r].call(this,i||fabric.window.event)}}function r(t,e){t||(t=fabric.window.event);var i=t.target||(typeof t.srcElement!==h?t.srcElement:null),n=fabric.util.getScrollLeftTop(i,e);return{x:v(t)+n.left,y:m(t)+n.top}}function o(t,e,i){var n="touchend"===t.type?"changedTouches":"touches";return t[n]&&t[n][0]?t[n][0][e]-(t[n][0][e]-t[n][0][i])||t[i]:t[i]}var s,a,h="unknown",l=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};s=function(e){return t[e]},a=function(e,i){t[e]=i}}();var c,u,f=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),d=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),p={},g={};f?(c=function(t,e,i){t.addEventListener(e,i,!1)},u=function(t,e,i){t.removeEventListener(e,i,!1)}):d?(c=function(t,i,n){var r=l(t);a(r,t),p[r]||(p[r]={}),p[r][i]||(p[r][i]=[]);var o=e(r,n);p[r][i].push(o),t.attachEvent("on"+i,o.wrappedHandler)},u=function(t,e,i){var n,r=l(t);if(p[r]&&p[r][e])for(var o=0,s=p[r][e].length;s>o;o++)n=p[r][e][o],n&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),p[r][e][o]=null)}):(c=function(t,e,i){var r=l(t);if(g[r]||(g[r]={}),!g[r][e]){g[r][e]=[];var o=t["on"+e];o&&g[r][e].push(o),t["on"+e]=n(r,e)}g[r][e].push(i)},u=function(t,e,i){var n=l(t);if(g[n]&&g[n][e])for(var r=g[n][e],o=0,s=r.length;s>o;o++)r[o]===i&&r.splice(o,1)}),fabric.util.addListener=c,fabric.util.removeListener=u;var v=function(t){return typeof t.clientX!==h?t.clientX:0},m=function(t){return typeof t.clientY!==h?t.clientY:0};fabric.isTouchSupported&&(v=function(t){return o(t,"pageX","clientX")},m=function(t){return o(t,"pageY","clientY")}),fabric.util.getPointer=r,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)o(t,e[n]);else{var r="float"===n||"cssFloat"===n?"undefined"==typeof i.styleFloat?"cssFloat":"styleFloat":n;i[r]=e[n]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,n="string"==typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};i?o=function(t,e){return t.style.opacity=e,t}:n&&(o=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(r,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function i(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function n(t,i,n){return"string"==typeof i&&(i=e(i,n)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function r(t,e){var i,n,r=0,o=0,s=fabric.document.documentElement,a=fabric.document.body||{scrollLeft:0,scrollTop:0};for(n=t;t&&t.parentNode&&!i;)t=t.parentNode,1===t.nodeType&&"fixed"===fabric.util.getElementStyle(t,"position")&&(i=t),1===t.nodeType&&n!==e&&"absolute"===fabric.util.getElementStyle(t,"position")?(r=0,o=0):t===fabric.document?(r=a.scrollLeft||s.scrollLeft||0,o=a.scrollTop||s.scrollTop||0):(r+=t.scrollLeft||0,o+=t.scrollTop||0);return{left:r,top:o}}function o(t){var e,i,n=t&&t.ownerDocument,r={left:0,top:0},o={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return{left:0,top:0};for(var a in s)o[s[a]]+=parseInt(c(t,a),10)||0;return e=n.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(r=t.getBoundingClientRect()),i=fabric.util.getScrollLeftTop(t,null),{left:r.left+i.left-(e.clientLeft||0)+o.left,top:r.top+i.top-(e.clientTop||0)+o.top}}var s,a=Array.prototype.slice,h=function(t){return a.call(t,0)};try{s=h(fabric.document.childNodes)instanceof Array}catch(l){}s||(h=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var c;c=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),r=!0;n.onload=n.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=h,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=n,fabric.util.getScrollLeftTop=r,fabric.util.getElementOffset=o,fabric.util.getElementStyle=c}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,r){r||(r={});var o,s=r.method?r.method.toUpperCase():"GET",a=r.onComplete||function(){},h=n();return h.onreadystatechange=function(){4===h.readyState&&(a(h),h.onreadystatechange=e)},"GET"===s&&(o=null,"string"==typeof r.parameters&&(i=t(i,r.parameters))),h.open(s,i,!0),"POST"!==s&&"PUT"!==s||h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(o),h}var n=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{var i=t[e]();if(i)return t[e]}catch(n){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){"undefined"!=typeof console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(i){t||(t={});var n,r=i||+new Date,o=t.duration||500,s=r+o,a=t.onChange||function(){},h=t.abort||function(){return!1},l=t.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},c="startValue"in t?t.startValue:0,u="endValue"in t?t.endValue:100,f=t.byValue||u-c;t.onStart&&t.onStart(),function d(i){n=i||+new Date;var u=n>s?o:n-r;return h()?void(t.onComplete&&t.onComplete()):(a(l(u,c,f,o)),n>s?void(t.onComplete&&t.onComplete()):void e(d))}(r)})}function e(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function n(t,e,i,n){return t/=n/2,1>t?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function r(t,e,i,n){return i*(t/=n)*t*t*t+e}function o(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function s(t,e,i,n){return t/=n/2,1>t?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function a(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function h(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function l(t,e,i,n){return t/=n/2,1>t?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function c(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function u(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function f(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function d(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function p(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}function g(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,1>t?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e)}function v(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function m(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function y(t,e,i,n){return t/=n/2,1>t?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function b(i,n,r,o){var s=1.70158,a=0,h=r;if(0===i)return n;if(i/=o,1===i)return n+r;a||(a=.3*o);var l=t(h,r,a,s);return-e(l,i,o)+n}function _(e,i,n,r){var o=1.70158,s=0,a=n;if(0===e)return i;if(e/=r,1===e)return i+n;s||(s=.3*r);var h=t(a,n,s,o);return h.a*Math.pow(2,-10*e)*Math.sin((e*r-h.s)*(2*Math.PI)/h.p)+h.c+i}function x(i,n,r,o){var s=1.70158,a=0,h=r;if(0===i)return n;if(i/=o/2,2===i)return n+r;a||(a=o*(.3*1.5));var l=t(h,r,a,s);return 1>i?-.5*e(l,i,o)+n:l.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-l.s)*(2*Math.PI)/l.p)*.5+l.c+n}function w(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e}function C(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e}function S(t,e,i,n,r){return void 0===r&&(r=1.70158),t/=n/2,1>t?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e}function T(t,e,i,n){return i-O(n-t,0,i,n)+e}function O(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function E(t,e,i,n){return n/2>t?.5*T(2*t,0,i,n)+e:.5*O(2*t-n,0,i,n)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:i,easeInOutCubic:n,easeInQuart:r,easeOutQuart:o,easeInOutQuart:s,easeInQuint:a,easeOutQuint:h,easeInOutQuint:l,easeInSine:c,easeOutSine:u,easeInOutSine:f,easeInExpo:d,easeOutExpo:p,easeInOutExpo:g,easeInCirc:v,easeOutCirc:m,easeInOutCirc:y,easeInElastic:b,easeOutElastic:_,easeInOutElastic:x,easeInBack:w,easeOutBack:C,easeInOutBack:S,easeInBounce:T,easeOutBounce:O,easeInOutBounce:E}}(),function(t){"use strict";function e(t){return t in x?x[t]:t}function i(t,e,i,n){var r,o="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?_(i.transformMatrix,p.parseTransformAttribute(e)):p.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&i.visible===!1&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":r=o?e.map(b):b(e,n):e="",!o&&isNaN(r)?e:r}function n(t){for(var e in w)if(t[e]&&"undefined"!=typeof t[w[e]]&&0!==t[e].indexOf("url(")){var i=new p.Color(t[e]);t[e]=i.setAlpha(y(i.getAlpha()*t[w[e]],2)).toRgba()}return t}function r(t,n){var r,o;t.replace(/;$/,"").split(";").forEach(function(t){var s=t.split(":");r=e(s[0].trim().toLowerCase()),o=i(r,s[1].trim()),n[r]=o})}function o(t,n){var r,o;for(var s in t)"undefined"!=typeof t[s]&&(r=e(s.toLowerCase()),o=i(r,t[s]),n[r]=o)}function s(t,e){var i={};for(var n in p.cssRules[e])if(a(t,n.split(" ")))for(var r in p.cssRules[e][n])i[r]=p.cssRules[e][n][r];return i}function a(t,e){var i,n=!0;return i=l(t,e.pop()),i&&e.length&&(n=h(t,e)),i&&n&&0===e.length}function h(t,e){for(var i,n=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),t=t.parentNode,n=l(t,i);return 0===e.length}function l(t,e){var i,n=t.nodeName,r=t.getAttribute("class"),o=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),r&&e.length){r=r.split(" ");for(var s=r.length;s--;)i=new RegExp("\\."+r[s]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function c(t){for(var e=t.getElementsByTagName("use");e.length;){for(var i,n=e[0],r=n.getAttribute("xlink:href").substr(1),o=n.getAttribute("x")||0,s=n.getAttribute("y")||0,a=t.getElementById(r).cloneNode(!0),h=(a.getAttribute("transform")||"")+" translate("+o+", "+s+")",l=0,c=n.attributes,u=c.length;u>l;l++){var f=c.item(l);"x"!==f.nodeName&&"y"!==f.nodeName&&"xlink:href"!==f.nodeName&&("transform"===f.nodeName?h=f.nodeValue+" "+h:a.setAttribute(f.nodeName,f.nodeValue))}a.setAttribute("transform",h),a.setAttribute("instantiated_by_use","1"),a.removeAttribute("id"),i=n.parentNode,i.replaceChild(a,n)}}function u(t,e,i){var n,r,o,s,a=t.getAttribute("viewBox"),h=1,l=1,c=0,u=0;if(a&&(a=a.match(C))&&(c=-parseFloat(a[1]),u=-parseFloat(a[2]),n=parseFloat(a[3]),r=parseFloat(a[4]),e&&e!==n&&(h=e/n),i&&i!==r&&(l=i/r),l=h=h>l?l:h,1!==h||1!==l||0!==c||0!==u)){if(o=" matrix("+h+" 0 0 "+l+" "+c*h+" "+u*l+") ","svg"===t.tagName){for(s=t.ownerDocument.createElement("g");null!=t.firstChild;)s.appendChild(t.firstChild);t.appendChild(s)}else s=t,o=s.getAttribute("transform")+o;s.setAttribute("transform",o)}}function f(t){var e=t.objects,i=t.options;return e=e.map(function(t){return p[v(t.type)].fromObject(t)}),{objects:e,options:i}}function d(t,e,i){e[i]&&e[i].toSVG&&t.push('<pattern x="0" y="0" id="',i,'Pattern" ','width="',e[i].source.width,'" height="',e[i].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',e[i].source.width,'" height="',e[i].source.height,'" xlink:href="',e[i].source.src,'"></image></pattern>')}var p=t.fabric||(t.fabric={}),g=p.util.object.extend,v=p.util.string.capitalize,m=p.util.object.clone,y=p.util.toFixed,b=p.util.parseUnit,_=p.util.multiplyTransformMatrices,x={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},w={stroke:"strokeOpacity",fill:"fillOpacity"};p.cssRules={},p.gradientDefs={},p.parseTransformAttribute=function(){function t(t,e){var i=e[0];t[0]=Math.cos(i),t[1]=Math.sin(i),t[2]=-Math.sin(i),t[3]=Math.cos(i)}function e(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function i(t,e){t[2]=Math.tan(p.util.degreesToRadians(e[0]))}function n(t,e){t[1]=Math.tan(p.util.degreesToRadians(e[0]))}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=[1,0,0,1,0,0],s=p.reNum,a="(?:\\s+,?\\s*|,\\s*)",h="(?:(skewX)\\s*\\(\\s*("+s+")\\s*\\))",l="(?:(skewY)\\s*\\(\\s*("+s+")\\s*\\))",c="(?:(rotate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+")"+a+"("+s+"))?\\s*\\))",u="(?:(scale)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")\\s*\\))",g="(?:"+d+"|"+f+"|"+u+"|"+c+"|"+h+"|"+l+")",v="(?:"+g+"(?:"+a+g+")*)",m="^\\s*(?:"+v+"?)\\s*$",y=new RegExp(m),b=new RegExp(g,"g");return function(s){var a=o.concat(),h=[];if(!s||s&&!y.test(s))return a;s.replace(b,function(s){var l=new RegExp(g).exec(s).filter(function(t){return""!==t&&null!=t}),c=l[1],u=l.slice(2).map(parseFloat);switch(c){case"translate":r(a,u);break;case"rotate":u[0]=p.util.degreesToRadians(u[0]),t(a,u);break;case"scale":e(a,u);break;case"skewX":i(a,u);break;case"skewY":n(a,u);break;case"matrix":a=u}h.push(a.concat()),a=o.concat()});for(var l=h[0];h.length>1;)h.shift(),l=p.util.multiplyTransformMatrices(l,h[0]);return l}}();var C=new RegExp("^\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*$");p.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName)&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var e=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,i=/^(symbol|image|marker|pattern|view)$/;return function(n,r,o){if(n){c(n);var s,a,h=new Date,l=p.Object.__uid++,f=!1;if(n.getAttribute("width")&&"100%"!==n.getAttribute("width")&&(s=b(n.getAttribute("width"))),n.getAttribute("height")&&"100%"!==n.getAttribute("height")&&(a=b(n.getAttribute("height"))),!s||!a){var d=n.getAttribute("viewBox");d&&(d=d.match(C))?(s=parseFloat(d[3]),a=parseFloat(d[4])):f=!0}u(n,s,a);var g=p.util.toArray(n.getElementsByTagName("*"));if(0===g.length&&p.isLikelyNode){g=n.selectNodes('//*[name(.)!="svg"]');for(var v=[],y=0,_=g.length;_>y;y++)v[y]=g[y];g=v}var x=g.filter(function(n){return i.test(n.tagName)&&u(n,0,0),e.test(n.tagName)&&!t(n,/^(?:pattern|defs|symbol)$/)});if(!x||x&&!x.length)return void(r&&r([],{}));var w={width:s,height:a,svgUid:l,toBeParsed:f};p.gradientDefs[l]=p.getGradientDefs(n),p.cssRules[l]=p.getCSSRules(n),p.parseElements(x,function(t){p.documentParsingTime=new Date-h,r&&r(t,w)},m(w),o)}}}();var S={has:function(t,e){e(!1)},get:function(){},set:function(){}},T=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+p.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+p.reNum+"))?\\s+(.*)");
g(p,{parseFontDeclaration:function(t,e){var i=t.match(T);if(i){var n=i[1],r=i[3],o=i[4],s=i[5],a=i[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=b(o)),a&&(e.fontFamily=a),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,i,n,r,o=t.getElementsByTagName("linearGradient"),s=t.getElementsByTagName("radialGradient"),a=0,h=[],l={},c={};for(h.length=o.length+s.length,i=o.length;i--;)h[a++]=o[i];for(i=s.length;i--;)h[a++]=s[i];for(;a--;)e=h[a],r=e.getAttribute("xlink:href"),n=e.getAttribute("id"),r&&(c[n]=r.substr(1)),l[n]=e;for(n in c){var u=l[c[n]].cloneNode(!0);for(e=l[n];u.firstChild;)e.appendChild(u.firstChild)}return l},parseAttributes:function(t,r,o){if(t){var a,h,l={};"undefined"==typeof o&&(o=t.getAttribute("svgUid")),t.parentNode&&/^symbol|[g|a]$/i.test(t.parentNode.nodeName)&&(l=p.parseAttributes(t.parentNode,r,o)),h=l&&l.fontSize||t.getAttribute("font-size")||p.Text.DEFAULT_SVG_FONT_SIZE;var c=r.reduce(function(n,r){return a=t.getAttribute(r),a&&(r=e(r),a=i(r,a,l,h),n[r]=a),n},{});return c=g(c,g(s(t,o),p.parseStyleAttribute(t))),c.font&&p.parseFontDeclaration(c.font,c),n(g(l,c))}},parseElements:function(t,e,i,n){new p.ElementsParser(t,e,i,n).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?r(i,e):o(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,n=[];for(e=0,i=t.length;i>e;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){for(var n,r=t.getElementsByTagName("style"),o={},s=0,a=r.length;a>s;s++){var h=r[s].textContent;h=h.replace(/\/\*[\s\S]*?\*\//g,""),""!==h.trim()&&(n=h.match(/[^{]*\{[\s\S]*?\}/g),n=n.map(function(t){return t.trim()}),n.forEach(function(t){for(var n=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),r={},s=n[2].trim(),a=s.replace(/;$/,"").split(/\s*;\s*/),h=0,l=a.length;l>h;h++){var c=a[h].split(/\s*:\s*/),u=e(c[0]),f=i(u,c[1],c[0]);r[u]=f}t=n[1],t.split(",").forEach(function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(o[t]=p.util.object.clone(r))})}))}return o},loadSVGFromURL:function(t,e,i){function n(n){var r=n.responseXML;r&&!r.documentElement&&p.window.ActiveXObject&&n.responseText&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),r&&r.documentElement&&p.parseSVGDocument(r.documentElement,function(i,n){S.set(t,{objects:p.util.array.invoke(i,"toObject"),options:n}),e(i,n)},i)}t=t.replace(/^\n\s*/,"").trim(),S.has(t,function(i){i?S.get(t,function(t){var i=f(t);e(i.objects,i.options)}):new p.util.request(t,{method:"get",onComplete:n})})},loadSVGFromString:function(t,e,i){t=t.trim();var n;if("undefined"!=typeof DOMParser){var r=new DOMParser;r&&r.parseFromString&&(n=r.parseFromString(t,"text/xml"))}else p.window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));p.parseSVGDocument(n.documentElement,function(t,i){e(t,i)},i)},createSVGFontFacesMarkup:function(t){for(var e="",i=0,n=t.length;n>i;i++)"text"===t[i].type&&t[i].path&&(e+=["@font-face {","font-family: ",t[i].fontFamily,"; ","src: url('",t[i].path,"')","}"].join(""));return e&&(e=['<style type="text/css">',"<![CDATA[",e,"]]>","</style>"].join("")),e},createSVGRefElementsMarkup:function(t){var e=[];return d(e,t,"backgroundColor"),d(e,t,"overlayColor"),e.join("")}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,n){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;e>t;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName)];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(n){fabric.log(n)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var n=t.fromElement(e,this.options);this.resolveGradient(n,"fill"),this.resolveGradient(n,"stroke"),this.reviver&&this.reviver(e,n),this.instances[i]=n,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(n){i.resolveGradient(n,"fill"),i.resolveGradient(n,"stroke"),i.reviver&&i.reviver(e,n),i.instances[t]=n,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});return i.Point?void i.warn("fabric.Point is already defined"):(i.Point=e,void(e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});return i.Intersection?void i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},i.Intersection.intersectLineLine=function(t,n,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),h=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),l=(o.y-r.y)*(n.x-t.x)-(o.x-r.x)*(n.y-t.y);if(0!==l){var c=a/l,u=h/l;c>=0&&1>=c&&u>=0&&1>=u?(s=new e("Intersection"),s.points.push(new i.Point(t.x+c*(n.x-t.x),t.y+c*(n.y-t.y)))):s=new e}else s=new e(0===a||0===h?"Coincident":"Parallel");return s},i.Intersection.intersectLinePolygon=function(t,i,n){for(var r=new e,o=n.length,s=0;o>s;s++){var a=n[s],h=n[(s+1)%o],l=e.intersectLineLine(t,i,a,h);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},i.Intersection.intersectPolygonPolygon=function(t,i){for(var n=new e,r=t.length,o=0;r>o;o++){var s=t[o],a=t[(o+1)%r],h=e.intersectLinePolygon(s,a,i);n.appendPoints(h.points)}return n.points.length>0&&(n.status="Intersection"),n},void(i.Intersection.intersectPolygonRectangle=function(t,n,r){var o=n.min(r),s=n.max(r),a=new i.Point(s.x,o.y),h=new i.Point(o.x,s.y),l=e.intersectLinePolygon(o,a,t),c=e.intersectLinePolygon(a,s,t),u=e.intersectLinePolygon(s,h,t),f=e.intersectLinePolygon(h,o,t),d=new e;return d.appendPoints(l.points),d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}var n=t.fabric||(t.fabric={});return n.Color?void n.warn("fabric.Color is already defined."):(n.Color=e,n.Color.prototype={_tryParsingColor:function(t){var i;return t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t?void this.setSource([255,255,255,0]):(i=e.sourceFromHex(t),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),void(i&&this.setSource(i)))},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var r,o,s,a=n.util.array.max([t,e,i]),h=n.util.array.min([t,e,i]);if(s=(a+h)/2,a===h)r=o=0;else{var l=a-h;switch(o=s>.5?l/(2-a-h):l/(a+h),a){case t:r=(e-i)/l+(i>e?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],n=this.getAlpha(),r=.5,o=this.getSource(),s=t.getSource(),a=0;3>a;a++)i.push(Math.round(o[a]*(1-r)+s[a]*r));return i[3]=n,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},n.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var n=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),r=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),o=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),i[4]?parseFloat(i[4]):1]}},n.Color.fromRgba=e.fromRgb,n.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var n=t.match(e.reHSLa);if(n){var r,o,s,a=(parseFloat(n[1])%360+360)%360/360,h=parseFloat(n[2])/(/%$/.test(n[2])?100:1),l=parseFloat(n[3])/(/%$/.test(n[3])?100:1);if(0===h)r=o=s=l;else{var c=.5>=l?l*(h+1):l+h-l*h,u=2*l-c;r=i(u,c,a+1/3),o=i(u,c,a),s=i(u,c,a-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),n[4]?parseFloat(n[4]):1]}},n.Color.fromHsla=e.fromHsl,n.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),n=3===i.length,r=n?i.charAt(0)+i.charAt(0):i.substring(0,2),o=n?i.charAt(1)+i.charAt(1):i.substring(2,4),s=n?i.charAt(2)+i.charAt(2):i.substring(4,6);return[parseInt(r,16),parseInt(o,16),parseInt(s,16),1]}},void(n.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}))}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,n,r=t.getAttribute("style"),o=t.getAttribute("offset");if(o=parseFloat(o)/(/%$/.test(o)?100:1),o=0>o?0:o>1?1:o,r){var s=r.split(/\s*;\s*/);""===s[s.length-1]&&s.pop();for(var a=s.length;a--;){var h=s[a].split(/\s*:\s*/),l=h[0].trim(),c=h[1].trim();"stop-color"===l?e=c:"stop-opacity"===l&&(n=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i,{offset:o,color:e.toRgb(),opacity:n}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function n(t,e,i){var n,r=0,o=1,s="";for(var a in e)n=parseFloat(e[a],10),o="string"==typeof e[a]&&/^\d+%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(o*="objectBoundingBox"===i?t.width:1,r="objectBoundingBox"===i?t.left||0:0):"y1"!==a&&"y2"!==a||(o*="objectBoundingBox"===i?t.height:1,r="objectBoundingBox"===i?t.top||0:0),e[a]=n*o+r;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var h=t.ry/t.rx;s=" scale(1, "+h+")",e.y1&&(e.y1/=h),e.y2&&(e.y2/=h)}return s}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e,i,n=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var r in n)"x1"===r||"x2"===r||"r2"===r?n[r]+=this.offsetX-t.width/2:"y1"!==r&&"y2"!==r||(n[r]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',n.x2,'" cy="',n.y2,'" r="',n.r2,'" fx="',n.x1,'" fy="',n.y1,'">\n']);for(var o=0;o<this.colorStops.length;o++)e.push("<stop ",'offset="',100*this.colorStops[o].offset+"%",'" style="stop-color:',this.colorStops[o].color,null!=this.colorStops[o].opacity?";stop-opacity: "+this.colorStops[o].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,n,r=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(n in r)"x1"===n||"x2"===n?r[n]+=-this.offsetX+e.width/2:"y1"!==n&&"y2"!==n||(r[n]+=-this.offsetY+e.height/2);if("text"===e.type||"i-text"===e.type)for(n in r)"x1"===n||"x2"===n?r[n]-=e.width/2:"y1"!==n&&"y2"!==n||(r[n]-=e.height/2);"linear"===this.type?i=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(i=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2));for(var o=0,s=this.colorStops.length;s>o;o++){var a=this.colorStops[o].color,h=this.colorStops[o].opacity,l=this.colorStops[o].offset;"undefined"!=typeof h&&(a=new fabric.Color(a).setAlpha(h).toRgba()),i.addColorStop(parseFloat(l),a)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(r,o){var s,a=r.getElementsByTagName("stop"),h="linearGradient"===r.nodeName?"linear":"radial",l=r.getAttribute("gradientUnits")||"objectBoundingBox",c=r.getAttribute("gradientTransform"),u=[],f={};"linear"===h?f=e(r):"radial"===h&&(f=i(r));for(var d=a.length;d--;)u.push(t(a[d]));s=n(o,f,l);var p=new fabric.Gradient({type:h,coords:f,colorStops:u,offsetX:-o.left,offsetY:-o.top});return(c||""!==s)&&(p.gradientTransform=fabric.parseTransformAttribute((c||"")+s)),p},forObject:function(t,e){return e||(e={}),n(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if("undefined"!=typeof fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),n=e.height/t.getHeight(),r=this.offsetX/t.getWidth(),o=this.offsetY/t.getHeight(),s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!=typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;return e.Shadow?void e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[],r=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha",n=40,r=40;return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),t.width&&t.height&&(n=100*i(Math.abs(this.offsetX/t.getWidth()),2)+20,r=100*i(Math.abs(this.offsetY/t.getHeight()),2)+20),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n	<feGaussianBlur in="'+e+'" stdDeviation="'+i(this.blur?this.blur/2:0,3)+'" result="blurOut"></feGaussianBlur>\n	<feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.30 0" ></feColorMatrix >\n	<feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset>\n	<feMerge>\n		<feMergeNode></feMergeNode>\n		<feMergeNode in="SourceGraphic"></feMergeNode>\n	</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var t={},i=e.Shadow.prototype;return this.color!==i.color&&(t.color=this.color),this.blur!==i.blur&&(t.blur=this.blur),this.offsetX!==i.offsetX&&(t.offsetX=this.offsetX),this.offsetY!==i.offsetY&&(t.offsetY=this.offsetY),t}}),void(e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,n=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,t.mozImageSmoothingEnabled=this.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.imageSmoothingEnabled,t.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,n){return"string"==typeof e?fabric.util.loadImage(e,function(e){this[t]=new fabric.Image(e,n),i&&i()},this,n&&n.crossOrigin):(n&&e.setOptions(n),this[t]=e,i&&i()),this},__setBgOverlayColor:function(t,e,i){if(e&&e.source){var n=this;fabric.util.loadImage(e.source,function(r){n[t]=new fabric.Pattern({source:r,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),i&&i()})}else this[t]=e,i&&i();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw n;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),"undefined"==typeof t.getContext)throw n},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var n in t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px"),e.backstoreOnly||this._setCssDimension(n,i);return e.cssOnly||this.renderAll(),this.calcOffset(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll();for(var i=0,n=this._objects.length;n>i;i++)this._objects[i].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var i=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var n=fabric.util.transformPoint(t,this.viewportTransform);this.viewportTransform[4]+=i.x-n.x,this.viewportTransform[5]+=i.y-n.y,this.renderAll();for(var r=0,o=this._objects.length;o>r;r++)this._objects[r].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll();for(var e=0,i=this._objects.length;i>e;e++)this._objects[e].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e){t.save();var i=this.viewportTransform;t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._shouldRenderObject(e)&&e.render(t),t.restore(),this.controlsAboveOverlay||e._renderControls(t)}},_shouldRenderObject:function(t){return t?t!==this.getActiveGroup()||!this.preserveObjectStacking:!1},_onObjectAdded:function(t){this.stateful&&t.setupState(),t.canvas=this,t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[t===!0&&this.interactive?"contextTop":"contextContainer"],i=this.getActiveGroup();return this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),this._renderObjects(e,i),this._renderActiveGroup(e,i),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){var i,n;if(!e||this.preserveObjectStacking)for(i=0,n=this._objects.length;n>i;++i)this._draw(t,this._objects[i]);else for(i=0,n=this._objects.length;n>i;++i)this._objects[i]&&!e.contains(this._objects[i])&&this._draw(t,this._objects[i])},_renderActiveGroup:function(t,e){if(e){var i=[];this.forEachObject(function(t){e.contains(t)&&i.push(t)}),e._set("objects",i),this._draw(t,e)}},_renderBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(t):this.backgroundColor,t.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),this.backgroundImage&&this._draw(t,this.backgroundImage)},_renderOverlay:function(t){this.overlayColor&&(t.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(t):this.overlayColor,t.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height)),this.overlayImage&&this._draw(t,this.overlayImage)},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this._renderOverlay(t),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top)),this.renderAll(),this},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var n={objects:this._toObjects(e,i)};return t(n,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return this.getObjects().map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var r=this._realizeGroupTransformOnObject(t),o=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),this._unwindGroupTransformOnObject(t,r),o},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage"),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage"),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,n,r;e.viewBox?(i=e.viewBox.width,n=e.viewBox.height):(i=this.width,
n=this.height,this.svgViewportTransformation||(r=this.viewportTransform,i/=r[0],n/=r[3])),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',n,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,e.viewBox?'viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(t,e){for(var i=0,n=this.getObjects(),r=n.length;r>i;i++){var o=n[i],s=this._realizeGroupTransformOnObject(o);t.push(o.toSVG(e)),this._unwindGroupTransformOnObject(o,s)}},_setSVGBgOverlayImage:function(t,e){this[e]&&this[e].toSVG&&t.push(this[e].toSVG())},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>")},sendToBack:function(t){return i(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return i(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var n=this._objects.indexOf(t);if(0!==n){var r=this._findNewLowerIndex(t,n,e);i(this._objects,t),this._objects.splice(r,0,t),this.renderAll&&this.renderAll()}return this},_findNewLowerIndex:function(t,e,i){var n;if(i){n=e;for(var r=e-1;r>=0;--r){var o=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(o){n=r;break}}}else n=e-1;return n},bringForward:function(t,e){var n=this._objects.indexOf(t);if(n!==this._objects.length-1){var r=this._findNewUpperIndex(t,n,e);i(this._objects,t),this._objects.splice(r,0,t),this.renderAll&&this.renderAll()}return this},_findNewUpperIndex:function(t,e,i){var n;if(i){n=e;for(var r=e+1;r<this._objects.length;++r){var o=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(o){n=r;break}}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&this.removeListeners(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return"undefined"!=typeof i.getImageData;case"setLineDash":return"undefined"!=typeof i.setLineDash;case"toDataURL":return"undefined"!=typeof e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(n){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],n=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===n.x&&i.y===n.y&&(i.x-=.5,n.x+=.5),t.moveTo(i.x,i.y);for(var r=1,o=this._points.length;o>r;r++){var s=i.midPointFrom(n);t.quadraticCurveTo(i.x,i.y,s.x,s.y),i=this._points[r],n=this._points[r+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),n=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var r=1,o=t.length;o>r;r++){var s=i.midPointFrom(n);e.push("Q ",i.x," ",i.y," ",s.x," ",s.y," "),i=new fabric.Point(t[r].x,t[r].y),r+1<t.length&&(n=new fabric.Point(t[r+1].x,t[r+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath();var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===e)return void this.canvas.renderAll();var i=this.createPath(e);this.canvas.add(i),i.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:i})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,n=this.canvas.viewportTransform;i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;n>i;i++){var r=this.points[i],o=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var s=new fabric.Group(e,{originX:"center",originY:"center"});s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;n>i;i++)for(var r=this.sprayChunks[i],o=0,s=r.length;s>o;o++){var a=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var h=new fabric.Group(e,{originX:"center",originY:"center"});h.canvas=this.canvas,this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},n=0,r=t.length;r>n;n++)e=t[n].left+""+t[n].top,i[e]||(i[e]=t[n]);var o=[];for(e in i)o.push(i[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,n=this.sprayChunkPoints.length;n>i;i++){var r=this.sprayChunkPoints[i];"undefined"!=typeof r.opacity&&(t.globalAlpha=r.opacity),t.fillRect(r.x,r.y,r.width,r.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,r=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-r,t.x+r),i=fabric.util.getRandomInt(t.y-r,t.y+r),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new fabric.Point(e,i);s.width=n,this.randomOpacity&&(s.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=20,e=5,i=fabric.document.createElement("canvas"),n=i.getContext("2d");return i.width=i.height=t+e,n.fillStyle=this.color,n.beginPath(),n.arc(t/2,t/2,t/2,0,2*Math.PI,!1),n.closePath(),n.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,n=Math.atan2,r=Math.abs,o=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centeredScaling:!1,centeredRotation:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(t,e.target)?"rotate"===e.action?this._setOriginToCenter(e.target):("center"!==e.originX&&("right"===e.originX?e.mouseXSign=-1:e.mouseXSign=1),"center"!==e.originY&&("bottom"===e.originY?e.mouseYSign=-1:e.mouseYSign=1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var i=this.getPointer(t,!0),n=this._normalizePointer(e,i);return e.containsPoint(n)||e._findTargetCorner(i)},_normalizePointer:function(t,e){var i,n=this.getActiveGroup(),r=e.x,o=e.y,s=n&&"group"!==t.type&&n.contains(t);return s&&(i=new fabric.Point(n.left,n.top),i=fabric.util.transformPoint(i,this.viewportTransform,!0),r-=i.x,o-=i.y),{x:r,y:o}},isTargetTransparent:function(t,e,i){var n=t.hasBorders,r=t.transparentCorners;t.hasBorders=t.transparentCorners=!1,this._draw(this.contextCache,t),t.hasBorders=n,t.transparentCorners=r;var o=fabric.util.isTransparent(this.contextCache,e,i,this.targetFindTolerance);return this.clearContext(this.contextCache),o},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),n=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t.shiftKey||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t,e){if(e){var i,n=this._currentTransform;return"scale"===n.action||"scaleX"===n.action||"scaleY"===n.action?i=this.centeredScaling||e.centeredScaling:"rotate"===n.action&&(i=this.centeredRotation||e.centeredRotation),i?!t.altKey:t.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e){var i="drag";return e&&(i="ml"===e||"mr"===e?"scaleX":"mt"===e||"mb"===e?"scaleY":"mtr"===e?"rotate":"scale"),i},_setupCurrentTransform:function(t,i){if(i){var n=this.getPointer(t),r=i._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(i,r),s=this._getOriginFromCorner(i,r);this._currentTransform={target:i,action:o,scaleX:i.scaleX,scaleY:i.scaleY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:s.x,originY:s.y,ex:n.x,ey:n.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,originX:s.x,originY:s.y},this._resetCurrentTransform(t)}},_translateObject:function(t,e){var i=this._currentTransform.target;i.get("lockMovementX")||i.set("left",t-this._currentTransform.offsetX),i.get("lockMovementY")||i.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,i){var n=this._currentTransform,r=n.target,o=r.get("lockScalingX"),s=r.get("lockScalingY"),a=r.get("lockScalingFlip");if(!o||!s){var h=r.translateToOriginPoint(r.getCenterPoint(),n.originX,n.originY),l=r.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY);this._setLocalMouse(l,n),this._setObjectScale(l,n,o,s,i,a),r.setPositionByOrigin(h,n.originX,n.originY)}},_setObjectScale:function(t,e,i,n,r,o){var s=e.target,a=!1,h=!1,l=s.stroke?s.strokeWidth:0;e.newScaleX=t.x/(s.width+l/2),e.newScaleY=t.y/(s.height+l/2),o&&e.newScaleX<=0&&e.newScaleX<s.scaleX&&(a=!0),o&&e.newScaleY<=0&&e.newScaleY<s.scaleY&&(h=!0),"equally"!==r||i||n?r?"x"!==r||s.get("lockUniScaling")?"y"!==r||s.get("lockUniScaling")||h||n||s.set("scaleY",e.newScaleY):a||i||s.set("scaleX",e.newScaleX):(a||i||s.set("scaleX",e.newScaleX),h||n||s.set("scaleY",e.newScaleY)):a||h||this._scaleObjectEqually(t,s,e),a||h||this._flipObject(e,r)},_scaleObjectEqually:function(t,e,i){var n=t.y+t.x,r=e.stroke?e.strokeWidth:0,o=(e.height+r/2)*i.original.scaleY+(e.width+r/2)*i.original.scaleX;i.newScaleX=i.original.scaleX*n/o,i.newScaleY=i.original.scaleY*n/o,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY)},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),r(t.x)>i.padding?t.x<0?t.x+=i.padding:t.x-=i.padding:t.x=0,r(t.y)>i.padding?t.y<0?t.y+=i.padding:t.y-=i.padding:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform;if(!r.target.get("lockRotation")){var o=n(r.ey-r.top,r.ex-r.left),s=n(e-r.top,t-r.left),a=i(s-o+r.theta);0>a&&(a=360+a),r.target.angle=a%360}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,n=e.top,s=r(i),a=r(n);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(n>0?0:-n),s,a),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var h=e.ex+o-(i>0?0:s),l=e.ey+o-(n>0?0:a);t.beginPath(),fabric.util.drawDashedLine(t,h,l,h+s,l,this.selectionDashArray),fabric.util.drawDashedLine(t,h,l+a-1,h+s,l+a-1,this.selectionDashArray),fabric.util.drawDashedLine(t,h,l,h,l+a,this.selectionDashArray),fabric.util.drawDashedLine(t,h+s-1,l,h+s-1,l+a,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+o-(i>0?0:s),e.ey+o-(n>0?0:a),s,a)},_isLastRenderedObject:function(t){return this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t,!0))},findTarget:function(t,e){if(!this.skipTargetFind){if(this._isLastRenderedObject(t))return this.lastRenderedObjectWithControlsAboveOverlay;var i=this.getActiveGroup();if(i&&!e&&this.containsPoint(t,i))return i;var n=this._searchPossibleTargets(t);return this._fireOverOutEvents(n),n}},_fireOverOutEvents:function(t){t?this._hoveredTarget!==t&&(this.fire("mouse:over",{target:t}),t.fire("mouseover"),this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout")),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&this.containsPoint(t,e)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var n=this.isTargetTransparent(e,i.x,i.y);if(!n)return!0}},_searchPossibleTargets:function(t){for(var e,i=this.getPointer(t,!0),n=this._objects.length;n--;)if(!this._objects[n].group&&this._checkTarget(t,this._objects[n],i)){this.relatedTarget=this._objects[n],e=this._objects[n];break}return e},getPointer:function(e,i,n){n||(n=this.upperCanvasEl);var r,o=t(e,n),s=n.getBoundingClientRect(),a=s.width||0,h=s.height||0;return a&&h||("top"in s&&"bottom"in s&&(h=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,i||(o=fabric.util.transformPoint(o,fabric.util.invertTransform(this.viewportTransform))),r=0===a||0===h?{width:1,height:1}:{width:n.width/a,height:n.height/h},{x:o.x*r.width,y:o.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;i>e;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},drawControls:function(t){var e=this.getActiveGroup();e?this._drawGroupControls(t,e):this._drawObjectsControls(t)},_drawGroupControls:function(t,e){e._renderControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;i>e;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[e])}});for(var s in fabric.StaticCanvas)"prototype"!==s&&(fabric.Canvas[s]=fabric.StaticCanvas[s]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mousewheel",this._onMouseWheel),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var n=this;setTimeout(function(){e(n.upperCanvasEl,"mousedown",n._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);this._currentTransform?(this._finalizeCurrentTransform(),e=this._currentTransform.target):e=this.findTarget(t,!0);var i=this._shouldRender(e,this.getPointer(t));this._maybeGroupObjects(t),e&&(e.isMoving=!1),i&&this.renderAll(),this._handleCursorAndEvent(t,e)},_handleCursorAndEvent:function(t,e){this._setCursorFromEvent(t,e);var i=this;setTimeout(function(){i._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._restoreOriginXY(e)},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseDown(i),this.fire("mouse:down",{e:t});var n=this.findTarget(t);"undefined"!=typeof n&&n.fire("mousedown",{e:t,target:n})},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseMove(i)}this.setCursor(this.freeDrawingCursor),this.fire("mouse:move",{e:t});var n=this.findTarget(t);"undefined"!=typeof n&&n.fire("mousemove",{e:t,target:n})},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this.fire("mouse:up",{e:t});var e=this.findTarget(t);"undefined"!=typeof e&&e.fire("mouseup",{e:t,target:e})},__onMouseDown:function(t){var e="which"in t?1===t.which:1===t.button;if(e||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var i=this.findTarget(t),n=this.getPointer(t,!0);this._previousPointer=n;var r=this._shouldRender(i,n),o=this._shouldGroup(t,i);this._shouldClearSelection(t,i)?this._clearSelection(t,i,n):o&&(this._handleGrouping(t,i),i=this.getActiveGroup()),i&&i.selectable&&!o&&(this._beforeTransform(t,i),this._setupCurrentTransform(t,i)),r&&this.renderAll(),this.fire("mouse:down",{target:i,e:t}),i&&i.fire("mousedown",{e:t})}}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e),e!==this.getActiveGroup()&&e!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(e,t))},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!("undefined"!=typeof t.touches&&t.touches.length>1)){var n=this._groupSelector;n?(i=this.getPointer(t,!0),n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),!e||e&&!e.selectable?this.setCursor(this.defaultCursor):this._setCursorFromEvent(t,e)),this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})}},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),this.renderAll()},_performTransformAction:function(t,e,i){var n=i.x,r=i.y,o=e.target,s=e.action;"rotate"===s?(this._rotateObject(n,r),this._fire("rotating",o,t)):"scale"===s?(this._onScale(t,e,n,r),this._fire("scaling",o,t)):"scaleX"===s?(this._scaleObject(n,r,"x"),this._fire("scaling",o,t)):"scaleY"===s?(this._scaleObject(n,r,"y"),this._fire("scaling",o,t)):(this._translateObject(n,r),this._fire("moving",o,t),this.setCursor(this.moveCursor))},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){
var i=this._shouldCenterTransform(t,e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(t),e.reset=!0)}},_onScale:function(t,e,i,n){!t.shiftKey&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t,e.target),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally")):(e.currentAction="scale",this._scaleObject(i,n))},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var i=this.getActiveGroup(),n=e._findTargetCorner&&(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return n?this._setCornerCursor(n,e):this.setCursor(e.hoverCursor||this.hoverCursor),!0},_setCornerCursor:function(e,i){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i){var n=Math.round(i.getAngle()%360/45);return 0>n&&(n+=8),n+=t[e],n%=8,this.cursorMap[n]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){e===this.getActiveGroup()&&(e=this.findTarget(t,!0),!e||e.isType("group"))||(this.getActiveGroup()?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),this._resetObjectTransform(i),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t),this._resetObjectTransform(i);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t),n=i?[this._activeObject,t]:[t,this._activeObject];return new fabric.Group(n,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,n=[],r=this._groupSelector.ex,o=this._groupSelector.ey,s=r+this._groupSelector.left,a=o+this._groupSelector.top,h=new fabric.Point(t(r,s),t(o,a)),l=new fabric.Point(e(r,s),e(o,a)),c=r===s&&o===a,u=this._objects.length;u--&&(i=this._objects[u],!(i&&i.selectable&&i.visible&&(i.intersectsWithRect(h,l)||i.isContainedWithinRect(h,l)||i.containsPoint(h)||i.containsPoint(l))&&(i.set("active",!0),n.push(i),c))););return n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,r={left:t.left,top:t.top,width:t.width,height:t.height};return 1!==n?this.__toDataURLWithMultiplier(e,i,r,n):this.__toDataURL(e,i,r)},__toDataURL:function(t,e,i){this.renderAll(!0);var n=this.upperCanvasEl||this.lowerCanvasEl,r=this.__getCroppedCanvas(n,i);"jpg"===t&&(t="jpeg");var o=fabric.StaticCanvas.supports("toDataURLWithQuality")?(r||n).toDataURL("image/"+t,e):(r||n).toDataURL("image/"+t);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),r&&(r=null),o},__getCroppedCanvas:function(t,e){var i,n,r="left"in e||"top"in e||"width"in e||"height"in e;return r&&(i=fabric.util.createCanvasElement(),n=i.getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,n.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,n){var r=this.getWidth(),o=this.getHeight(),s=r*n,a=o*n,h=this.getActiveObject(),l=this.getActiveGroup(),c=this.contextTop||this.contextContainer;n>1&&this.setWidth(s).setHeight(a),c.scale(n,n),i.left&&(i.left*=n),i.top&&(i.top*=n),i.width?i.width*=n:1>n&&(i.width=s),i.height?i.height*=n:1>n&&(i.height=a),l?this._tempRemoveBordersControlsFromGroup(l):h&&this.deactivateAll&&this.deactivateAll(),this.renderAll(!0);var u=this.__toDataURL(t,e,i);return this.width=r,this.height=o,c.scale(1/n,1/n),this.setWidth(r).setHeight(o),l?this._restoreBordersControlsOnGroup(l):h&&this.setActiveObject&&this.setActiveObject(h),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),u},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):t;this.clear();var r=this;return this._enlivenObjects(n.objects,function(){r._setBgOverlay(n,e)},i),this}},_setBgOverlay:function(t,e){var i=this,n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var r=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,r),this.__setBgOverlay("overlayImage",t.overlayImage,n,r),this.__setBgOverlay("backgroundColor",t.background,n,r),this.__setBgOverlay("overlayColor",t.overlay,n,r),r()},__setBgOverlay:function(t,e,i,n){var r=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){r[t]=e,i[t]=!0,n&&n()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,n&&n()})):void(i[t]=!0)},_enlivenObjects:function(t,e,i){var n=this;if(!t||0===t.length)return void(e&&e());var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){n.insertAt(t,e,!0)}),n.renderOnAddRemove=r,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(n){i(n.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.toFixed,r=e.util.string.capitalize,o=e.util.degreesToRadians,s=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var i=e.util.getFunctionBody(t.clipTo);"undefined"!=typeof i&&(this.clipTo=new Function("ctx",i))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(o(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,i),top:n(this.top,i),width:n(this.width,i),height:n(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,i),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,i),scaleX:n(this.scaleX,i),scaleY:n(this.scaleY,i),angle:n(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation};return this.includeDefaultValues||(r=this._removeDefaultValues(r)),e.util.populateWithProperties(this,r,t),r},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,n=i.stateProperties;return n.forEach(function(e){t[e]===i[e]&&delete t[e]}),t},toString:function(){return"#<fabric."+r(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,i){var r="scaleX"===t||"scaleY"===t;return r&&(i=this._constrainScale(i)),"scaleX"===t&&0>i?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&0>i?(this.flipY=!this.flipY,i*=-1):"width"===t||"height"===t?this.minScaleLimit=n(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,i){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),i||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,i),this.clipTo&&t.restore(),this._removeShadow(t),this._restoreCompositeOperation(t),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_renderControls:function(t,i){if(this.active&&!i){var n=this.getViewportTransform();t.save();var r;this.group&&(r=e.util.transformPoint(this.group.getCenterPoint(),n),t.translate(r.x,r.y),t.rotate(o(this.group.angle))),r=e.util.transformPoint(this.getCenterPoint(),n,null!=this.group),this.group&&(r.x*=this.group.scaleX,r.y*=this.group.scaleY),t.translate(r.x,r.y),t.rotate(o(this.angle)),this.drawBorders(t),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,i=this.canvas&&this.canvas.viewportTransform[3]||1;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+i)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*i*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){if(this.fill){if(t.save(),this.fill.gradientTransform){var e=this.fill.gradientTransform;t.transform.apply(t,e)}this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t)}},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(t.save(),this.strokeDashArray)1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),s?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke();else{if(this.stroke.gradientTransform){var e=this.stroke.gradientTransform;t.transform.apply(t,e)}this._stroke?this._stroke(t):t.stroke()}this._removeShadow(t),t.restore()}},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t){var i=this.toDataURL();return e.util.loadImage(i,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),n=this.getBoundingRect();i.width=n.width,i.height=n.height,e.util.wrapElement(i,"div");var r=new e.StaticCanvas(i);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(r.backgroundColor="#fff");var o={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(i.width/2,i.height/2),"center","center");var s=this.canvas;r.add(this);var a=r.toDataURL(t);return this.set(o).setCoords(),this.canvas=s,r.dispose(),r=null,a},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var n={colorStops:[]};n.type=i.type||(i.r1||i.r2?"radial":"linear"),n.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(n.coords.r1=i.r1,n.coords.r2=i.r2);for(var r in i.colorStops){var o=new e.Color(i.colorStops[r]);n.colorStops.push({offset:r,color:o.toRgb(),opacity:o.getAlpha()})}return this.set(t,e.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var i=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:e.x-i.x,y:e.y-i.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(this._prevGlobalCompositeOperation=t.globalCompositeOperation,t.globalCompositeOperation=this.globalCompositeOperation)},_restoreCompositeOperation:function(t){this.globalCompositeOperation&&this._prevGlobalCompositeOperation&&(t.globalCompositeOperation=this._prevGlobalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,i,n){var r=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===i?r=e.x+(this.getWidth()+s*this.scaleX)/2:"right"===i&&(r=e.x-(this.getWidth()+s*this.scaleX)/2),"top"===n?o=e.y+(this.getHeight()+s*this.scaleY)/2:"bottom"===n&&(o=e.y-(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},translateToOriginPoint:function(e,i,n){var r=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===i?r=e.x-(this.getWidth()+s*this.scaleX)/2:"right"===i&&(r=e.x+(this.getWidth()+s*this.scaleX)/2),"top"===n?o=e.y-(this.getHeight()+s*this.scaleY)/2:"bottom"===n&&(o=e.y+(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,n){var r,o,s=this.getCenterPoint(),a=this.stroke?this.strokeWidth:0;return i&&n?(r="left"===i?s.x-(this.getWidth()+a*this.scaleX)/2:"right"===i?s.x+(this.getWidth()+a*this.scaleX)/2:s.x,o="top"===n?s.y-(this.getHeight()+a*this.scaleY)/2:"bottom"===n?s.y+(this.getHeight()+a*this.scaleY)/2:s.y):(r=this.left,o=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),s,-t(this.angle)).subtractEquals(new fabric.Point(r,o))},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(e){var i=t(this.angle),n=this.getWidth()/2,r=Math.cos(i)*n,o=Math.sin(i)*n,s=this.getWidth(),a=Math.cos(i)*s,h=Math.sin(i)*s;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=r,this.top-=o):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=r,this.top+=o):"left"===this.originX&&"right"===e?(this.left+=a,this.top+=h):"right"===this.originX&&"left"===e&&(this.left-=a,this.top-=h),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","center")}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var i=this.oCoords,n=new fabric.Point(i.tl.x,i.tl.y),r=new fabric.Point(i.tr.x,i.tr.y),o=new fabric.Point(i.bl.x,i.bl.y),s=new fabric.Point(i.br.x,i.br.y),a=fabric.Intersection.intersectPolygonRectangle([n,r,s,o],t,e);return"Intersection"===a.status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var i=e(this.oCoords),n=e(t.oCoords),r=fabric.Intersection.intersectPolygonPolygon([i.tl,i.tr,i.br,i.bl],[n.tl,n.tr,n.br,n.bl]);return"Intersection"===r.status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),i=new fabric.Point(e.left,e.top),n=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(i,n)},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t){var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2===1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,r,o,s,a,h,l=0;for(var c in e)if(h=e[c],!(h.o.y<t.y&&h.d.y<t.y||h.o.y>=t.y&&h.d.y>=t.y||(h.o.x===h.d.x&&h.o.x>=t.x?(s=h.o.x,a=t.y):(i=0,n=(h.d.y-h.o.y)/(h.d.x-h.o.x),r=t.y-i*t.x,o=h.o.y-n*h.o.x,s=-(r-o)/(i-n),a=r+i*s),s>=t.x&&(l+=1),2!==l)))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),i=fabric.util.array.max(t),n=Math.abs(e-i),r=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],o=fabric.util.array.min(r),s=fabric.util.array.max(r),a=Math.abs(o-s);return{left:e,top:o,width:n,height:a}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?0>t?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),0>t&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRectWidth()/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRectHeight()/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var e=t(this.angle),i=this.getViewportTransform(),n=function(t){return fabric.util.transformPoint(t,i)},r=this._calculateCurrentDimensions(!1),o=r.x,s=r.y;0>o&&(o=Math.abs(o));var a=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2)),h=Math.atan(isFinite(s/o)?s/o:0),l=Math.cos(h+e)*a,c=Math.sin(h+e)*a,u=Math.sin(e),f=Math.cos(e),d=this.getCenterPoint(),p=new fabric.Point(o,s),g=new fabric.Point(d.x-l,d.y-c),v=new fabric.Point(g.x+p.x*f,g.y+p.x*u),m=n(new fabric.Point(g.x-p.y*u,g.y+p.y*f)),y=n(new fabric.Point(v.x-p.y*u,v.y+p.y*f)),b=n(g),_=n(v),x=new fabric.Point((b.x+m.x)/2,(b.y+m.y)/2),w=new fabric.Point((_.x+b.x)/2,(_.y+b.y)/2),C=new fabric.Point((y.x+_.x)/2,(y.y+_.y)/2),S=new fabric.Point((y.x+m.x)/2,(y.y+m.y)/2),T=new fabric.Point(w.x+u*this.rotatingPointOffset,w.y-f*this.rotatingPointOffset);return this.oCoords={tl:b,tr:_,br:y,bl:m,ml:x,mt:w,mr:C,mb:S,mtr:T},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.fillRule,i=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",h="undefined"!=typeof this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",c=this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":"";return["stroke: ",i,"; ","stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",a,"; ","fill: ",t,"; ","fill-rule: ",e,"; ","opacity: ",h,";",c,l].join("")},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],n=fabric.util.transformPoint(this.getCenterPoint(),i),r=fabric.Object.NUM_FRACTION_DIGITS,o="path-group"===this.type?"":"translate("+t(n.x,r)+" "+t(n.y,r)+")",s=0!==e?" rotate("+t(e,r)+")":"",a=1===this.scaleX&&1===this.scaleY&&1===i[0]&&1===i[3]?"":" scale("+t(this.scaleX*i[0],r)+" "+t(this.scaleY*i[3],r)+")",h="path-group"===this.type?this.width*i[0]:0,l=this.flipX?" matrix(-1 0 0 1 "+h+" 0) ":"",c="path-group"===this.type?this.height*i[3]:0,u=this.flipY?" matrix(1 0 0 -1 0 "+c+")":"";return[o,s,a,l,u].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,n=t.x,r=t.y;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(i=this._getImageLines(this.oCoords[o].corner),e=this._findCrossPoints({x:n,y:r},i),0!==e&&e%2===1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,i,n=this.oCoords,r=t(45-this.angle),o=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,s=o*Math.cos(r),a=o*Math.sin(r);for(var h in n)e=n[h].x,i=n[h].y,n[h].corner={tl:{x:e-a,y:i-s},tr:{x:e+s,y:i-a},bl:{x:e-s,y:i+a},br:{x:e+a,y:i+s}}},_calculateCurrentDimensions:function(t){var e=this.getViewportTransform(),i=this.strokeWidth,n=this.width,r=this.height,o="round"===this.strokeLineCap||"square"===this.strokeLineCap,s="line"===this.type&&0===this.width,a="line"===this.type&&0===this.height,h=s||a,l=o&&a||!h,c=o&&s||!h;return s?n=i:a&&(r=i),l&&(n+=0>n?-i:i),c&&(r+=0>r?-i:i),n=n*this.scaleX+2*this.padding,r=r*this.scaleY+2*this.padding,t?fabric.util.transformPoint(new fabric.Point(n,r),e,!0):{x:n,y:r}},drawBorders:function(t){if(!this.hasBorders)return this;t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor,t.lineWidth=1/this.borderScaleFactor;var e=this._calculateCurrentDimensions(!0),i=e.x,n=e.y;if(this.group&&(i*=this.group.scaleX,n*=this.group.scaleY),t.strokeRect(~~-(i/2)-.5,~~-(n/2)-.5,~~i+1,~~n+1),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var r=-n/2;t.beginPath(),t.moveTo(0,r),t.lineTo(0,r-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(!0),i=e.x,n=e.y,r=-(i/2),o=-(n/2),s=this.cornerSize/2,a=this.transparentCorners?"strokeRect":"fillRect";return t.save(),t.lineWidth=1,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,this._drawControl("tl",t,a,r-s,o-s),this._drawControl("tr",t,a,r+i-s,o-s),this._drawControl("bl",t,a,r-s,o+n-s),this._drawControl("br",t,a,r+i-s,o+n-s),this.get("lockUniScaling")||(this._drawControl("mt",t,a,r+i/2-s,o-s),this._drawControl("mb",t,a,r+i/2-s,o+n-s),this._drawControl("mr",t,a,r+i-s,o+n/2-s),this._drawControl("ml",t,a,r-s,o+n/2-s)),this.hasRotatingPoint&&this._drawControl("mtr",t,a,r+i/2-s,o-this.rotatingPointOffset-s),t.restore(),this},_drawControl:function(t,i,n,r,o){if(this.isControlVisible(t)){var s=this.cornerSize;e()||this.transparentCorners||i.clearRect(r,o,s,s),i[n](r,o,s,s)}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.renderAll(),r()},onComplete:function(){o.remove(t),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;r>n;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var r,o=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(r=t.split("."));var s=r?this.get(r[0])[r[1]]:this.get(t);"from"in i||(i.from=s),e=~e.indexOf("=")?s+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){
return i.abort.call(o)},onChange:function(e){r?o[r[0]][r[1]]=e:o.set(t,e),n||i.onChange&&i.onChange()},onComplete:function(){n||(o.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,n=t.axis1,r=t.axis2,o=t.dimension,s=e.nearest,a=e.center,h=e.farthest;return function(){switch(this.get(i)){case s:return Math.min(this.get(n),this.get(r));case a:return Math.min(this.get(n),this.get(r))+.5*this.get(o);case h:return Math.max(this.get(n),this.get(r))}}}var i=t.fabric||(t.fabric={}),n=i.util.object.extend,r={x1:1,x2:1,y1:1,y2:1},o=i.StaticCanvas.supports("setLineDash");return i.Line?void i.warn("fabric.Line is already defined"):(i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!=typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint();t.translate(i.x-this.strokeWidth/2,i.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&o){var n=this.calcLinePoints();t.moveTo(n.x1,n.y1),t.lineTo(n.x2,n.y2)}t.lineWidth=this.strokeWidth;var r=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5,r=t*this.width*-.5,o=e*this.height*-.5;return{x1:i,x2:r,y1:n,y2:o}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){var r=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),o=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];return new i.Line(o,n(r,e))},void(i.Line.fromObject=function(t){var e=[t.x1,t.y1,t.x2,t.y2];return new i.Line(e,t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),n=Math.PI,r=i.util.object.extend;return i.Circle?void i.warn("fabric.Circle is already defined."):(i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return r(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,r=0,o=(this.endAngle-this.startAngle)%(2*n);if(0===o)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,r=this.top+this.radius),e.push("<circle ",'cx="'+i+'" cy="'+r+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var s=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,h=Math.cos(this.endAngle)*this.radius,l=Math.sin(this.endAngle)*this.radius,c=o>n?"1":"0";e.push('<path d="M '+s+" "+a," A "+this.radius+" "+this.radius," 0 ",+c+" 1"," "+h+" "+l,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){n||(n={});var o=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=o.left||0,o.top=o.top||0;var s=new i.Circle(r(o,n));return s.left-=s.radius,s.top-=s.radius,s},void(i.Circle.fromObject=function(t){return new i.Circle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Triangle?void e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,n=this.height/2,r=[-i+" "+n,"0 "+-n,i+" "+n].join(",");return e.push("<polygon ",'points="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),void(e.Triangle.fromObject=function(t){return new e.Triangle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,n=e.util.object.extend;return e.Ellipse?void e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return n(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,n=this.top+this.ry),e.push("<ellipse ",'cx="',i,'" cy="',n,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0;var o=new e.Ellipse(n(r,i));return o.top-=o.ry,o.left-=o.rx,o},void(e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void console.warn("fabric.Rect is already defined");var n=e.Object.prototype.stateProperties.concat();n.push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:n,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(0,0,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,o=this.height,s=e?this.left:-this.width/2,a=e?this.top:-this.height/2,h=0!==i||0!==n,l=.4477152502;t.beginPath(),t.moveTo(s+i,a),t.lineTo(s+r-i,a),h&&t.bezierCurveTo(s+r-l*i,a,s+r,a+l*n,s+r,a+n),t.lineTo(s+r,a+o-n),h&&t.bezierCurveTo(s+r,a+o-l*n,s+r-l*i,a+o,s+r-i,a+o),t.lineTo(s+i,a+o),h&&t.bezierCurveTo(s+l*i,a+o,s,a+o-l*n,s,a+o-n),t.lineTo(s,a+n),h&&t.bezierCurveTo(s,a+l*n,s+l*i,a,s+i,a),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,n=-this.height/2,r=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,i,n,i+r,n,this.strokeDashArray),e.util.drawDashedLine(t,i+r,n,i+r,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i+r,n+o,i,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i,n+o,i,n,this.strokeDashArray),t.closePath()},toObject:function(t){var e=i(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,n=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,n=-this.height/2),e.push("<rect ",'x="',i,'" y="',n,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n){if(!t)return null;n=n||{};var r=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0;var o=new e.Rect(i(n?e.util.object.clone(n):{},r));return o.visible=o.width>0&&o.height>0,o},e.Rect.fromObject=function(t){return new e.Rect(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Polyline?void e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,i){return e.Polygon.prototype.initialize.call(this,t,i)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return e.Polygon.prototype._applyPointOffset.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t){e.Polygon.prototype.commonRender.call(this,t)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var r=0,o=this.points.length;o>r;r++)i=this.points[r],n=this.points[r+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var n=e.parsePointsAttribute(t.getAttribute("points")),r=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(n,e.util.object.extend(r,i))},void(e.Polyline.fromObject=function(t){var i=t.points;return new e.Polyline(i,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;return e.Polygon?void e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX)},_calcDimensions:function(){var t=this.points,e=n(t,"x"),i=n(t,"y"),o=r(t,"x"),s=r(t,"y");this.width=o-e||0,this.height=s-i||0,this.minX=e||0,this.minY=i||0},_applyPointOffset:function(){this.points.forEach(function(t){t.x-=this.minX+this.width/2,t.y-=this.minY+this.height/2},this)},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n=0,r=this.points.length;r>n;n++)e.push(o(this.points[n].x,2),",",o(this.points[n].y,2)," ");return i.push("<",this.type," ",'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(i.join("")):i.join("")},_render:function(t){this.commonRender(t)&&(this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t)))},commonRender:function(t){var e,i=this.points.length;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),t.moveTo(this.points[0].x,this.points[0].y);for(var n=0;i>n;n++)e=this.points[n],t.lineTo(e.x,e.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,n){if(!t)return null;n||(n={});var r=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(r,i(o,n))},void(e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,r=e.util.object.extend,o=Object.prototype.toString,s=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};return e.Path?void e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw new Error("`path` argument is required");var i="[object Array]"===o.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(){var t=this._parseDimensions();this.minX=t.left,this.minY=t.top,this.width=t.width,this.height=t.height,t.left+="center"===this.originX?this.width/2:"right"===this.originX?this.width:0,t.top+="center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0,this.top=this.top||t.top,this.left=this.left||t.left,this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,i,n,r=null,o=0,a=0,h=0,l=0,c=0,u=0,f=-this.pathOffset.x,d=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=0,d=0),t.beginPath();for(var p=0,g=this.path.length;g>p;++p){switch(e=this.path[p],e[0]){case"l":h+=e[1],l+=e[2],t.lineTo(h+f,l+d);break;case"L":h=e[1],l=e[2],t.lineTo(h+f,l+d);break;case"h":h+=e[1],t.lineTo(h+f,l+d);break;case"H":h=e[1],t.lineTo(h+f,l+d);break;case"v":l+=e[1],t.lineTo(h+f,l+d);break;case"V":l=e[1],t.lineTo(h+f,l+d);break;case"m":h+=e[1],l+=e[2],o=h,a=l,t.moveTo(h+f,l+d);break;case"M":h=e[1],l=e[2],o=h,a=l,t.moveTo(h+f,l+d);break;case"c":i=h+e[5],n=l+e[6],c=h+e[3],u=l+e[4],t.bezierCurveTo(h+e[1]+f,l+e[2]+d,c+f,u+d,i+f,n+d),h=i,l=n;break;case"C":h=e[5],l=e[6],c=e[3],u=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,c+f,u+d,h+f,l+d);break;case"s":i=h+e[3],n=l+e[4],null===r[0].match(/[CcSs]/)?(c=h,u=l):(c=2*h-c,u=2*l-u),t.bezierCurveTo(c+f,u+d,h+e[1]+f,l+e[2]+d,i+f,n+d),c=h+e[1],u=l+e[2],h=i,l=n;break;case"S":i=e[3],n=e[4],null===r[0].match(/[CcSs]/)?(c=h,u=l):(c=2*h-c,u=2*l-u),t.bezierCurveTo(c+f,u+d,e[1]+f,e[2]+d,i+f,n+d),h=i,l=n,c=e[1],u=e[2];break;case"q":i=h+e[3],n=l+e[4],c=h+e[1],u=l+e[2],t.quadraticCurveTo(c+f,u+d,i+f,n+d),h=i,l=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,i+f,n+d),h=i,l=n,c=e[1],u=e[2];break;case"t":i=h+e[1],n=l+e[2],null===r[0].match(/[QqTt]/)?(c=h,u=l):(c=2*h-c,u=2*l-u),t.quadraticCurveTo(c+f,u+d,i+f,n+d),h=i,l=n;break;case"T":i=e[1],n=e[2],null===r[0].match(/[QqTt]/)?(c=h,u=l):(c=2*h-c,u=2*l-u),t.quadraticCurveTo(c+f,u+d,i+f,n+d),h=i,l=n;break;case"a":s(t,h+f,l+d,[e[1],e[2],e[3],e[4],e[5],e[6]+h+f,e[7]+l+d]),h+=e[6],l+=e[7];break;case"A":s(t,h+f,l+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),h=e[6],l=e[7];break;case"z":case"Z":h=o,l=a,t.closePath()}r=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n="",r=0,o=this.path.length;o>r;r++)e.push(this.path[r].join(" "));var s=e.join(" ");return this.group&&"path-group"===this.group.type||(n=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",'d="',s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),n,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,r,o=[],s=[],l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,c=0,u=this.path.length;u>c;c++){for(t=this.path[c],n=t.slice(1).trim(),s.length=0;i=l.exec(n);)s.push(i[0]);r=[t.charAt(0)];for(var f=0,d=s.length;d>f;f++)e=parseFloat(s[f]),isNaN(e)||r.push(e);var p=r[0],g=a[p.toLowerCase()],v=h[p]||p;if(r.length-1>g)for(var m=1,y=r.length;y>m;m+=g)o.push([p].concat(r.slice(m,m+g))),p=v;else o.push(r)}return o},_parseDimensions:function(){for(var t,r,o,s,a=[],h=[],l=null,c=0,u=0,f=0,d=0,p=0,g=0,v=0,m=this.path.length;m>v;++v){switch(t=this.path[v],t[0]){case"l":f+=t[1],d+=t[2],s=[];break;case"L":f=t[1],d=t[2],s=[];break;case"h":f+=t[1],s=[];break;case"H":f=t[1],s=[];break;case"v":d+=t[1],s=[];break;case"V":d=t[1],s=[];break;case"m":f+=t[1],d+=t[2],c=f,u=d,s=[];break;case"M":f=t[1],d=t[2],c=f,u=d,s=[];break;case"c":r=f+t[5],o=d+t[6],p=f+t[3],g=d+t[4],s=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],p,g,r,o),f=r,d=o;break;case"C":f=t[5],d=t[6],p=t[3],g=t[4],s=e.util.getBoundsOfCurve(f,d,t[1],t[2],p,g,f,d);break;case"s":r=f+t[3],o=d+t[4],null===l[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,f+t[1],d+t[2],r,o),p=f+t[1],g=d+t[2],f=r,d=o;break;case"S":r=t[3],o=t[4],null===l[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,t[1],t[2],r,o),f=r,d=o,p=t[1],g=t[2];break;case"q":r=f+t[3],o=d+t[4],p=f+t[1],g=d+t[2],s=e.util.getBoundsOfCurve(f,d,p,g,p,g,r,o),f=r,d=o;break;case"Q":p=t[1],g=t[2],s=e.util.getBoundsOfCurve(f,d,p,g,p,g,t[3],t[4]),f=t[3],d=t[4];break;case"t":r=f+t[1],o=d+t[2],null===l[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,p,g,r,o),f=r,d=o;break;case"T":r=t[1],o=t[2],null===l[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,p,g,r,o),f=r,d=o;break;case"a":s=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":s=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=c,d=u}l=t,s.forEach(function(t){a.push(t.x),h.push(t.y)}),a.push(f),h.push(d)}var y=i(a),b=i(h),_=n(a),x=n(h),w=_-y,C=x-b,S={left:y,top:b,width:w,height:C};return S}}),e.Path.fromObject=function(t,i){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(n){var r=n[0],o=t.path;delete t.path,e.util.object.extend(r,t),r.setSourcePath(o),i(r)}):i(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(o.d,r(o,n)))},void(e.Path.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.invoke,r=e.Object.prototype.toObject;return e.PathGroup?void e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var i,n,r,o,s,a=[],h=[],l=this.transformMatrix,c=this.paths.length;c--;){r=this.paths[c],o=r.height+r.strokeWidth,s=r.width+r.strokeWidth,i=[{x:r.left,y:r.top},{x:r.left+s,y:r.top},{x:r.left,y:r.top+o},{x:r.left+s,y:r.top+o}];for(var u=0;u<i.length;u++)n=i[u],l&&(n=e.util.transformPoint(n,l,!1)),a.push(n.x),h.push(n.y)}t.width=Math.max.apply(null,a),t.height=Math.max.apply(null,h)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var i=0,n=this.paths.length;n>i;++i)this.paths[i].render(t,!0);this.clipTo&&t.restore(),this._removeShadow(t),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=i(r.call(this,t),{paths:n(this.getObjects(),"toObject",t)});return this.sourcePath&&(e.sourcePath=this.sourcePath),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){for(var e=this.getObjects(),i=this.getPointByOrigin("left","top"),n="translate("+i.x+" "+i.y+")",r=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n"],o=0,s=e.length;s>o;o++)r.push(e[o].toSVG(t));return r.push("</g>\n"),t?t(r.join("")):r.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(e){return(e.get("fill")||"").toLowerCase()===t})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(n){var r=t.paths;delete t.paths;var o=e.util.groupSVGElements(n,t,r);i(o)}):e.util.enlivenObjects(t.paths,function(n){delete t.paths,i(new e.PathGroup(n,t))})},void(e.PathGroup.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,o=e.util.array.invoke;if(!e.Group){var s={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;this.originalState={},this.callSuper("initialize"),e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(t){var e=t.getLeft(),i=t.getTop(),n=this.getCenterPoint();t.set({originalLeft:e,originalTop:i,left:e-n.x,top:i-n.y}),t.setCoords(),t.__origHasControls=t.hasControls,t.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),t&&(this._objects.push(t),t.group=this),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._moveFlippedObject(t),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties)for(var i=this._objects.length;i--;)this._objects[i].set(t,e);this.callSuper("_set",t,e)},toObject:function(t){return i(this.callSuper("toObject",t),{objects:o(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.clipTo&&e.util.clipContext(this,t),this.transform(t);for(var i=0,n=this._objects.length;n>i;i++)this._renderObject(this._objects[i],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var i=0,n=this._objects.length;n>i;i++)this._objects[i]._renderControls(t)},_renderObject:function(t,e){var i=t.hasRotatingPoint;t.visible&&(t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i)},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){return this._moveFlippedObject(t),this._setObjectPosition(t),t},_moveFlippedObject:function(t){var e=t.get("originX"),i=t.get("originY"),n=t.getCenterPoint();t.set({originX:"center",originY:"center",left:n.x,top:n.y}),this._toggleFlipping(t);var r=t.getPointByOrigin(e,i);return t.set({originX:e,originY:i,left:r.x,top:r.y}),this},_toggleFlipping:function(t){this.flipX&&(t.toggle("flipX"),t.set("left",-t.get("left")),t.setAngle(-t.getAngle())),this.flipY&&(t.toggle("flipY"),t.set("top",-t.get("top")),t.setAngle(-t.getAngle()))},_restoreObjectState:function(t){return this._setObjectPosition(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},_setObjectPosition:function(t){var e=this.getCenterPoint(),i=this._getRotatedLeftTop(t);t.set({angle:t.getAngle()+this.getAngle(),left:e.x+i.left,top:e.y+i.top,scaleX:t.get("scaleX")*this.get("scaleX"),scaleY:t.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(t){var e=this.getAngle()*(Math.PI/180);return{left:-Math.sin(e)*t.getTop()*this.get("scaleY")+Math.cos(e)*t.getLeft()*this.get("scaleX"),top:Math.cos(e)*t.getTop()*this.get("scaleY")+Math.sin(e)*t.getLeft()*this.get("scaleX")}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,i,n=[],r=[],o=["tr","br","bl","tl"],s=0,a=this._objects.length;a>s;++s){e=this._objects[s],e.setCoords();for(var h=0;h<o.length;h++)i=o[h],n.push(e.oCoords[i].x),r.push(e.oCoords[i].y)}this.set(this._getBounds(n,r,t))},_getBounds:function(t,i,o){var s=e.util.invertTransform(this.getViewportTransform()),a=e.util.transformPoint(new e.Point(n(t),n(i)),s),h=e.util.transformPoint(new e.Point(r(t),r(i)),s),l={width:h.x-a.x||0,height:h.y-a.y||0};return o||(l.left=a.x||0,l.top=a.y||0,"center"===this.originX&&(l.left+=l.width/2),"right"===this.originX&&(l.left+=l.width),"center"===this.originY&&(l.top+=l.height/2),"bottom"===this.originY&&(l.top+=l.height)),l},toSVG:function(t){for(var e=["<g ",'transform="',this.getSvgTransform(),'">\n'],i=0,n=this._objects.length;n>i;i++)e.push(this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in s){if(this[t])return this[t];for(var e=0,i=this._objects.length;i>e;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(n){delete t.objects,i&&i(new e.Group(n,t))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;return t.fabric||(t.fabric={}),t.fabric.Image?void fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e),this._initConfig(e),e.filters&&(this.filters=e.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(t,e,i){return this._element=t,this._originalElement=t,this._initConfig(i),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){t.save(),this._setStrokeStyles(t),t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){return e(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()}),crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice})},toSVG:function(t){var e=[],i=-this.width/2,n=-this.height/2,r="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,n=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(r="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',i,'" y="',n,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',r,'"',"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){return this.getElement()?this.getElement().src||this.getElement()._src:void 0;
},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,i,n){if(e=e||this.filters,i=i||this._originalElement){var r=i,o=fabric.util.createCanvasElement(),s=fabric.util.createImage(),a=this;return o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0,r.width,r.height),0===e.length?(this._element=i,t&&t(),o):(e.forEach(function(t){t&&t.applyTo(o,t.scaleX||a.scaleX,t.scaleY||a.scaleY),!n&&t&&"Resize"===t.type&&(a.width*=t.scaleX,a.height*=t.scaleY)}),s.width=o.width,s.height=o.height,fabric.isLikelyNode?(s.src=o.toBuffer(void 0,fabric.Image.pngCompression),a._element=s,!n&&(a._filteredEl=s),t&&t()):(s.onload=function(){a._element=s,!n&&(a._filteredEl=s),t&&t(),s.onload=o=r=null},s.src=o.toDataURL("image/png")),o)}},_render:function(t,e){var i,n,r,o=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),this.isMoving===!1&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,r=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):r=this._element,r&&t.drawImage(r,i+o.marginX,n+o.marginY,o.width,o.height),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,n=this.height,r=0,o=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,n=this._element.height*e,"Mid"===this.alignX&&(r=(this.width-i)/2),"Max"===this.alignX&&(r=this.width-i),"Mid"===this.alignY&&(o=(this.height-n)/2),"Max"===this.alignY&&(o=this.height-n)),{width:i,height:n,marginX:r,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t.filters&&t.filters.length?fabric.util.enlivenObjects(t.filters,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){fabric.Image.prototype._initFilters.call(t,t,function(n){t.filters=n||[];var r=new fabric.Image(i,t);e&&e(r)})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,i,n){var r,o,s,a=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES),h="xMidYMid",l="meet";a.preserveAspectRatio&&(s=a.preserveAspectRatio.split(" ")),s&&s.length&&(l=s.pop(),"meet"!==l&&"slice"!==l?(h=l,l="meet"):s.length&&(h=s.pop())),r="none"!==h?h.slice(1,4):"none",o="none"!==h?h.slice(5,8):"none",a.alignX=r,a.alignY=o,a.meetOrSlice=l,fabric.Image.fromURL(a["xlink:href"],i,e(n?fabric.util.object.clone(n):{},a))},fabric.Image.async=!0,void(fabric.Image.pngCompression=1))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,n=t.onChange||e,r=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.setAngle(t),n()},onComplete:function(){r.setCoords(),i()},onStart:function(){r.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.brightness,o=0,s=n.length;s>o;o+=4)n[o]+=r,n[o+1]+=r,n[o+2]+=r;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0];var i=e.util.createCanvasElement();this.tmpCtx=i.getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){for(var e=this.matrix,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=Math.round(Math.sqrt(e.length)),o=Math.floor(r/2),s=n.data,a=n.width,h=n.height,l=a,c=h,u=this._createImageData(l,c),f=u.data,d=this.opaque?1:0,p=0;c>p;p++)for(var g=0;l>g;g++){for(var v=p,m=g,y=4*(p*l+g),b=0,_=0,x=0,w=0,C=0;r>C;C++)for(var S=0;r>S;S++){var T=v+C-o,O=m+S-o;if(!(0>T||T>h||0>O||O>a)){var E=4*(T*a+O),A=e[C*r+S];b+=s[E]*A,_+=s[E+1]*A,x+=s[E+2]*A,w+=s[E+3]*A}}f[y]=b,f[y+1]=_,f[y+2]=x,f[y+3]=w+d*(255-w)}i.putImageData(u,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.threshold,o=n.length,s=0,a=n.length;a>s;s+=4)n[s+3]=r+255*(o-s)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=n.width*n.height*4,s=0;o>s;)e=(r[s]+r[s+1]+r[s+2])/3,r[s]=e,r[s+1]=e,r[s+2]=e,s+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=r.length;for(e=0;o>e;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,s=this.mask.getElement(),a=e.util.createCanvasElement(),h=this.channel,l=r.width*r.height*4;a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0,s.width,s.height);var c=a.getContext("2d").getImageData(0,0,s.width,s.height),u=c.data;for(i=0;l>i;i+=4)o[i+3]=u[i+h];n.putImageData(r,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(n){t.mask=new e.Image(n,t.mask),i&&i(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=this.noise,s=0,a=r.length;a>s;s+=4)e=(.5-Math.random())*o,r[s]+=e,r[s+1]+=e,r[s+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,r,o,s,a,h=t.getContext("2d"),l=h.getImageData(0,0,t.width,t.height),c=l.data,u=l.height,f=l.width;for(i=0;u>i;i+=this.blocksize)for(n=0;f>n;n+=this.blocksize){e=4*i*f+4*n,r=c[e],o=c[e+1],s=c[e+2],a=c[e+3];for(var d=i,p=i+this.blocksize;p>d;d++)for(var g=n,v=n+this.blocksize;v>g;g++)e=4*d*f+4*g,c[e]=r,c[e+1]=o,c[e+2]=s,c[e+3]=a}h.putImageData(l,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),s=o.data,a=this.threshold,h=this.distance,l=255-a,c=Math.abs,u=0,f=s.length;f>u;u+=4)e=s[u],i=s[u+1],n=s[u+2],e>l&&i>l&&n>l&&c(e-i)<h&&c(e-n)<h&&c(i-n)<h&&(s[u+3]=1);r.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,s=o.length;for(e=0;s>e;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;n.putImageData(r,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,r,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),a=s.data,h=a.length;for(e=0;h>e;e+=4)i=a[e],n=a[e+1],r=a[e+2],a[e]=(.393*i+.769*n+.189*r)/1.351,a[e+1]=(.349*i+.686*n+.168*r)/1.203,a[e+2]=(.272*i+.534*n+.131*r)/2.14;o.putImageData(s,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity="undefined"!=typeof t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,n,r,o,s,a,h,l,c,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=f.data,p=d.length;for(c=new e.Color(this.color).getSource(),n=c[0]*this.opacity,r=c[1]*this.opacity,o=c[2]*this.opacity,l=1-this.opacity,i=0;p>i;i+=4)s=d[i],a=d[i+1],h=d[i+2],d[i]=n+s*l,d[i+1]=r+a*l,d[i+2]=o+h*l;u.putImageData(f,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,n,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),s=o.data,a=s.length;for(n=new e.Color(this.color).getSource(),i=0;a>i;i+=4)s[i]*=n[0]/255,s[i+1]*=n[1]/255,s[i+2]*=n[2]/255;r.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric;e.Image.filters.Blend=e.util.createClass({type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,n,r,o,s,a,h,l,c,u,f=t.getContext("2d"),d=f.getImageData(0,0,t.width,t.height),p=d.data,g=!1;if(this.image){g=!0;var v=e.util.createCanvasElement();v.width=this.image.width,v.height=this.image.height;var m=new e.StaticCanvas(v);m.add(this.image);var y=m.getContext("2d");u=y.getImageData(0,0,m.width,m.height).data}else u=new e.Color(this.color).getSource(),i=u[0]*this.alpha,n=u[1]*this.alpha,r=u[2]*this.alpha;for(var b=0,_=p.length;_>b;b+=4)switch(o=p[b],s=p[b+1],a=p[b+2],g&&(i=u[b]*this.alpha,n=u[b+1]*this.alpha,r=u[b+2]*this.alpha),this.mode){case"multiply":p[b]=o*i/255,p[b+1]=s*n/255,p[b+2]=a*r/255;break;case"screen":p[b]=1-(1-o)*(1-i),p[b+1]=1-(1-s)*(1-n),p[b+2]=1-(1-a)*(1-r);break;case"add":p[b]=Math.min(255,o+i),p[b+1]=Math.min(255,s+n),p[b+2]=Math.min(255,a+r);break;case"diff":case"difference":p[b]=Math.abs(o-i),p[b+1]=Math.abs(s-n),p[b+2]=Math.abs(a-r);break;case"subtract":h=o-i,l=s-n,c=a-r,p[b]=0>h?0:h,p[b+1]=0>l?0:l,p[b+2]=0>c?0:c;break;case"darken":p[b]=Math.min(o,i),p[b+1]=Math.min(s,n),p[b+2]=Math.min(a,r);break;case"lighten":p[b]=Math.max(o,i),p[b+1]=Math.max(s,n),p[b+2]=Math.max(a,r)}f.putImageData(d,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,r=Math.sqrt,o=Math.abs,s=Math.max,a=Math.round,h=Math.sin,l=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var n,r=t.width,o=t.height,s=a(r*e),h=a(o*i);"sliceHack"===this.resizeType&&(n=this.sliceByTwo(t,r,o,s,h)),"hermite"===this.resizeType&&(n=this.hermiteFastResize(t,r,o,s,h)),"bilinear"===this.resizeType&&(n=this.bilinearFiltering(t,r,o,s,h)),"lanczos"===this.resizeType&&(n=this.lanczosResize(t,r,o,s,h)),t.width=s,t.height=h,t.getContext("2d").putImageData(n,0,0)},sliceByTwo:function(t,i,r,o,a){var h,l=t.getContext("2d"),c=.5,u=.5,f=1,d=1,p=!1,g=!1,v=i,m=r,y=e.util.createCanvasElement(),b=y.getContext("2d");for(o=n(o),a=n(a),y.width=s(o,i),y.height=s(a,r),o>i&&(c=2,f=-1),a>r&&(u=2,d=-1),h=l.getImageData(0,0,i,r),t.width=s(o,i),t.height=s(a,r),l.putImageData(h,0,0);!p||!g;)i=v,r=m,o*f<n(v*c*f)?v=n(v*c):(v=o,p=!0),a*d<n(m*u*d)?m=n(m*u):(m=a,g=!0),h=l.getImageData(0,0,i,r),b.putImageData(h,0,0),l.clearRect(0,0,v,m),l.drawImage(y,0,0,i,r,0,0,v,m);return l.getImageData(0,0,o,a)},lanczosResize:function(t,e,s,a,c){function u(t){return function(e){if(e>t)return 0;if(e*=Math.PI,o(e)<1e-16)return 1;var i=e/t;return h(e)*h(i)/e/i}}function f(t){var h,l,u,d,p,A,k,j,I,M,P;for(O.x=(t+.5)*b,E.x=n(O.x),h=0;c>h;h++){for(O.y=(h+.5)*_,E.y=n(O.y),p=0,A=0,k=0,j=0,I=0,l=E.x-C;l<=E.x+C;l++)if(!(0>l||l>=e)){M=n(1e3*o(l-O.x)),T[M]||(T[M]={});for(var D=E.y-S;D<=E.y+S;D++)0>D||D>=s||(P=n(1e3*o(D-O.y)),T[M][P]||(T[M][P]=y(r(i(M*x,2)+i(P*w,2))/1e3)),u=T[M][P],u>0&&(d=4*(D*e+l),p+=u,A+=u*v[d],k+=u*v[d+1],j+=u*v[d+2],I+=u*v[d+3]))}d=4*(h*a+t),m[d]=A/p,m[d+1]=k/p,m[d+2]=j/p,m[d+3]=I/p}return++t<a?f(t):g}var d=t.getContext("2d"),p=d.getImageData(0,0,e,s),g=d.getImageData(0,0,a,c),v=p.data,m=g.data,y=u(this.lanczosLobes),b=this.rcpScaleX,_=this.rcpScaleY,x=2/this.rcpScaleX,w=2/this.rcpScaleY,C=l(b*this.lanczosLobes/2),S=l(_*this.lanczosLobes/2),T={},O={},E={};return f(0)},bilinearFiltering:function(t,e,i,r,o){var s,a,h,l,c,u,f,d,p,g,v,m,y,b=0,_=this.rcpScaleX,x=this.rcpScaleY,w=t.getContext("2d"),C=4*(e-1),S=w.getImageData(0,0,e,i),T=S.data,O=w.getImageData(0,0,r,o),E=O.data;for(f=0;o>f;f++)for(d=0;r>d;d++)for(c=n(_*d),u=n(x*f),p=_*d-c,g=x*f-u,y=4*(u*e+c),v=0;4>v;v++)s=T[y+v],a=T[y+4+v],h=T[y+C+v],l=T[y+C+4+v],m=s*(1-p)*(1-g)+a*p*(1-g)+h*g*(1-p)+l*p*g,E[b++]=m;return O},hermiteFastResize:function(t,e,i,s,a){for(var h=this.rcpScaleX,c=this.rcpScaleY,u=l(h/2),f=l(c/2),d=t.getContext("2d"),p=d.getImageData(0,0,e,i),g=p.data,v=d.getImageData(0,0,s,a),m=v.data,y=0;a>y;y++)for(var b=0;s>b;b++){for(var _=4*(b+y*s),x=0,w=0,C=0,S=0,T=0,O=0,E=0,A=(y+.5)*c,k=n(y*c);(y+1)*c>k;k++)for(var j=o(A-(k+.5))/f,I=(b+.5)*h,M=j*j,P=n(b*h);(b+1)*h>P;P++){var D=o(I-(P+.5))/u,L=r(M+D*D);L>1&&-1>L||(x=2*L*L*L-3*L*L+1,x>0&&(D=4*(P+k*e),E+=x*g[D+3],C+=x,g[D+3]<255&&(x=x*g[D+3]/250),S+=x*g[D],T+=x*g[D+1],O+=x*g[D+2],w+=x))}m[_]=S/w,m[_+1]=T/w,m[_+2]=O/w,m[_+3]=E/C}return v},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaley:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(){return new e.Image.filters.Resize}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,o=e.StaticCanvas.supports("setLineDash");if(e.Text)return void e.warn("fabric.Text is already defined");var s=e.Object.prototype.stateProperties.concat();s.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:s,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){if(!this.__skipDimension){t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this.text.split(this._reNewline),this._clearCache();var i=this.textAlign;this.textAlign="left",this.width=this._getTextWidth(t),this.textAlign=i,this.height=this._getTextHeight(t)}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._renderTextBackground(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){t.save(),this._translateForTextAlign(t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextFill(t),this._renderTextStroke(t),this._restoreCompositeOperation(t),this._removeShadow(t),t.restore()},_translateForTextAlign:function(t){"left"!==this.textAlign&&"justify"!==this.textAlign&&t.translate("center"===this.textAlign?this.width/2:this.width,0)},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._textLines.length*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,n=this._textLines.length;n>i;i++){var r=this._getLineWidth(t,i);r>e&&(e=r)}return e},_renderChars:function(t,e,i,n,r){e[t](i,n,r)},_renderTextLine:function(t,e,i,n,r,o){if(r-=this.fontSize*this._fontSizeFraction,"justify"!==this.textAlign)return void this._renderChars(t,e,i,n,r,o);var s=this._getLineWidth(e,o),a=this.width;if(a>=s)for(var h=i.split(/\s+/),l=this._getWidthOfWords(e,i,o),c=a-l,u=h.length-1,f=c/u,d=0,p=0,g=h.length;g>p;p++)this._renderChars(t,e,h[p],n+d,r,o),d+=e.measureText(h[p]).width+f;else this._renderChars(t,e,i,n,r,o)},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(t){if(this.fill||this._skipFillStrokeCheck){for(var e=0,i=0,n=this._textLines.length;n>i;i++){var r=this._getHeightOfLine(t,i),o=r/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+o,i),e+=r}this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t)}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||this._skipFillStrokeCheck){var e=0;t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var i=0,n=this._textLines.length;n>i;i++){var r=this._getHeightOfLine(t,i),s=r/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+s,i),e+=r}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this._fontSizeMult*this.lineHeight},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t){var e=0,i=this._getHeightOfLine();if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var n=0,r=this._textLines.length;r>n;n++){if(""!==this._textLines[n]){var o=this._getLineWidth(t,n),s=this._getLineLeftOffset(o);t.fillRect(this._getLeftOffset()+s,this._getTopOffset()+e,o,this.fontSize*this._fontSizeMult)}e+=i}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__lineOffsets=[]},_shouldClearCache:function(){var t=!1;for(var e in this._dimensionAffectingProps)this["__"+e]!==this[e]&&(this["__"+e]=this[e],t=!0);return t},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=t.measureText(this._textLines[e]).width,this.__lineWidths[e])},_renderTextDecoration:function(t){function e(e){var r,o,s,a,h=0;for(r=0,o=n._textLines.length;o>r;r++){var l=n._getLineWidth(t,r),c=n._getLineLeftOffset(l),u=n._getHeightOfLine(t,r);for(s=0,a=e.length;a>s;s++)t.fillRect(n._getLeftOffset()+c,h+(n._fontSizeMult-1+e[s])*n.fontSize-i,l,n.fontSize/15);h+=u}}if(this.textDecoration){var i=this.height/2,n=this,r=[];this.textDecoration.indexOf("underline")>-1&&r.push(.85),this.textDecoration.indexOf("line-through")>-1&&r.push(.43),this.textDecoration.indexOf("overline")>-1&&r.push(-.12),r.length>0&&e(r)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),e||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},toObject:function(t){var e=i(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(this.ctx),n=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e,n),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0),i=-this.width/2,n=0;return{textLeft:i+(this.group&&"path-group"===this.group.type?this.left:0),textTop:n+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){t.push('	<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',e.textBgRects.join(""),"		<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" >',e.textSpans.join(""),"</text>\n","	</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],n=[],r=0;this._setSVGBg(n);for(var o=0,s=this._textLines.length;s>o;o++)this.textBackgroundColor&&this._setSVGTextLineBg(n,o,e,t,r),this._setSVGTextLineText(o,i,r,e,t,n),r+=this._getHeightOfLine(this.ctx,o);return{textSpans:i,textBgRects:n}},_setSVGTextLineText:function(t,i,n,o,s){var a=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-s+n-this.height/2;i.push('<tspan x="',r(o+this._getLineLeftOffset(this.__lineWidths[t]),4),'" ','y="',r(a,4),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>")},_setSVGTextLineBg:function(t,e,i,n,o){t.push("		<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',r(i+this._getLineLeftOffset(this.__lineWidths[e]),4),'" y="',r(o-this.height/2,4),'" width="',r(this.__lineWidths[e],4),'" height="',r(this._getHeightOfLine(this.ctx,e)/this.lineHeight,4),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,4),'" y="',r(-this.height/2,4),'" width="',r(this.width,4),'" height="',r(this.height,4),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var n=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},n),i.top=i.top||0,i.left=i.left||0,"dx"in n&&(i.left+=n.dx),"dy"in n&&(i.top+=n.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var r=t.textContent.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),o=new e.Text(r,i),s=0;return"left"===o.originX&&(s=o.getWidth()/2),"right"===o.originX&&(s=-o.getWidth()/2),o.set({left:o.getLeft()+s,top:o.getTop()-o.getHeight()/2+o.fontSize*(.18+o._fontSizeFraction)}),o},e.Text.fromObject=function(t){return new e.Text(t.text,n(t))},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_skipFillStrokeCheck:!1,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,_charWidthsCache:{},initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__maxFontHeights=[],this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var n in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this.selectionStart!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionStart=t),this._updateTextarea()},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this.selectionEnd!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionEnd=t),this._updateTextarea()},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],n=t;e>n;n++)i.push(this.getSelectionStyles(n));return i}var r=this.get2DCursorLocation(t);return this.styles[r.lineIndex]?this.styles[r.lineIndex][r.charIndex]||{}:{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._clearCache(),this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this.styles[i.lineIndex]||(this.styles[i.lineIndex]={}),this.styles[i.lineIndex][i.charIndex]||(this.styles[i.lineIndex][i.charIndex]={}),fabric.util.object.extend(this.styles[i.lineIndex][i.charIndex],e)},_render:function(t){this.callSuper("_render",t),this.ctx=t,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active){var t,e,i=this.text.split("");this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),
e.restore()}},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);var e=this.text.slice(0,t),i=e.split(this._reNewline);return{lineIndex:i.length-1,charIndex:i[i.length-1].length}},getCurrentCharStyle:function(t,e){var i=this.styles[t]&&this.styles[t][0===e?0:e-1];return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fontSize||this.fontSize},getCurrentCharColor:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fill||this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:r.left+r.lineLeft,topOffset:r.top}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,r=0,o=0,s=0,a=0;a<this.selectionStart;a++)"\n"===t[a]?(s=0,o+=this._getHeightOfLine(this.ctx,n),n++,r=0):(s+=this._getWidthOfChar(this.ctx,t[a],n,r),r++),i=this._getCachedLineOffset(n);return"cursor"===e&&(o+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,n)/this.lineHeight-this.getCurrentCharFontSize(n,r)*(1-this._fontSizeFraction)),{top:o,left:s,lineLeft:i}},_getCachedLineOffset:function(t){var e=this._getLineWidth(this.ctx,t);return this.__lineOffsets[t]||(this.__lineOffsets[t]=this._getLineLeftOffset(e))},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex,o=this.getCurrentCharFontSize(n,r),s=0===n&&0===r?this._getCachedLineOffset(n):t.leftOffset;e.fillStyle=this.getCurrentCharColor(n,r),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+s,t.top+t.topOffset,this.cursorWidth/this.scaleX,o)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var n=this.get2DCursorLocation(this.selectionStart),r=this.get2DCursorLocation(this.selectionEnd),o=n.lineIndex,s=r.lineIndex,a=o;s>=a;a++){var h=this._getCachedLineOffset(a)||0,l=this._getHeightOfLine(this.ctx,a),c=0,u=this._textLines[a];if(a===o)for(var f=0,d=u.length;d>f;f++)f>=n.charIndex&&(a!==s||f<r.charIndex)&&(c+=this._getWidthOfChar(i,u[f],a,f)),f<n.charIndex&&(h+=this._getWidthOfChar(i,u[f],a,f));else if(a>o&&s>a)c+=this._getLineWidth(i,a)||5;else if(a===s)for(var p=0,g=r.charIndex;g>p;p++)c+=this._getWidthOfChar(i,u[p],a,p);i.fillRect(e.left+h,e.top+e.topOffset,c,l),e.topOffset+=l}},_renderChars:function(t,e,i,n,r,o){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,n,r);this.skipTextAlign=!0,n-="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0;var s,a=this._getHeightOfLine(e,o),h=this._getCachedLineOffset(o),l=i.split(""),c="";n+=h||0,e.save(),r-=a/this.lineHeight*this._fontSizeFraction;for(var u=0,f=l.length;f>=u;u++){s=s||this.getCurrentCharStyle(o,u);var d=this.getCurrentCharStyle(o,u+1);(this._hasStyleChanged(s,d)||u===f)&&(this._renderChar(t,e,o,u-1,c,n,r,a),c="",s=d),c+=l[u]}e.restore()},_renderCharsFast:function(t,e,i,n,r){this.skipTextAlign=!1,"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,n,r),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,n,r)},_renderChar:function(t,e,i,n,r,o,s,a){var h,l,c,u=this._fontSizeFraction*a/this.lineHeight;if(this.styles&&this.styles[i]&&(h=this.styles[i][n])){var f=h.stroke||this.stroke,d=h.fill||this.fill;e.save(),l=this._applyCharStylesGetWidth(e,r,i,n,h),c=this._getHeightOfChar(e,r,i,n),d&&e.fillText(r,o,s),f&&e.strokeText(r,o,s),this._renderCharDecoration(e,h,o,s,u,l,c),e.restore(),e.translate(l,0)}else"strokeText"===t&&this.stroke&&e[t](r,o,s),"fillText"===t&&this.fill&&e[t](r,o,s),l=this._applyCharStylesGetWidth(e,r,i,n),this._renderCharDecoration(e,null,o,s,u,l,this.fontSize),e.translate(e.measureText(r).width,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,n,r,o,s){var a=e?e.textDecoration||this.textDecoration:this.textDecoration;a&&(a.indexOf("underline")>-1&&t.fillRect(i,n+s/10,o,s/15),a.indexOf("line-through")>-1&&t.fillRect(i,n-s*(this._fontSizeFraction+this._fontSizeMult-1)+s/15,o,s/15),a.indexOf("overline")>-1&&t.fillRect(i,n-(this._fontSizeMult-this._fontSizeFraction)*s,o,s/15))},_renderTextLine:function(t,e,i,n,r,o){this.isEmptyStyles()||(r+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,n,r,o)},_renderTextDecoration:function(t){return this.isEmptyStyles()?this.callSuper("_renderTextDecoration",t):void 0},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styles){t.save(),this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor);for(var e=0,i=0,n=this._textLines.length;n>i;i++){var r=this._getHeightOfLine(t,i);if(""!==this._textLines[i]){var o=this._getLineWidth(t,i),s=this._getCachedLineOffset(i);if(this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor,t.fillRect(this._getLeftOffset()+s,this._getTopOffset()+e,o,r/this.lineHeight)),this.styles[i])for(var a=0,h=this._textLines[i].length;h>a;a++)if(this.styles[i]&&this.styles[i][a]&&this.styles[i][a].textBackgroundColor){var l=this._textLines[i][a];t.fillStyle=this.styles[i][a].textBackgroundColor,t.fillRect(this._getLeftOffset()+s+this._getWidthOfCharsAt(t,i,a),this._getTopOffset()+e,this._getWidthOfChar(t,l,i,a)+1,r/this.lineHeight)}e+=r}else e+=r}t.restore()}},_getCacheProp:function(t,e){return t+e.fontFamily+e.fontSize+e.fontWeight+e.fontStyle+e.shadow},_applyCharStylesGetWidth:function(e,i,n,r,o){var s=o||this.styles[n]&&this.styles[n][r];s=s?t(s):{},this._applyFontStyles(s);var a=this._getCacheProp(i,s);if(this.isEmptyStyles()&&this._charWidthsCache[a]&&this.caching)return this._charWidthsCache[a];"string"==typeof s.shadow&&(s.shadow=new fabric.Shadow(s.shadow));var h=s.fill||this.fill;return e.fillStyle=h.toLive?h.toLive(e,this):h,s.stroke&&(e.strokeStyle=s.stroke&&s.stroke.toLive?s.stroke.toLive(e,this):s.stroke),e.lineWidth=s.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(s),this._setShadow.call(s,e),this.caching?(this._charWidthsCache[a]||(this._charWidthsCache[a]=e.measureText(i).width),this._charWidthsCache[a]):e.measureText(i).width},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i){return this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}},_getWidthOfChar:function(t,e,i,n){if("justify"===this.textAlign&&/\s/.test(e))return this._getWidthOfSpace(t,i);var r=this._getStyleDeclaration(i,n);this._applyFontStyles(r);var o=this._getCacheProp(e,r);if(this._charWidthsCache[o]&&this.caching)return this._charWidthsCache[o];if(t){t.save();var s=this._applyCharStylesGetWidth(t,e,i,n);return t.restore(),s}},_getHeightOfChar:function(t,e,i,n){return this.styles[i]&&this.styles[i][n]?this.styles[i][n].fontSize||this.fontSize:this.fontSize},_getHeightOfCharAt:function(t,e,i){var n=this._textLines[e][i];return this._getHeightOfChar(t,n,e,i)},_getWidthOfCharsAt:function(t,e,i){var n,r,o=0;for(n=0;i>n;n++)r=this._textLines[e][n],o+=this._getWidthOfChar(t,r,e,n);return o},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=this._getWidthOfCharsAt(t,e,this._textLines[e].length),this.__lineWidths[e])},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],n=this._getWidthOfWords(t,i,e),r=this.width-n,o=i.length-i.replace(/\s+/g,"").length,s=r/o;return this.__widthOfSpace[e]=s,s},_getWidthOfWords:function(t,e,i){for(var n=0,r=0;r<e.length;r++){var o=e[r];o.match(/\s/)||(n+=this._getWidthOfChar(t,o,i,r))}return n},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],n=this._getHeightOfChar(t,i[0],e,0),r=1,o=i.length;o>r;r++){var s=this._getHeightOfChar(t,i[r],e,r);s>n&&(n=s)}return this.__maxFontHeights[e]=n,this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e=0,i=0,n=this._textLines.length;n>i;i++)e+=this._getHeightOfLine(t,i);return e},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles)})}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,t(e))}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",function(){var t=this;setTimeout(function(){t.selected=!0},100)})},initAddedHandler:function(){var t=this;this.on("added",function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers()),t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],t.canvas._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],fabric.util.removeFromArray(t.canvas._iTextInstances,t))})},_initCanvasHandlers:function(){var t=this;this.canvas.on("selection:cleared",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)}),this.canvas.on("mouse:up",function(){t.canvas._iTextInstances&&t.canvas._iTextInstances.forEach(function(t){t.__isMousedown=!1})}),this.canvas.on("object:selected",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)})},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){r.isAborted||t[n]()},onChange:function(){t.canvas&&(t.canvas.clearContext(t.canvas.contextTop||t.ctx),t.renderCursorOrSelection())},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),this._currentCursorOpacity=1,this.canvas&&(this.canvas.clearContext(this.canvas.contextTop||this.ctx),this.renderCursorOrSelection()),this._cursorTimeout2&&clearTimeout(this._cursorTimeout2),this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.setSelectionStart(0),this.setSelectionEnd(this.text.length)},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,n=t.split(""),r=n.length;r>i;i++)"\n"===n[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,n=this.text.charAt(i),r=/[ \n\.,;!\?\-]/;!r.test(n)&&i>0&&i<this.text.length;)i+=e,n=this.text.charAt(i);return r.test(n)&&"\n"!==n&&(i+=1===e?0:1),i},selectWord:function(t){var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.setSelectionStart(e),this.setSelectionEnd(i)},selectLine:function(t){var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.setSelectionStart(e),this.setSelectionEnd(i)},enterEditing:function(){return!this.isEditing&&this.editable?(this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.renderAll(),this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this):this):void 0},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){var t=this;this.canvas.on("mouse:move",function(e){if(t.__isMousedown&&t.isEditing){var i=t.getSelectionStartFromPointer(e.e);i>=t.__selectionStartOnMouseDown?(t.setSelectionStart(t.__selectionStartOnMouseDown),t.setSelectionEnd(i)):(t.setSelectionStart(i),t.setSelectionEnd(t.__selectionStartOnMouseDown))}})},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){this.hiddenTextarea&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd)},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),this.canvas&&this.canvas.fire("text:editing:exited",{target:this}),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(var i=e;i!==t;){var n=this.get2DCursorLocation(i).charIndex;i--;var r=this.get2DCursorLocation(i).charIndex,o=r>n;o?this.removeStyleObject(o,i+1):this.removeStyleObject(0===this.get2DCursorLocation(i).charIndex,i)}this.text=this.text.slice(0,t)+this.text.slice(e),this._clearCache()},insertChars:function(t,e){var i="\n"===this.text.slice(this.selectionStart,this.selectionStart+1);this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this.selectionStart===this.selectionEnd&&this.insertStyleObjects(t,i,e),this.setSelectionStart(this.selectionStart+t.length),this.setSelectionEnd(this.selectionStart),this._clearCache(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},insertNewlineStyleObject:function(e,i,n){this.shiftLineStyles(e,1),this.styles[e+1]||(this.styles[e+1]={});var r=this.styles[e][i-1],o={};if(n)o[0]=t(r),this.styles[e+1]=o;else{for(var s in this.styles[e])parseInt(s,10)>=i&&(o[parseInt(s,10)-i]=this.styles[e][s],delete this.styles[e][s]);this.styles[e+1]=o}this._clearCache()},insertCharStyleObject:function(e,i,n){var r=this.styles[e],o=t(r);0!==i||n||(i=1);for(var s in o){var a=parseInt(s,10);a>=i&&(r[a+1]=o[a])}this.styles[e][i]=n||t(r[i-1]),this._clearCache()},insertStyleObjects:function(t,e,i){var n=this.get2DCursorLocation(),r=n.lineIndex,o=n.charIndex;this.styles[r]||(this.styles[r]={}),"\n"===t?this.insertNewlineStyleObject(r,o,e):i?this._insertStyles(this.copiedStyles):this.insertCharStyleObject(r,o)},_insertStyles:function(t){for(var e=0,i=t.length;i>e;e++){var n=this.get2DCursorLocation(this.selectionStart+e),r=n.lineIndex,o=n.charIndex;this.insertCharStyleObject(r,o,t[e])}},shiftLineStyles:function(e,i){var n=t(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>e&&(this.styles[o+i]=n[o])}},removeStyleObject:function(e,i){var n=this.get2DCursorLocation(i),r=n.lineIndex,o=n.charIndex;if(e){var s=this._textLines[r-1],a=s?s.length:0;this.styles[r-1]||(this.styles[r-1]={});for(o in this.styles[r])this.styles[r-1][parseInt(o,10)+a]=this.styles[r][o];this.shiftLineStyles(r,-1)}else{var h=this.styles[r];if(h){var l=this.selectionStart===this.selectionEnd?-1:0;delete h[o+l]}var c=t(h);for(var u in c){var f=parseInt(u,10);f>=o&&0!==f&&(h[f-1]=c[f],delete h[f])}}},insertNewline:function(){this.insertChars("\n")}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this._isObjectMoved(t.e)||(this.__lastSelected&&(this.enterEditing(),this.initDelayedCursor(!0)),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?e<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(e)):this.setSelectionEnd(e):(this.setSelectionStart(e),this.setSelectionEnd(e))},_getLocalRotatedPointer:function(t){var e=this.canvas.getPointer(t),i=new fabric.Point(e.x,e.y),n=new fabric.Point(this.left,this.top),r=fabric.util.rotatePoint(i,n,fabric.util.degreesToRadians(-this.angle));return this.getLocalPointer(t,r)},getSelectionStartFromPointer:function(t){for(var e,i,n=this._getLocalRotatedPointer(t),r=0,o=0,s=0,a=0,h=0,l=this._textLines.length;l>h;h++){i=this._textLines[h].split(""),s+=this._getHeightOfLine(this.ctx,h)*this.scaleY;var c=this._getLineWidth(this.ctx,h),u=this._getLineLeftOffset(c);o=u*this.scaleX,this.flipX&&(this._textLines[h]=i.reverse().join(""));for(var f=0,d=i.length;d>f;f++){var p=i[f];if(r=o,o+=this._getWidthOfChar(this.ctx,p,h,this.flipX?d-f:f)*this.scaleX,!(s<=n.y||o<=n.x))return this._getNewSelectionStartFromOffset(n,r,o,a+h,d);a++}if(n.y<s)return this._getNewSelectionStartFromOffset(n,r,o,a+h,d)}return"undefined"==typeof e?this.text.length:void 0},_getNewSelectionStartFromOffset:function(t,e,i,n,r){var o=t.x-e,s=i-t.x,a=s>o?0:1,h=n+a;return this.flipX&&(h=r-h),h>this.text.length&&(h=this.text.length),h}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.style.cssText="position: fixed; bottom: 20px; left: 0px; opacity: 0; width: 0px; height: 0px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keypress",this.onKeyPress.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMap:{65:"selectAll",88:"cut"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMap&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMap[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()}},forwardDelete:function(t){this.selectionStart===this.selectionEnd&&this.moveCursorRight(t),this.removeChars(t)},copy:function(t){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),this.copiedText=e,this.copiedStyles=this.getSelectionStyles(this.selectionStart,this.selectionEnd)},paste:function(t){var e=null,i=this._getClipboardData(t);e=i?i.getData("text"):this.copiedText,e&&this.insertChars(e,!0)},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(),this.removeChars(t))},_getClipboardData:function(t){return t&&(t.clipboardData||fabric.window.clipboardData)},onKeyPress:function(t){!this.isEditing||t.metaKey||t.ctrlKey||(0!==t.which&&this.insertChars(String.fromCharCode(t.which)),t.stopPropagation())},getDownCursorOffset:function(t,e){var i,n,r=e?this.selectionEnd:this.selectionStart,o=this.text.slice(0,r),s=this.text.slice(r),a=o.slice(o.lastIndexOf("\n")+1),h=s.match(/(.*)\n?/)[1],l=(s.match(/.*\n(.*)\n?/)||{})[1]||"",c=this.get2DCursorLocation(r);if(c.lineIndex===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-r;var u=this._getLineWidth(this.ctx,c.lineIndex);n=this._getLineLeftOffset(u);for(var f=n,d=c.lineIndex,p=0,g=a.length;g>p;p++)i=a[p],f+=this._getWidthOfChar(this.ctx,i,d,p);var v=this._getIndexOnNextLine(c,l,f);return h.length+1+v},_getIndexOnNextLine:function(t,e,i){for(var n,r=t.lineIndex+1,o=this._getLineWidth(this.ctx,r),s=this._getLineLeftOffset(o),a=s,h=0,l=0,c=e.length;c>l;l++){var u=e[l],f=this._getWidthOfChar(this.ctx,u,r,l);if(a+=f,a>i){n=!0;var d=a-f,p=a,g=Math.abs(d-i),v=Math.abs(p-i);h=g>v?l+1:l;break}}return n||(h=e.length),h},moveCursorDown:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getDownCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorDownWithShift(e):this.moveCursorDownWithoutShift(e),this.initDelayedCursor()},moveCursorDownWithoutShift:function(t){this._selectionDirection="right",this.setSelectionStart(this.selectionStart+t),this.setSelectionEnd(this.selectionStart)},swapSelectionPoints:function(){var t=this.selectionEnd;this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)},moveCursorDownWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="right"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd+t):this.setSelectionStart(this.selectionStart+t),this.selectionEnd<this.selectionStart&&"left"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="right"),this.selectionEnd>this.text.length&&this.setSelectionEnd(this.text.length)},getUpCursorOffset:function(t,e){var i=e?this.selectionEnd:this.selectionStart,n=this.get2DCursorLocation(i);if(0===n.lineIndex||t.metaKey||33===t.keyCode)return i;for(var r,o=this.text.slice(0,i),s=o.slice(o.lastIndexOf("\n")+1),a=(o.match(/\n?(.*)\n.*$/)||{})[1]||"",h=this._getLineWidth(this.ctx,n.lineIndex),l=this._getLineLeftOffset(h),c=l,u=n.lineIndex,f=0,d=s.length;d>f;f++)r=s[f],c+=this._getWidthOfChar(this.ctx,r,u,f);var p=this._getIndexOnPrevLine(n,a,c);return a.length-p+s.length},_getIndexOnPrevLine:function(t,e,i){for(var n,r=t.lineIndex-1,o=this._getLineWidth(this.ctx,r),s=this._getLineLeftOffset(o),a=s,h=0,l=0,c=e.length;c>l;l++){var u=e[l],f=this._getWidthOfChar(this.ctx,u,r,l);if(a+=f,a>i){n=!0;var d=a-f,p=a,g=Math.abs(d-i),v=Math.abs(p-i);h=g>v?l:l-1;break}}return n||(h=e.length-1),h},moveCursorUp:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getUpCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorUpWithShift(e):this.moveCursorUpWithoutShift(e),this.initDelayedCursor()},moveCursorUpWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="left"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd-t):this.setSelectionStart(this.selectionStart-t),this.selectionEnd<this.selectionStart&&"right"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="left")},moveCursorUpWithoutShift:function(t){this.selectionStart===this.selectionEnd&&this.setSelectionStart(this.selectionStart-t),this.setSelectionEnd(this.selectionStart),this._selectionDirection="left"},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorLeftWithShift(t):this.moveCursorLeftWithoutShift(t),this.initDelayedCursor())},_move:function(t,e,i){var n="selectionStart"===e?"setSelectionStart":"setSelectionEnd";t.altKey?this[n](this["findWordBoundary"+i](this[e])):t.metaKey||35===t.keyCode||36===t.keyCode?this[n](this["findLineBoundary"+i](this[e])):this[n](this[e]+("Left"===i?-1:1))},_moveLeft:function(t,e){this._move(t,e,"Left")},_moveRight:function(t,e){this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)},moveCursorLeftWithShift:function(t){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(t,"selectionStart"),"\n"===this.text.charAt(this.selectionStart)&&this.setSelectionStart(this.selectionStart-1))},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorRightWithShift(t):this.moveCursorRightWithoutShift(t),this.initDelayedCursor())},moveCursorRightWithShift:function(t){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):(this._selectionDirection="right",this._moveRight(t,"selectionEnd"),"\n"===this.text.charAt(this.selectionEnd-1)&&this.setSelectionEnd(this.selectionEnd+1))},moveCursorRightWithoutShift:function(t){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)):(this.setSelectionEnd(this.selectionEnd+this.getNumNewLinesInSelectedText()),this.setSelectionStart(this.selectionEnd))},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this._clearCache(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else{var n="\n"===this.text.slice(this.selectionStart-1,this.selectionStart);this.removeStyleObject(n),this.setSelectionStart(this.selectionStart-1),this.text=this.text.slice(0,this.selectionStart)+this.text.slice(this.selectionStart+1)}}}),fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,n,r,o){this.styles[t]?this._setSVGTextLineChars(t,e,i,n,o):this.callSuper("_setSVGTextLineText",t,e,i,n,r)},_setSVGTextLineChars:function(t,e,i,n,r){for(var o=this._textLines[t].split(""),s=0,a=this._getSVGLineLeftOffset(t)-this.width/2,h=this._getSVGLineTopOffset(t),l=this._getHeightOfLine(this.ctx,t),c=0,u=o.length;u>c;c++){var f=this.styles[t][c]||{};e.push(this._createTextCharSpan(o[c],f,a,h.lineTop+h.offset,s));var d=this._getWidthOfChar(this.ctx,o[c],t,c);f.textBackgroundColor&&r.push(this._createTextCharBg(f,a,h.lineTop,l,d,s)),s+=d}},_getSVGLineLeftOffset:function(t){return fabric.util.toFixed(this._getLineLeftOffset(this.__lineWidths[t]),2)},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;t>n;n++)e+=this._getHeightOfLine(this.ctx,n);return i=this._getHeightOfLine(this.ctx,n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(t,e,i,n,r,o){return['<rect fill="',t.textBackgroundColor,'" x="',e+o,'" y="',i-this.height/2,'" width="',r,'" height="',n/this.lineHeight,'"></rect>'].join("")},_createTextCharSpan:function(t,e,i,n,r){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text"
},e));return['<tspan x="',i+r,'" y="',n-this.height/2,'" ',e.fontFamily?'font-family="'+e.fontFamily.replace(/"/g,"'")+'" ':"",e.fontSize?'font-size="'+e.fontSize+'" ':"",e.fontStyle?'font-style="'+e.fontStyle+'" ':"",e.fontWeight?'font-weight="'+e.fontWeight+'" ':"",e.textDecoration?'text-decoration="'+e.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(t),"</tspan>"].join("")}}),function(){function request(t,e,i){var n=URL.parse(t);n.port||(n.port=0===n.protocol.indexOf("https:")?443:80);var r=0===n.protocol.indexOf("https:")?HTTPS:HTTP,o=r.request({hostname:n.hostname,port:n.port,path:n.path,method:"GET"},function(t){var n="";e&&t.setEncoding(e),t.on("end",function(){i(n)}),t.on("data",function(e){200===t.statusCode&&(n+=e)})});o.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+n.hostname+":"+n.port):fabric.log(t.message)}),o.end()}function requestFs(t,e){var i=require("fs");i.readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function n(n){r.src=new Buffer(n,"binary"),r._src=t,e&&e.call(i,r)}var r=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(r.src=r._src=t,e&&e.call(i,r)):t&&0!==t.indexOf("http")?requestFs(t,n):t?request(t,"binary",n):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){var n=new fabric.Image(i);n._initConfig(t),n._initFilters(t,function(t){n.filters=t||[],e&&e(n)})})},fabric.createCanvasForNode=function(t,e,i,n){n=n||i;var r=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,n);r.style={},r.width=o.width,r.height=o.height;var s=fabric.Canvas||fabric.StaticCanvas,a=new s(r,i);return a.contextContainer=o.getContext("2d"),a.nodeCanvas=o,a.Font=Canvas.Font,a},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t,e){return origSetWidth.call(this,t,e),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t,e){return origSetHeight.call(this,t,e),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}()}).call(this,require("_process"),require("buffer").Buffer)},{_process:27,buffer:18,canvas:17,fs:17,http:46,https:23,jsdom:17,url:53,xmldom:17}],2:[function(t,e,i){(function(e){!function(n){var r="object"==typeof self&&self.self==self&&self||"object"==typeof e&&e.global==e&&e;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,i){r.Backbone=n(r,i,t,e)});else if("undefined"!=typeof i){var o,s=t("underscore");try{o=t("jquery")}catch(a){}n(r,i,s,o)}else r.Backbone=n(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)}(function(t,e,i,n){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.2.3",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,r){return i[e](this[n],h(t,this),r)};case 4:return function(t,r,o){return i[e](this[n],h(t,this),r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,r){i[r]&&(t.prototype[r]=s(e,r,n))})},h=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?l(t):i.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},u=/\s+/,f=function(t,e,n,r,o){var s,a=0;if(n&&"object"==typeof n){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=i.keys(n);a<s.length;a++)e=f(t,e,s[a],n[s[a]],o)}else if(n&&u.test(n))for(s=n.split(u);a<s.length;a++)e=t(e,s[a],r,o);else e=t(e,n,r,o);return e};c.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,n,r){if(t._events=f(p,t._events||{},e,i,{context:n,ctx:t,listening:r}),r){var o=t._listeners||(t._listeners={});o[r.id]=r}return t};c.listenTo=function(t,e,n){if(!t)return this;var r=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=i.uniqueId("l"));s=o[r]={obj:t,objId:r,id:a,listeningTo:o,count:0}}return d(t,e,n,this,s),this};var p=function(t,e,i,n){if(i){var r=t[e]||(t[e]=[]),o=n.context,s=n.ctx,a=n.listening;a&&a.count++,r.push({callback:i,context:o,ctx:o||s,listening:a})}return t};c.off=function(t,e,i){return this._events?(this._events=f(g,this._events,t,e,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:i.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(e,n,this)}return i.isEmpty(r)&&(this._listeningTo=void 0),this};var g=function(t,e,n,r){if(t){var o,s=0,a=r.context,h=r.listeners;if(e||n||a){for(var l=e?[e]:i.keys(t);s<l.length;s++){e=l[s];var c=t[e];if(!c)break;for(var u=[],f=0;f<c.length;f++){var d=c[f];n&&n!==d.callback&&n!==d.callback._callback||a&&a!==d.context?u.push(d):(o=d.listening,o&&0===--o.count&&(delete h[o.id],delete o.listeningTo[o.objId]))}u.length?t[e]=u:delete t[e]}return i.size(t)?t:void 0}for(var p=i.keys(h);s<p.length;s++)o=h[p[s]],delete h[o.id],delete o.listeningTo[o.objId]}};c.once=function(t,e,n){var r=f(v,{},t,e,i.bind(this.off,this));return this.on(r,void 0,n)},c.listenToOnce=function(t,e,n){var r=f(v,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,r)};var v=function(t,e,n,r){if(n){var o=t[e]=i.once(function(){r(e,o),n.apply(this,arguments)});o._callback=n}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return f(m,this._events,t,void 0,i),this};var m=function(t,e,i,n){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&y(r,n),o&&y(o,[e].concat(n))}return t},y=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}};c.bind=c.on,c.unbind=c.off,i.extend(e,c);var b=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var o=n.unset,s=n.silent,a=[],h=this._changing;this._changing=!0,h||(this._previousAttributes=i.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,u=this._previousAttributes;for(var f in r)e=r[f],i.isEqual(l[f],e)||a.push(f),i.isEqual(u[f],e)?delete c[f]:c[f]=e,o?delete l[f]:l[f]=e;if(this.id=this.get(this.idAttribute),!s){a.length&&(this._pending=n);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,l[a[d]],n)}if(h)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,n={};for(var r in t){var o=t[r];i.isEqual(e[r],o)||(n[r]=o)}return i.size(n)?n:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var r=t.parse?e.parse(i,t):i;return e.set(r,t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},W(this,t),this.sync("read",this,t)},save:function(t,e,n){var r;null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(r&&!o){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;var s=this,a=n.success,h=this.attributes;n.success=function(t){s.attributes=h;var e=n.parse?s.parse(t,n):t;return o&&(e=i.extend({},r,e)),e&&!s.set(e,n)?!1:(a&&a.call(n.context,s,t,n),void s.trigger("sync",s,t,n))},W(this,n),r&&o&&(this.attributes=i.extend({},h,r));var l=this.isNew()?"create":n.patch?"patch":"update";"patch"!==l||n.attrs||(n.attrs=r);var c=this.sync(l,this,n);return this.attributes=h,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){r&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var s=!1;return this.isNew()?i.defer(t.success):(W(this,t),s=this.sync("delete",this,t)),r||o(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||H();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(b,_,"attributes");var x=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},S=function(t,e,i){i=Math.min(Math.max(i,0),t.length);for(var n=Array(t.length-i),r=e.length,o=0;o<n.length;o++)n[o]=t[o+i];for(o=0;r>o;o++)t[o+i]=e[o];for(o=0;o<n.length;o++)t[o+r+i]=n[o]};i.extend(x.prototype,c,{model:b,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,C))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:i.clone(t);var r=this._removeModels(t,e);return!e.silent&&r&&this.trigger("update",this,e),n?r[0]:r},set:function(t,e){if(null!=t){e=i.defaults({},e,w),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?[t]:t.slice();var r=e.at;null!=r&&(r=+r),0>r&&(r+=this.length+1);for(var o,s=[],a=[],h=[],l={},c=e.add,u=e.merge,f=e.remove,d=!1,p=this.comparator&&null==r&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=0;v<t.length;v++){o=t[v];var m=this.get(o);if(m){if(u&&o!==m){var y=this._isModel(o)?o.attributes:o;e.parse&&(y=m.parse(y,e)),m.set(y,e),p&&!d&&(d=m.hasChanged(g))}l[m.cid]||(l[m.cid]=!0,s.push(m)),t[v]=m}else c&&(o=t[v]=this._prepareModel(o,e),o&&(a.push(o),this._addReference(o,e),l[o.cid]=!0,s.push(o)))}if(f){for(v=0;v<this.length;v++)o=this.models[v],l[o.cid]||h.push(o);h.length&&this._removeModels(h,e)}var b=!1,_=!p&&c&&f;if(s.length&&_?(b=this.length!=s.length||i.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,S(this.models,s,0),this.length=this.models.length):a.length&&(p&&(d=!0),S(this.models,a,null==r?this.length:r),this.length=this.models.length),d&&this.sort({silent:!0}),!e.silent){for(v=0;v<a.length;v++)null!=r&&(e.index=r+v),o=a[v],o.trigger("add",o,this,e);(d||b)&&this.trigger("sort",this,e),(a.length||h.length)&&this.trigger("update",this,e)}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},W(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,i){n&&r.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var r=this.get(t[n]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,e.silent||(e.index=o,r.trigger("remove",r,this,e)),i.push(r),this._removeReference(r,e)}}return i.length?i:!1},_isModel:function(t){return t instanceof b},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if("add"!==t&&"remove"!==t||i===this){if("destroy"===t&&this.remove(e,n),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}this.trigger.apply(this,arguments)}}});var T={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};a(x,T,"models");var O=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,A)),this._ensureElement(),this.initialize.apply(this,arguments)},E=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];i.extend(O.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var r=e.match(E);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,r){var o=k[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||H()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var h=r.error;r.error=function(t,e,i){r.textStatus=e,r.errorThrown=i,h&&h.call(r.context,t,e,i)};var l=r.xhr=e.ajax(i.extend(s,r));return n.trigger("request",n,l,r),l};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var j=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},I=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,P=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(j.prototype,c,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return e.history.route(t,function(i){var s=o._extractParameters(t,i);o.execute(r,s,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),e.history.trigger("route",o,n,s))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(I,"(?:$1)?").replace(M,function(t,e){return e?t:"([^/?]+)"}).replace(P,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,B=/#.*$/;L.started=!1,i.extend(L.prototype,c,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(R,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(N,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(B,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new L;var F=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};b.extend=x.extend=j.extend=O.extend=L.extend=F;var H=function(){throw new Error('A "url" property or function must be specified')},W=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:56,underscore:3}],3:[function(t,e,i){(function(){function t(t){function e(e,i,n,r,o,s){for(;o>=0&&s>o;o+=t){var a=r?r[o]:o;n=i(n,e[a],a,e)}return n}return function(i,n,r,o){n=x(n,o,4);var s=!A(i)&&_.keys(i),a=(s||i).length,h=t>0?0:a-1;return arguments.length<3&&(r=i[s?s[h]:h],h+=t),e(i,n,r,s,h,a)}}function n(t){return function(e,i,n){i=w(i,n);for(var r=E(e),o=t>0?0:r-1;o>=0&&r>o;o+=t)if(i(e[o],o,e))return o;return-1}}function r(t,e,i){return function(n,r,o){var s=0,a=E(n);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(n,r),n[o]===r?o:-1;if(r!==r)return o=e(f.call(n,s,a),_.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&a>o;o+=t)if(n[o]===r)return o;return-1}}function o(t,e){var i=P.length,n=t.constructor,r=_.isFunction(n)&&n.prototype||l,o="constructor";for(_.has(t,o)&&!_.contains(e,o)&&e.push(o);i--;)o=P[i],o in t&&t[o]!==r[o]&&!_.contains(e,o)&&e.push(o)}var s=this,a=s._,h=Array.prototype,l=Object.prototype,c=Function.prototype,u=h.push,f=h.slice,d=l.toString,p=l.hasOwnProperty,g=Array.isArray,v=Object.keys,m=c.bind,y=Object.create,b=function(){},_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};"undefined"!=typeof i?("undefined"!=typeof e&&e.exports&&(i=e.exports=_),i._=_):s._=_,_.VERSION="1.8.3";var x=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}},w=function(t,e,i){return null==t?_.identity:_.isFunction(t)?x(t,e,i):_.isObject(t)?_.matcher(t):_.property(t)};_.iteratee=function(t,e){return w(t,e,1/0)};var C=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var o=arguments[r],s=t(o),a=s.length,h=0;a>h;h++){var l=s[h];e&&void 0!==i[l]||(i[l]=o[l])}return i}},S=function(t){if(!_.isObject(t))return{};if(y)return y(t);b.prototype=t;var e=new b;return b.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},O=Math.pow(2,53)-1,E=T("length"),A=function(t){var e=E(t);return"number"==typeof e&&e>=0&&O>=e};_.each=_.forEach=function(t,e,i){e=x(e,i);var n,r;if(A(t))for(n=0,r=t.length;r>n;n++)e(t[n],n,t);else{var o=_.keys(t);for(n=0,r=o.length;r>n;n++)e(t[o[n]],o[n],t)}return t},_.map=_.collect=function(t,e,i){e=w(e,i);for(var n=!A(t)&&_.keys(t),r=(n||t).length,o=Array(r),s=0;r>s;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o},_.reduce=_.foldl=_.inject=t(1),_.reduceRight=_.foldr=t(-1),_.find=_.detect=function(t,e,i){var n;return n=A(t)?_.findIndex(t,e,i):_.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},_.filter=_.select=function(t,e,i){var n=[];return e=w(e,i),_.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},_.reject=function(t,e,i){return _.filter(t,_.negate(w(e)),i)},_.every=_.all=function(t,e,i){e=w(e,i);for(var n=!A(t)&&_.keys(t),r=(n||t).length,o=0;r>o;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0},_.some=_.any=function(t,e,i){e=w(e,i);for(var n=!A(t)&&_.keys(t),r=(n||t).length,o=0;r>o;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1},_.contains=_.includes=_.include=function(t,e,i,n){return A(t)||(t=_.values(t)),("number"!=typeof i||n)&&(i=0),_.indexOf(t,e,i)>=0},_.invoke=function(t,e){var i=f.call(arguments,2),n=_.isFunction(e);return _.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matcher(e))},_.findWhere=function(t,e){return _.find(t,_.matcher(e))},_.max=function(t,e,i){var n,r,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=A(t)?t:_.values(t);for(var a=0,h=t.length;h>a;a++)n=t[a],n>o&&(o=n)}else e=w(e,i),_.each(t,function(t,i,n){r=e(t,i,n),(r>s||r===-(1/0)&&o===-(1/0))&&(o=t,s=r)});return o},_.min=function(t,e,i){var n,r,o=1/0,s=1/0;if(null==e&&null!=t){t=A(t)?t:_.values(t);for(var a=0,h=t.length;h>a;a++)n=t[a],o>n&&(o=n)}else e=w(e,i),_.each(t,function(t,i,n){r=e(t,i,n),(s>r||r===1/0&&o===1/0)&&(o=t,s=r)});return o},_.shuffle=function(t){for(var e,i=A(t)?t:_.values(t),n=i.length,r=Array(n),o=0;n>o;o++)e=_.random(0,o),e!==o&&(r[o]=r[e]),r[e]=i[o];return r},_.sample=function(t,e,i){return null==e||i?(A(t)||(t=_.values(t)),t[_.random(t.length-1)]):_.shuffle(t).slice(0,Math.max(0,e))},_.sortBy=function(t,e,i){return e=w(e,i),_.pluck(_.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var k=function(t){return function(e,i,n){var r={};return i=w(i,n),_.each(e,function(n,o){var s=i(n,o,e);t(r,n,s)}),r}};_.groupBy=k(function(t,e,i){_.has(t,i)?t[i].push(e):t[i]=[e]}),_.indexBy=k(function(t,e,i){t[i]=e}),_.countBy=k(function(t,e,i){_.has(t,i)?t[i]++:t[i]=1}),_.toArray=function(t){return t?_.isArray(t)?f.call(t):A(t)?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:A(t)?t.length:_.keys(t).length},_.partition=function(t,e,i){e=w(e,i);var n=[],r=[];return _.each(t,function(t,i,o){(e(t,i,o)?n:r).push(t)}),[n,r]},_.first=_.head=_.take=function(t,e,i){return null!=t?null==e||i?t[0]:_.initial(t,t.length-e):void 0},_.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},_.last=function(t,e,i){return null!=t?null==e||i?t[t.length-1]:_.rest(t,Math.max(0,t.length-e)):void 0},_.rest=_.tail=_.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var j=function(t,e,i,n){for(var r=[],o=0,s=n||0,a=E(t);a>s;s++){var h=t[s];if(A(h)&&(_.isArray(h)||_.isArguments(h))){e||(h=j(h,e,i));var l=0,c=h.length;for(r.length+=c;c>l;)r[o++]=h[l++]}else i||(r[o++]=h)}return r};_.flatten=function(t,e){return j(t,e,!1)},_.without=function(t){return _.difference(t,f.call(arguments,1))},_.uniq=_.unique=function(t,e,i,n){_.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=w(i,n));for(var r=[],o=[],s=0,a=E(t);a>s;s++){var h=t[s],l=i?i(h,s,t):h;e?(s&&o===l||r.push(h),o=l):i?_.contains(o,l)||(o.push(l),r.push(h)):_.contains(r,h)||r.push(h)}return r},_.union=function(){return _.uniq(j(arguments,!0,!0));
},_.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=E(t);r>n;n++){var o=t[n];if(!_.contains(e,o)){for(var s=1;i>s&&_.contains(arguments[s],o);s++);s===i&&e.push(o)}}return e},_.difference=function(t){var e=j(arguments,!0,!0,1);return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(t){for(var e=t&&_.max(t,E).length||0,i=Array(e),n=0;e>n;n++)i[n]=_.pluck(t,n);return i},_.object=function(t,e){for(var i={},n=0,r=E(t);r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},_.findIndex=n(1),_.findLastIndex=n(-1),_.sortedIndex=function(t,e,i,n){i=w(i,n,1);for(var r=i(e),o=0,s=E(t);s>o;){var a=Math.floor((o+s)/2);i(t[a])<r?o=a+1:s=a}return o},_.indexOf=r(1,_.findIndex,_.sortedIndex),_.lastIndexOf=r(-1,_.findLastIndex),_.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;n>o;o++,t+=i)r[o]=t;return r};var I=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=S(t.prototype),s=t.apply(o,r);return _.isObject(s)?s:o};_.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,f.call(arguments,1));if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");var i=f.call(arguments,2),n=function(){return I(t,n,e,this,i.concat(f.call(arguments)))};return n},_.partial=function(t){var e=f.call(arguments,1),i=function(){for(var n=0,r=e.length,o=Array(r),s=0;r>s;s++)o[s]=e[s]===_?arguments[n++]:e[s];for(;n<arguments.length;)o.push(arguments[n++]);return I(t,i,this,this,o)};return i},_.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=_.bind(t[i],t);return t},_.memoize=function(t,e){var i=function(n){var r=i.cache,o=""+(e?e.apply(this,arguments):n);return _.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i},_.delay=function(t,e){var i=f.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},_.defer=_.partial(_.delay,_,1),_.throttle=function(t,e,i){var n,r,o,s=null,a=0;i||(i={});var h=function(){a=i.leading===!1?0:_.now(),s=null,o=t.apply(n,r),s||(n=r=null)};return function(){var l=_.now();a||i.leading!==!1||(a=l);var c=e-(l-a);return n=this,r=arguments,0>=c||c>e?(s&&(clearTimeout(s),s=null),a=l,o=t.apply(n,r),s||(n=r=null)):s||i.trailing===!1||(s=setTimeout(h,c)),o}},_.debounce=function(t,e,i){var n,r,o,s,a,h=function(){var l=_.now()-s;e>l&&l>=0?n=setTimeout(h,e-l):(n=null,i||(a=t.apply(o,r),n||(o=r=null)))};return function(){o=this,r=arguments,s=_.now();var l=i&&!n;return n||(n=setTimeout(h,e)),l&&(a=t.apply(o,r),o=r=null),a}},_.wrap=function(t,e){return _.partial(e,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},_.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},_.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},_.once=_.partial(_.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(t){if(!_.isObject(t))return[];if(v)return v(t);var e=[];for(var i in t)_.has(t,i)&&e.push(i);return M&&o(t,e),e},_.allKeys=function(t){if(!_.isObject(t))return[];var e=[];for(var i in t)e.push(i);return M&&o(t,e),e},_.values=function(t){for(var e=_.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},_.mapObject=function(t,e,i){e=w(e,i);for(var n,r=_.keys(t),o=r.length,s={},a=0;o>a;a++)n=r[a],s[n]=e(t[n],n,t);return s},_.pairs=function(t){for(var e=_.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},_.invert=function(t){for(var e={},i=_.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},_.functions=_.methods=function(t){var e=[];for(var i in t)_.isFunction(t[i])&&e.push(i);return e.sort()},_.extend=C(_.allKeys),_.extendOwn=_.assign=C(_.keys),_.findKey=function(t,e,i){e=w(e,i);for(var n,r=_.keys(t),o=0,s=r.length;s>o;o++)if(n=r[o],e(t[n],n,t))return n},_.pick=function(t,e,i){var n,r,o={},s=t;if(null==s)return o;_.isFunction(e)?(r=_.allKeys(s),n=x(e,i)):(r=j(arguments,!1,!1,1),n=function(t,e,i){return e in i},s=Object(s));for(var a=0,h=r.length;h>a;a++){var l=r[a],c=s[l];n(c,l,s)&&(o[l]=c)}return o},_.omit=function(t,e,i){if(_.isFunction(e))e=_.negate(e);else{var n=_.map(j(arguments,!1,!1,1),String);e=function(t,e){return!_.contains(n,e)}}return _.pick(t,e,i)},_.defaults=C(_.allKeys,!0),_.create=function(t,e){var i=S(t);return e&&_.extendOwn(i,e),i},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t},_.isMatch=function(t,e){var i=_.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;n>o;o++){var s=i[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var D=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=d.call(t);if(r!==d.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var h=i.length;h--;)if(i[h]===t)return n[h]===e;if(i.push(t),n.push(e),o){if(h=t.length,h!==e.length)return!1;for(;h--;)if(!D(t[h],e[h],i,n))return!1}else{var l,c=_.keys(t);if(h=c.length,_.keys(e).length!==h)return!1;for(;h--;)if(l=c[h],!_.has(e,l)||!D(t[l],e[l],i,n))return!1}return i.pop(),n.pop(),!0};_.isEqual=function(t,e){return D(t,e)},_.isEmpty=function(t){return null==t?!0:A(t)&&(_.isArray(t)||_.isString(t)||_.isArguments(t))?0===t.length:0===_.keys(t).length},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=g||function(t){return"[object Array]"===d.call(t)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){_["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return _.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!==+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return null!=t&&p.call(t,e)},_.noConflict=function(){return s._=a,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=T,_.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(t,e,i){var n=Array(Math.max(0,t));e=x(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=_.invert(L),N=function(t){var e=function(e){return t[e]},i="(?:"+_.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};_.escape=N(L),_.unescape=N(R),_.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),_.isFunction(n)?n.call(t):n};var B=0;_.uniqueId=function(t){var e=++B+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+H[t]};_.template=function(t,e,i){!e&&i&&(e=i),e=_.defaults({},e,_.templateSettings);var n=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,s,a){return o+=t.slice(r,a).replace(W,X),r=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var h=function(t){return s.call(this,t,_)},l=e.variable||"obj";return h.source="function("+l+"){\n"+o+"}",h},_.chain=function(t){var e=_(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?_(e).chain():e};_.mixin=function(t){_.each(_.functions(t),function(e){var i=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),Y(this,i.apply(_,t))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];_.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],Y(this,i)}}),_.each(["concat","join","slice"],function(t){var e=h[t];_.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}],4:[function(t,e,i){t("../../js/transition.js"),t("../../js/alert.js"),t("../../js/button.js"),t("../../js/carousel.js"),t("../../js/collapse.js"),t("../../js/dropdown.js"),t("../../js/modal.js"),t("../../js/tooltip.js"),t("../../js/popover.js"),t("../../js/scrollspy.js"),t("../../js/tab.js"),t("../../js/affix.js")},{"../../js/affix.js":5,"../../js/alert.js":6,"../../js/button.js":7,"../../js/carousel.js":8,"../../js/collapse.js":9,"../../js/dropdown.js":10,"../../js/modal.js":11,"../../js/popover.js":12,"../../js/scrollspy.js":13,"../../js/tab.js":14,"../../js/tooltip.js":15,"../../js/transition.js":16}],5:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.affix"),o="object"==typeof e&&e;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.6",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var r=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return i>r?"top":!1;if("bottom"==this.affixed)return null!=i?r+this.unpin<=o.top?!1:"bottom":t-n>=r+s?!1:"bottom";var a=null==this.affixed,h=a?r:o.top,l=a?s:e;return null!=i&&i>=r?"top":null!=n&&h+l>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,r=n.top,o=n.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(o=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var a=this.getState(s,e,r,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var h="affix"+(a?"-"+a:""),l=t.Event(h+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-o})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery)},{}],6:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){s.detach().trigger("closed.bs.alert").remove()}var r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t(o);e&&e.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery)},{}],7:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.button"),o="object"==typeof e&&e;r||n.data("bs.button",r=new i(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.6",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[r]()),setTimeout(t.proxy(function(){n[r](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery)},{}],8:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:o.slide;r||n.data("bs.carousel",r=new i(this,o)),"number"==typeof e?r.to(e):s?r[s]():o.interval&&r.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var r="prev"==t?-1:1,o=(i+r)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var r=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,r),s=this.interval,a="next"==e?"left":"right",h=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:l,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),r.one("bsTransitionEnd",function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(f)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var r=function(i){var n,r=t(this),o=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=t.extend({},o.data(),r.data()),a=r.attr("data-slide-to");a&&(s.interval=!1),e.call(o,s),a&&o.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery)},{}],9:[function(t,e,i){+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!r&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.6",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(e=r.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),e||r.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var h=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][h])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var r=t(n);this.addAriaAndCollapsedClass(e(r),r)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var r=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r=t(this);r.attr("data-target")||n.preventDefault();var o=e(r),s=o.data("bs.collapse"),a=s?"toggle":r.data();i.call(o,a)})}(jQuery)},{}],10:[function(t,e,i){+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(r).remove(),t(o).each(function(){var n=t(this),r=e(n),o={relatedTarget:this};r.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(r[0],i.target)||(r.trigger(i=t.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.6",s.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var o=e(r),s=o.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var r=e(n),s=r.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&r.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",h=r.find(".dropdown-menu"+a);if(h.length){var l=h.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<h.length-1&&l++,~l||(l=0),h.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery)},{}],11:[function(t,e,i){+function(t){"use strict";function e(e,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},i.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),r=n.attr("href"),o=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}(jQuery)},{}],12:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.popover"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");
i.VERSION="3.3.6",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery)},{}],13:[function(t,e,i){+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new e(this,o)),"string"==typeof i&&r[i]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),r=e.data("target")||e.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(void 0===r[t+1]||e<r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery)},{}],14:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof e&&r[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},i.prototype.activate=function(e,n,r){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var s=n.find("> .active"),a=r&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var r=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery)},{}],15:[function(t,e,i){+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tooltip"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",h="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var r=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,l=h.test(a);l&&(a=a.replace(h,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),u=o[0].offsetWidth,f=o[0].offsetHeight;if(l){var d=a,p=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+f>p.bottom?"top":"top"==a&&c.top-f<p.top?"bottom":"right"==a&&c.right+u>p.width?"left":"left"==a&&c.left-u<p.left?"right":a,o.removeClass(d).addClass(a)}var g=this.getCalculatedOffset(a,c,u,f);this.applyPlacement(g,a);var v=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var h=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=o&&(e.top=e.top+o-l);var c=this.getViewportAdjustedDelta(i,e,h,l);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(i),f=u?2*c.left-r+h:2*c.top-o+l,d=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(f,n[0][d],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,r=i.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=n?{top:0,left:0}:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,a,o)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,h=e.top+o-s.scroll+n;a<s.top?r.top=s.top-a:h>s.top+s.height&&(r.top=s.top+s.height-h)}else{var l=e.left-o,c=e.left+o+i;l<s.left?r.left=s.left-l:c>s.right&&(r.left=s.left+s.width-c)}return r},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery)},{}],16:[function(t,e,i){+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery)},{}],17:[function(t,e,i){},{}],18:[function(t,e,i){(function(e){"use strict";function n(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):h(this,t)):arguments.length>1?new o(t,arguments[1]):new o(t)}function s(t,e){if(t=g(t,0>e?0:0|v(e)),!o.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function a(t,e,i){"string"==typeof i&&""!==i||(i="utf8");var n=0|y(e,i);return t=g(t,n),t.write(e,i),t}function h(t,e){if(o.isBuffer(e))return l(t,e);if(K(e))return c(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return u(t,e);if(e instanceof ArrayBuffer)return f(t,e)}return e.length?d(t,e):p(t,e)}function l(t,e){var i=0|v(e.length);return t=g(t,i),e.copy(t,0,0,i),t}function c(t,e){var i=0|v(e.length);t=g(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function u(t,e){var i=0|v(e.length);t=g(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function f(t,e){return e.byteLength,o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):t=u(t,new Uint8Array(e)),t}function d(t,e){var i=0|v(e.length);t=g(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function p(t,e){var i,n=0;"Buffer"===e.type&&K(e.data)&&(i=e.data,n=0|v(i.length)),t=g(t,n);for(var r=0;n>r;r+=1)t[r]=255&i[r];return t}function g(t,e){o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):t.length=e;var i=0!==e&&e<=o.poolSize>>>1;return i&&(t.parent=J),t}function v(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function m(t,e){if(!(this instanceof m))return new m(t,e);var i=new o(t,e);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return G(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function b(t,e,i){var n=!1;if(e=0|e,i=void 0===i||i===1/0?this.length:0|i,t||(t="utf8"),0>e&&(e=0),i>this.length&&(i=this.length),e>=i)return"";for(;;)switch(t){case"hex":return I(this,e,i);case"utf8":case"utf-8":return E(this,e,i);case"ascii":return k(this,e,i);case"binary":return j(this,e,i);case"base64":return O(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[i+s]=a}return s}function x(t,e,i,n){return z(Y(e,t.length-i),t,i,n)}function w(t,e,i,n){return z($(e),t,i,n)}function C(t,e,i,n){return w(t,e,i,n)}function S(t,e,i,n){return z(G(e),t,i,n)}function T(t,e,i,n){return z(U(e,t.length-i),t,i,n)}function O(t,e,i){return 0===e&&i===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(e,i))}function E(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;i>r;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i>=r+a){var h,l,c,u;switch(a){case 1:128>o&&(s=o);break;case 2:h=t[r+1],128===(192&h)&&(u=(31&o)<<6|63&h,u>127&&(s=u));break;case 3:h=t[r+1],l=t[r+2],128===(192&h)&&128===(192&l)&&(u=(15&o)<<12|(63&h)<<6|63&l,u>2047&&(55296>u||u>57343)&&(s=u));break;case 4:h=t[r+1],l=t[r+2],c=t[r+3],128===(192&h)&&128===(192&l)&&128===(192&c)&&(u=(15&o)<<18|(63&h)<<12|(63&l)<<6|63&c,u>65535&&1114112>u&&(s=u))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),r+=a}return A(n)}function A(t){var e=t.length;if(Q>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=Q));return i}function k(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;i>r;r++)n+=String.fromCharCode(127&t[r]);return n}function j(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;i>r;r++)n+=String.fromCharCode(t[r]);return n}function I(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var r="",o=e;i>o;o++)r+=X(t[o]);return r}function M(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function P(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,i,n,r,s){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>r||s>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range")}function L(t,e,i,n){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);o>r;r++)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function R(t,e,i,n){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);o>r;r++)t[i+r]=e>>>8*(n?r:3-r)&255}function N(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function B(t,e,i,n,r){return r||N(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,i,n,23,4),i+4}function F(t,e,i,n,r){return r||N(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,i,n,52,8),i+8}function H(t){if(t=W(t).replace(Z,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function W(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function X(t){return 16>t?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var i,n=t.length,r=null,o=[],s=0;n>s;s++){if(i=t.charCodeAt(s),i>55295&&57344>i){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(56320>i){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,128>i){if((e-=1)<0)break;o.push(i)}else if(2048>i){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function $(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}function U(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);s++)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}function G(t){return q.toByteArray(H(t))}function z(t,e,i,n){for(var r=0;n>r&&!(r+i>=e.length||r>=t.length);r++)e[r+i]=t[r];return r}var q=t("base64-js"),V=t("ieee754"),K=t("isarray");i.Buffer=o,i.SlowBuffer=m,i.INSPECT_MAX_BYTES=50,o.poolSize=8192;var J={};o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),o._augment=function(t){return t.__proto__=o.prototype,t},o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);s>r&&t[r]===e[r];)++r;return r!==s&&(i=t[r],n=e[r]),n>i?-1:i>n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!K(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new o(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=new o(e),r=0;for(i=0;i<t.length;i++){var s=t[i];s.copy(n,r),r+=s.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):b.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:o.compare(this,t)},o.prototype.indexOf=function(t,e){function i(t,e,i){for(var n=-1,r=0;i+r<t.length;r++)if(t[i+r]===e[-1===n?0:r-n]){if(-1===n&&(n=r),r-n+1===e.length)return i+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(o.isBuffer(t))return i(this,t,e);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):i(this,[t],e);throw new TypeError("val must be string, number or Buffer")},o.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0);else{var r=n;n=e,e=0|i,i=r}var o=this.length-e;if((void 0===i||i>o)&&(i=o),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":return w(this,t,e,i);case"binary":return C(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),t>e&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=o.prototype;else{var r=e-t;n=new o(r,void 0);for(var s=0;r>s;s++)n[s]=this[s+t]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||P(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},o.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||P(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},o.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||P(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||P(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),V.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),V.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),V.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),V.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||D(this,t,e,i,Math.pow(2,8*i),0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},o.prototype.writeUIntBE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||D(this,t,e,i,Math.pow(2,8*i),0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},o.prototype.writeUInt8=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);D(this,t,e,i,r-1,-r)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<i&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+i},o.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);D(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e=0|e,i||D(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,i){return B(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return B(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return F(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return F(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&e>i&&n>e)for(r=s-1;r>=0;r--)t[r+e]=this[r+i];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(r=0;s>r;r++)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},o.prototype.fill=function(t,e,i){if(t||(t=0),e||(e=0),i||(i=this.length),e>i)throw new RangeError("end < start");if(i!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;i>n;n++)this[n]=t;else{var r=Y(t.toString()),o=r.length;for(n=e;i>n;n++)this[n]=r[n%o]}return this}};var Z=/[^+\/0-9A-Za-z-_]/g;
}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":19,ieee754:20,isarray:21}],19:[function(t,e,i){!function(t){"use strict";function e(t){var e=c[t.charCodeAt(0)];return void 0!==e?e:-1}function i(t){function i(t){h[c++]=t}var n,r,o,s,a,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;a="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,h=new u(3*t.length/4-a),o=a>0?t.length-4:t.length;var c=0;for(n=0,r=0;o>n;n+=4,r+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&s)>>16),i((65280&s)>>8),i(255&s);return 2===a?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&s)):1===a&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(s>>8&255),i(255&s)),h}function n(t){return l[t]}function r(t){return n(t>>18&63)+n(t>>12&63)+n(t>>6&63)+n(63&t)}function o(t,e,i){for(var n,o=[],s=e;i>s;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(r(n));return o.join("")}function s(t){var e,i,r,s=t.length%3,a="",h=[],l=16383;for(e=0,r=t.length-s;r>e;e+=l)h.push(o(t,e,e+l>r?r:e+l));switch(s){case 1:i=t[t.length-1],a+=n(i>>2),a+=n(i<<4&63),a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=n(i>>10),a+=n(i>>4&63),a+=n(i<<2&63),a+="="}return h.push(a),h.join("")}var a,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=[];for(a=0;a<h.length;a++)l[a]=h[a];var c=[];for(a=0;a<h.length;++a)c[h.charCodeAt(a)]=a;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63;var u="undefined"!=typeof Uint8Array?Uint8Array:Array;t.toByteArray=i,t.fromByteArray=s}("undefined"==typeof i?this.base64js={}:i)},{}],20:[function(t,e,i){i.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,h=(1<<a)-1,l=h>>1,c=-7,u=i?r-1:0,f=i?-1:1,d=t[e+u];for(u+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+u],u+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+u],u+=f,c-=8);if(0===o)o=1-l;else{if(o===h)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,n),o-=l}return(d?-1:1)*s*Math.pow(2,o-n)},i.write=function(t,e,i,n,r,o){var s,a,h,l=8*o-r-1,c=(1<<l)-1,u=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),e+=s+u>=1?f/h:f*Math.pow(2,1-u),e*h>=2&&(s++,h/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(e*h-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[i+d]=255&s,d+=p,s/=256,l-=8);t[i+d-p]|=128*g}},{}],21:[function(t,e,i){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],22:[function(t,e,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,i,n,o,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],a(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(s(i))for(o=Array.prototype.slice.call(arguments,1),l=i.slice(),n=l.length,h=0;n>h;h++)l[h].apply(this,o);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var n=!1;return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var i,n,o,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],o=i.length,n=-1,i===e||r(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(i)){for(a=o;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){n=a;break}if(0>n)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],r(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],23:[function(t,e,i){var n=t("http"),r=e.exports;for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);r.request=function(t,e){return t||(t={}),t.scheme="https",t.protocol="https:",n.request.call(this,t,e)}},{http:46}],24:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],25:[function(t,e,i){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],26:[function(t,e,i){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],27:[function(t,e,i){function n(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,h=e.exports={},l=[],c=!1,u=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new o(t,e)),1!==l.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],28:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(P[t])}function o(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function s(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(M,".");var r=t.split("."),s=o(r,e).join(".");return n+s}function a(t){for(var e,i,n=[],r=0,o=t.length;o>r;)e=t.charCodeAt(r++),e>=55296&&56319>=e&&o>r?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=R(t>>>10&1023|55296),t=56320|1023&t),e+=R(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function c(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function u(t,e,i){var n=0;for(t=i?L(t/O):t>>1,t+=L(t/e);t>D*S>>1;n+=w)t=L(t/D);return L(n+(D+1)*t/(t+T))}function f(t){var e,i,n,o,s,a,c,f,d,p,g=[],v=t.length,m=0,y=A,b=E;for(i=t.lastIndexOf(k),0>i&&(i=0),n=0;i>n;++n)t.charCodeAt(n)>=128&&r("not-basic"),g.push(t.charCodeAt(n));for(o=i>0?i+1:0;v>o;){for(s=m,a=1,c=w;o>=v&&r("invalid-input"),f=l(t.charCodeAt(o++)),(f>=w||f>L((x-m)/a))&&r("overflow"),m+=f*a,d=b>=c?C:c>=b+S?S:c-b,!(d>f);c+=w)p=w-d,a>L(x/p)&&r("overflow"),a*=p;e=g.length+1,b=u(m-s,e,0==s),L(m/e)>x-y&&r("overflow"),y+=L(m/e),m%=e,g.splice(m++,0,y)}return h(g)}function d(t){var e,i,n,o,s,h,l,f,d,p,g,v,m,y,b,_=[];for(t=a(t),v=t.length,e=A,i=0,s=E,h=0;v>h;++h)g=t[h],128>g&&_.push(R(g));for(n=o=_.length,o&&_.push(k);v>n;){for(l=x,h=0;v>h;++h)g=t[h],g>=e&&l>g&&(l=g);for(m=n+1,l-e>L((x-i)/m)&&r("overflow"),i+=(l-e)*m,e=l,h=0;v>h;++h)if(g=t[h],e>g&&++i>x&&r("overflow"),g==e){for(f=i,d=w;p=s>=d?C:d>=s+S?S:d-s,!(p>f);d+=w)b=f-p,y=w-p,_.push(R(c(p+b%y,0))),f=L(b/y);_.push(R(c(f,0))),s=u(i,m,n==o),i=0,++n}++i,++e}return _.join("")}function p(t){return s(t,function(t){return j.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return I.test(t)?"xn--"+d(t):t})}var v="object"==typeof i&&i&&!i.nodeType&&i,m="object"==typeof e&&e&&!e.nodeType&&e,y="object"==typeof t&&t;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var b,_,x=2147483647,w=36,C=1,S=26,T=38,O=700,E=72,A=128,k="-",j=/^xn--/,I=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=w-C,L=Math.floor,R=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:a,encode:h},decode:f,encode:d,toASCII:g,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(v&&m)if(e.exports==v)m.exports=b;else for(_ in b)b.hasOwnProperty(_)&&(v[_]=b[_]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;l>c;++c){var u,f,d,p,g=t[c].replace(a,"%20"),v=g.indexOf(i);v>=0?(u=g.substr(0,v),f=g.substr(v+1)):(u=g,f=""),d=decodeURIComponent(u),p=decodeURIComponent(f),n(s,d)?r(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],30:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(r(s))+i;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],31:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":29,"./encode":30}],32:[function(t,e,i){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":33}],33:[function(t,e,i){"use strict";function n(t){return this instanceof n?(l.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new n(t)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};e.exports=n;var a=t("process-nextick-args"),h=t("core-util-is");h.inherits=t("inherits");var l=t("./_stream_readable"),c=t("./_stream_writable");h.inherits(n,l);for(var u=s(c.prototype),f=0;f<u.length;f++){var d=u[f];n.prototype[d]||(n.prototype[d]=c.prototype[d])}},{"./_stream_readable":35,"./_stream_writable":37,"core-util-is":38,inherits:24,"process-nextick-args":39}],34:[function(t,e,i){"use strict";function n(t){return this instanceof n?void r.call(this,t):new n(t)}e.exports=n;var r=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(n,r),n.prototype._transform=function(t,e,i){i(null,t)}},{"./_stream_transform":36,"core-util-is":38,inherits:24}],35:[function(t,e,i){(function(i){"use strict";function n(e,i){D=D||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,i instanceof D&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(P||(P=t("string_decoder/").StringDecoder),this.decoder=new P(e.encoding),this.encoding=e.encoding)}function r(e){return D=D||t("./_stream_duplex"),this instanceof r?(this._readableState=new n(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void A.call(this)):new r(e)}function o(t,e,i,n,r){var o=l(e,i);if(o)t.emit("error",o);else if(null===i)e.reading=!1,c(t,e);else if(e.objectMode||i&&i.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||n||(i=e.decoder.write(i)),r||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&u(t)),d(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){return t>=L?t=L:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function h(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var i=null;return E.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}function c(t,e){if(!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,u(t)}}function u(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(I("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?T(f,t):f(t))}function f(t){I("emit readable"),t.emit("readable"),b(t)}function d(t,e){e.readingMore||(e.readingMore=!0,T(p,t,e))}function p(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(I("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;I("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&k(t,"data")&&(e.flowing=!0,b(t))}}function v(t){I("readable nexttick read 0"),t.read(0)}function m(t,e){e.resumeScheduled||(e.resumeScheduled=!0,T(y,t,e))}function y(t,e){e.reading||(I("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;if(I("flow",e.flowing),e.flowing)do var i=t.read();while(null!==i&&e.flowing)}function _(t,e){var i,n=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===r)i=null;else if(s)i=n.shift();else if(!t||t>=r)i=o?n.join(""):1===n.length?n[0]:E.concat(n,r),n.length=0;else if(t<n[0].length){var a=n[0];i=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)i=n.shift();else{i=o?"":new E(t);for(var h=0,l=0,c=n.length;c>l&&t>h;l++){var a=n[0],u=Math.min(t-h,a.length);o?i+=a.slice(0,u):a.copy(i,h,0,u),u<a.length?n[0]=a.slice(u):n.shift(),h+=u}}return i}function x(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,T(w,e,t))}function w(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function C(t,e){for(var i=0,n=t.length;n>i;i++)e(t[i],i)}function S(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}e.exports=r;var T=t("process-nextick-args"),O=t("isarray"),E=t("buffer").Buffer;r.ReadableState=n;var A,k=(t("events"),function(t,e){return t.listeners(e).length});!function(){try{A=t("stream")}catch(e){}finally{A||(A=t("events").EventEmitter)}}();var E=t("buffer").Buffer,j=t("core-util-is");j.inherits=t("inherits");var I,M=t("util");I=M&&M.debuglog?M.debuglog("stream"):function(){};var P;j.inherits(r,A);var D,D;r.prototype.push=function(t,e){var i=this._readableState;return i.objectMode||"string"!=typeof t||(e=e||i.defaultEncoding,e!==i.encoding&&(t=new E(t,e),e="")),o(this,i,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.isPaused=function(){return this._readableState.flowing===!1},r.prototype.setEncoding=function(e){return P||(P=t("string_decoder/").StringDecoder),this._readableState.decoder=new P(e),this._readableState.encoding=e,this};var L=8388608;r.prototype.read=function(t){I("read",t);var e=this._readableState,i=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return I("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?x(this):u(this),null;if(t=h(t,e),0===t&&e.ended)return 0===e.length&&x(this),null;var n=e.needReadable;I("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,I("length less than watermark",n)),(e.ended||e.reading)&&(n=!1,I("reading or ended",n)),n&&(I("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=h(i,e));var r;return r=t>0?_(t,e):null,null===r&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),i!==t&&e.ended&&0===e.length&&x(this),null!==r&&this.emit("data",r),r},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,e){function n(t){I("onunpipe"),t===u&&o()}function r(){I("onend"),t.end()}function o(){I("cleanup"),t.removeListener("close",h),t.removeListener("finish",l),t.removeListener("drain",v),t.removeListener("error",a),t.removeListener("unpipe",n),u.removeListener("end",r),u.removeListener("end",o),u.removeListener("data",s),m=!0,!f.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){I("ondata");var i=t.write(e);!1===i&&(1!==f.pipesCount||f.pipes[0]!==t||1!==u.listenerCount("data")||m||(I("false write response, pause",u._readableState.awaitDrain),u._readableState.awaitDrain++),u.pause())}function a(e){I("onerror",e),c(),t.removeListener("error",a),0===k(t,"error")&&t.emit("error",e)}function h(){t.removeListener("finish",l),c()}function l(){I("onfinish"),t.removeListener("close",h),c()}function c(){I("unpipe"),u.unpipe(t)}var u=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,I("pipe count=%d opts=%j",f.pipesCount,e);var d=(!e||e.end!==!1)&&t!==i.stdout&&t!==i.stderr,p=d?r:o;f.endEmitted?T(p):u.once("end",p),t.on("unpipe",n);var v=g(u);t.on("drain",v);var m=!1;return u.on("data",s),t._events&&t._events.error?O(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",h),t.once("finish",l),t.emit("pipe",u),f.flowing||(I("pipe resume"),u.resume()),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;n>r;r++)i[r].emit("unpipe",this);return this}var r=S(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,e){var i=A.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&u(this,n):T(v,this))}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var t=this._readableState;return t.flowing||(I("resume"),t.flowing=!0,m(this,t)),this},r.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var e=this._readableState,i=!1,n=this;t.on("end",function(){if(I("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(r){if(I("wrapped data"),e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){var o=n.push(r);o||(i=!0,t.pause())}});for(var r in t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return C(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){I("wrapped _read",e),i&&(i=!1,t.resume())},n},r._fromList=_}).call(this,t("_process"))},{"./_stream_duplex":33,_process:27,buffer:18,"core-util-is":38,events:22,inherits:24,isarray:26,"process-nextick-args":39,"string_decoder/":52,util:17}],36:[function(t,e,i){"use strict";function n(t){this.afterTransform=function(e,i){return r(t,e,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,i){var n=t._transformState;n.transforming=!1;var r=n.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==i&&void 0!==i&&t.push(i),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new n(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var i=t._writableState,n=t._transformState;if(i.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var a=t("./_stream_duplex"),h=t("core-util-is");h.inherits=t("inherits"),h.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("not implemented")},o.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":33,"core-util-is":38,inherits:24}],37:[function(t,e,i){"use strict";function n(){}function r(t,e,i){this.chunk=t,this.encoding=e,this.callback=i,this.next=null}function o(e,i){E=E||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,i instanceof E&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function s(e){return E=E||t("./_stream_duplex"),this instanceof s||this instanceof E?(this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void T.call(this)):new s(e)}function a(t,e){var i=new Error("write after end");t.emit("error",i),w(e,i)}function h(t,e,i,n){var r=!0;if(!C.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!e.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");t.emit("error",o),w(n,o),r=!1}return r}function l(t,e,i){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new C(e,i)),e}function c(t,e,i,n,o){i=l(e,i,n),C.isBuffer(i)&&(n="buffer");var s=e.objectMode?1:i.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest=new r(i,n,o),h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest}else u(t,e,!1,s,i,n,o);return a}function u(t,e,i,n,r,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function f(t,e,i,n,r){--e.pendingcb,i?w(r,n):r(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(d(i),e)f(t,i,n,e,r);else{var o=y(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||m(t,i),n?w(g,t,i,o,r):g(t,i,o,r)}}function g(t,e,i,n){i||v(t,e),e.pendingcb--,n(),_(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){for(var n=[],r=[];i;)r.push(i.callback),n.push(i),i=i.next;e.pendingcb++,e.lastBufferedRequest=null,u(t,e,!0,e.length,n,"",function(t){for(var i=0;i<r.length;i++)e.pendingcb--,r[i](t)})}else{for(;i;){var o=i.chunk,s=i.encoding,a=i.callback,h=e.objectMode?1:o.length;if(u(t,e,!1,h,o,s,a),i=i.next,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function y(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function _(t,e){var i=y(e);return i&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),i}function x(t,e,i){e.ending=!0,_(t,e),i&&(e.finished?w(i):t.once("finish",i)),e.ended=!0}e.exports=s;var w=t("process-nextick-args"),C=t("buffer").Buffer;s.WritableState=o;var S=t("core-util-is");S.inherits=t("inherits");var T,O={deprecate:t("util-deprecate")};!function(){try{T=t("stream")}catch(e){}finally{T||(T=t("events").EventEmitter)}}();var C=t("buffer").Buffer;S.inherits(s,T);var E;o.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(o.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var E;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(t,e,i){var r=this._writableState,o=!1;return"function"==typeof e&&(i=e,e=null),C.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=n),r.ended?a(this,i):h(this,r,t,i)&&(r.pendingcb++,o=c(this,r,t,e,i)),o},s.prototype.cork=function(){var t=this._writableState;t.corked++},s.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||m(this,t))},s.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t},s.prototype._write=function(t,e,i){i(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||x(this,n,i)}},{"./_stream_duplex":33,buffer:18,"core-util-is":38,events:22,inherits:24,"process-nextick-args":39,"util-deprecate":40}],38:[function(t,e,i){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function n(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function h(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return"[object RegExp]"===v(t)}function u(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===v(t)}function d(t){return"[object Error]"===v(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(t){return Object.prototype.toString.call(t)}i.isArray=e,i.isBoolean=n,i.isNull=r,i.isNullOrUndefined=o,i.isNumber=s,i.isString=a,i.isSymbol=h,i.isUndefined=l,i.isRegExp=c,i.isObject=u,i.isDate=f,i.isError=d,i.isFunction=p,i.isPrimitive=g,i.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":25}],39:[function(t,e,i){(function(t){"use strict";function i(e){for(var i=new Array(arguments.length-1),n=0;n<i.length;)i[n++]=arguments[n];t.nextTick(function(){e.apply(null,i)})}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=i:e.exports=t.nextTick}).call(this,t("_process"))},{_process:27}],40:[function(t,e,i){(function(t){function i(t,e){function i(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),
r=!0}return t.apply(this,arguments)}if(n("noDeprecation"))return t;var r=!1;return i}function n(e){try{if(!t.localStorage)return!1}catch(i){return!1}var n=t.localStorage[e];return null==n?!1:"true"===String(n).toLowerCase()}e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(t,e,i){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":34}],42:[function(t,e,i){var n=function(){try{return t("stream")}catch(e){}}();i=e.exports=t("./lib/_stream_readable.js"),i.Stream=n||i,i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":33,"./lib/_stream_passthrough.js":34,"./lib/_stream_readable.js":35,"./lib/_stream_transform.js":36,"./lib/_stream_writable.js":37}],43:[function(t,e,i){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":36}],44:[function(t,e,i){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":37}],45:[function(t,e,i){function n(){r.call(this)}e.exports=n;var r=t("events").EventEmitter,o=t("inherits");o(n,r),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function i(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(h(),0===r.listenerCount(this,"error"))throw t}function h(){l.removeListener("data",i),t.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",s),l.removeListener("error",a),t.removeListener("error",a),l.removeListener("end",h),l.removeListener("close",h),t.removeListener("close",h)}var l=this;l.on("data",i),t.on("drain",n),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",s));var c=!1;return l.on("error",a),t.on("error",a),l.on("end",h),l.on("close",h),t.on("close",h),t.emit("pipe",l),t}},{events:22,inherits:24,"readable-stream/duplex.js":32,"readable-stream/passthrough.js":41,"readable-stream/readable.js":42,"readable-stream/transform.js":43,"readable-stream/writable.js":44}],46:[function(t,e,i){(function(e){var n=t("./lib/request"),r=t("xtend"),o=t("builtin-status-codes"),s=t("url"),a=i;a.request=function(t,i){t="string"==typeof t?s.parse(t):r(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||o,h=t.hostname||t.host,l=t.port,c=t.path||"/";h&&-1!==h.indexOf(":")&&(h="["+h+"]"),t.url=(h?a+"//"+h:"")+(l?":"+l:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var u=new n(t);return i&&u.on("response",i),u},a.get=function(t,e){var i=a.request(t,e);return i.end(),i},a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.STATUS_CODES=o,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":48,"builtin-status-codes":50,url:53,xtend:55}],47:[function(t,e,i){(function(t){function e(t){try{return o.responseType=t,o.responseType===t}catch(e){}return!1}function n(t){return"function"==typeof t}i.fetch=n(t.fetch)&&n(t.ReadableByteStream),i.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),i.blobConstructor=!0}catch(r){}var o=new t.XMLHttpRequest;o.open("GET",t.location.host?"/":"https://example.com");var s="undefined"!=typeof t.ArrayBuffer,a=s&&n(t.ArrayBuffer.prototype.slice);i.arraybuffer=s&&e("arraybuffer"),i.msstream=!i.fetch&&a&&e("ms-stream"),i.mozchunkedarraybuffer=!i.fetch&&s&&e("moz-chunked-arraybuffer"),i.overrideMimeType=n(o.overrideMimeType),i.vbArray=n(t.VBArray),o=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(t,e,i){(function(i,n,r){function o(t){return a.fetch?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&t?"arraybuffer":a.vbArray&&t?"text:vbarray":"text"}function s(t){try{var e=t.status;return null!==e&&0!==e}catch(i){return!1}}var a=t("./capability"),h=t("inherits"),l=t("./response"),c=t("stream"),u=t("to-arraybuffer"),f=l.IncomingMessage,d=l.readyStates,p=e.exports=function(t){var e=this;c.Writable.call(e),e._opts=t,e._body=[],e._headers={},t.auth&&e.setHeader("Authorization","Basic "+new r(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(i){e.setHeader(i,t.headers[i])});var i;if("prefer-streaming"===t.mode)i=!1;else if("allow-wrong-content-type"===t.mode)i=!a.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");i=!0}e._mode=o(i),e.on("finish",function(){e._onFinish()})};h(p,c.Writable),p.prototype.setHeader=function(t,e){var i=this,n=t.toLowerCase();-1===g.indexOf(n)&&(i._headers[n]={name:t,value:e})},p.prototype.getHeader=function(t){var e=this;return e._headers[t.toLowerCase()].value},p.prototype.removeHeader=function(t){var e=this;delete e._headers[t.toLowerCase()]},p.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e,o=t._opts,s=t._headers;if("POST"!==o.method&&"PUT"!==o.method&&"PATCH"!==o.method||(e=a.blobConstructor?new n.Blob(t._body.map(function(t){return u(t)}),{type:(s["content-type"]||{}).value||""}):r.concat(t._body).toString()),"fetch"===t._mode){var h=Object.keys(s).map(function(t){return[s[t].name,s[t].value]});n.fetch(t._opts.url,{method:t._opts.method,headers:h,body:e,mode:"cors",credentials:o.withCredentials?"include":"same-origin"}).then(function(e){t._fetchResponse=e,t._connect()},function(e){t.emit("error",e)})}else{var l=t._xhr=new n.XMLHttpRequest;try{l.open(t._opts.method,t._opts.url,!0)}catch(c){return void i.nextTick(function(){t.emit("error",c)})}"responseType"in l&&(l.responseType=t._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!o.withCredentials),"text"===t._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(s).forEach(function(t){l.setRequestHeader(s[t].name,s[t].value)}),t._response=null,l.onreadystatechange=function(){switch(l.readyState){case d.LOADING:case d.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(l.onprogress=function(){t._onXHRProgress()}),l.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{l.send(e)}catch(c){return void i.nextTick(function(){t.emit("error",c)})}}}},p.prototype._onXHRProgress=function(){var t=this;s(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},p.prototype._connect=function(){var t=this;t._destroyed||(t._response=new f(t._xhr,t._fetchResponse,t._mode),t.emit("response",t._response))},p.prototype._write=function(t,e,i){var n=this;n._body.push(t),i()},p.prototype.abort=p.prototype.destroy=function(){var t=this;t._destroyed=!0,t._response&&(t._response._destroyed=!0),t._xhr&&t._xhr.abort()},p.prototype.end=function(t,e,i){var n=this;"function"==typeof t&&(i=t,t=void 0),c.Writable.prototype.end.call(n,t,e,i)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./capability":47,"./response":49,_process:27,buffer:18,inherits:24,stream:45,"to-arraybuffer":51}],49:[function(t,e,i){(function(e,n,r){var o=t("./capability"),s=t("inherits"),a=t("stream"),h=i.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=i.IncomingMessage=function(t,i,n){function s(){f.read().then(function(t){if(!h._destroyed){if(t.done)return void h.push(null);h.push(new r(t.value)),s()}})}var h=this;if(a.Readable.call(h),h._mode=n,h.headers={},h.rawHeaders=[],h.trailers={},h.rawTrailers=[],h.on("end",function(){e.nextTick(function(){h.emit("close")})}),"fetch"===n){h._fetchResponse=i,h.statusCode=i.status,h.statusMessage=i.statusText;for(var l,c,u=i.headers[Symbol.iterator]();l=(c=u.next()).value,!c.done;)h.headers[l[0].toLowerCase()]=l[1],h.rawHeaders.push(l[0],l[1]);var f=i.body.getReader();s()}else{h._xhr=t,h._pos=0,h.statusCode=t.status,h.statusMessage=t.statusText;var d=t.getAllResponseHeaders().split(/\r?\n/);if(d.forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var i=e[1].toLowerCase();void 0!==h.headers[i]?h.headers[i]+=", "+e[2]:h.headers[i]=e[2],h.rawHeaders.push(e[1],e[2])}}),h._charset="x-user-defined",!o.overrideMimeType){var p=h.rawHeaders["mime-type"];if(p){var g=p.match(/;\s*charset=([^;])(;|$)/);g&&(h._charset=g[1].toLowerCase())}h._charset||(h._charset="utf-8")}}};s(l,a.Readable),l.prototype._read=function(){},l.prototype._onXHRProgress=function(){var t=this,e=t._xhr,i=null;switch(t._mode){case"text:vbarray":if(e.readyState!==h.DONE)break;try{i=new n.VBArray(e.responseBody).toArray()}catch(o){}if(null!==i){t.push(new r(i));break}case"text":try{i=e.responseText}catch(o){t._mode="text:vbarray";break}if(i.length>t._pos){var s=i.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new r(s.length),l=0;l<s.length;l++)a[l]=255&s.charCodeAt(l);t.push(a)}else t.push(s,t._charset);t._pos=i.length}break;case"arraybuffer":if(e.readyState!==h.DONE)break;i=e.response,t.push(new r(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=e.response,e.readyState!==h.LOADING||!i)break;t.push(new r(new Uint8Array(i)));break;case"ms-stream":if(i=e.response,e.readyState!==h.LOADING)break;var c=new n.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(i)}t._xhr.readyState===h.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./capability":47,_process:27,buffer:18,inherits:24,stream:45}],50:[function(t,e,i){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],51:[function(t,e,i){var n=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),i=t.length,r=0;i>r;r++)e[r]=t[r];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:18}],52:[function(t,e,i){function n(t){if(t&&!h(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,h=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=i.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var i=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";t=t.slice(i,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,n=e.charCodeAt(r);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var i=t[t.length-e];if(1==e&&i>>5==6){this.charLength=2;break}if(2>=e&&i>>4==14){this.charLength=3;break}if(3>=e&&i>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var i=this.charReceived,n=this.charBuffer,r=this.encoding;e+=n.slice(0,i).toString(r)}return e}},{buffer:18}],53:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&l.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function o(t){return l.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var h=t("punycode"),l=t("./util");i.parse=r,i.resolve=s,i.resolveObject=a,i.format=o,i.Url=n;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","	"],p=["{","}","|","\\","^","`"].concat(d),g=["'"].concat(p),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=t("querystring");n.prototype.parse=function(t,e,i){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var u=f.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=c.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(i||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===a.substr(0,2);!T||d&&w[d]||(a=a.substr(2),this.slashes=!0)}if(!w[d]&&(T||d&&!C[d])){for(var O=-1,E=0;E<m.length;E++){var A=a.indexOf(m[E]);-1!==A&&(-1===O||O>A)&&(O=A)}var k,j;j=-1===O?a.lastIndexOf("@"):a.lastIndexOf("@",O),-1!==j&&(k=a.slice(0,j),a=a.slice(j+1),this.auth=decodeURIComponent(k)),O=-1;for(var E=0;E<v.length;E++){var A=a.indexOf(v[E]);-1!==A&&(-1===O||O>A)&&(O=A)}-1===O&&(O=a.length),this.host=a.slice(0,O),a=a.slice(O),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var M=this.hostname.split(/\./),E=0,P=M.length;P>E;E++){var D=M[E];if(D&&!D.match(b)){for(var L="",R=0,N=D.length;N>R;R++)L+=D.charCodeAt(R)>127?"x":D[R];if(!L.match(b)){var B=M.slice(0,E),F=M.slice(E+1),H=D.match(_);H&&(B.push(H[1]),F.unshift(H[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=B.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=h.toASCII(this.hostname));var W=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+W,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[p])for(var E=0,P=g.length;P>E;E++){var Y=g[E];if(-1!==a.indexOf(Y)){var $=encodeURIComponent(Y);$===Y&&($=escape(Y)),a=a.split(Y).join($)}}var U=a.indexOf("#");-1!==U&&(this.hash=a.substr(U),a=a.slice(0,U));var G=a.indexOf("?");if(-1!==G?(this.search=a.substr(G),this.query=a.substr(G+1),e&&(this.query=S.parse(this.query)),a=a.slice(0,G)):e&&(this.search="",this.query={}),a&&(this.pathname=a),C[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",z=this.search||"";this.path=W+z}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||C[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+i+s+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(l.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var c=a[h];"protocol"!==c&&(i[c]=t[c])}return C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!C[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var d=u[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||w[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",v=i.search||"";i.path=g+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var m=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=y||m||i.host&&t.pathname,_=b,x=i.pathname&&i.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],S=i.protocol&&!C[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===x[0]?x[0]=i.host:x.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===x[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),i.search=t.search,i.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(S){i.hostname=i.host=x.shift();var T=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;T&&(i.auth=T.shift(),i.host=i.hostname=T.shift())}return i.search=t.search,i.query=t.query,l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var O=x.slice(-1)[0],E=(i.host||t.host||x.length>1)&&("."===O||".."===O)||""===O,A=0,k=x.length;k>=0;k--)O=x[k],"."===O?x.splice(k,1):".."===O?(x.splice(k,1),A++):A&&(x.splice(k,1),A--);if(!b&&!_)for(;A--;A)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),E&&"/"!==x.join("/").substr(-1)&&x.push("");var j=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){i.hostname=i.host=j?"":x.length?x.shift():"";var T=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;T&&(i.auth=T.shift(),i.host=i.hostname=T.shift())}return b=b||i.host&&x.length,b&&!j&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":54,punycode:28,querystring:31}],54:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],55:[function(t,e,i){function n(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)r.call(i,n)&&(t[n]=i[n])}return t}e.exports=n;var r=Object.prototype.hasOwnProperty},{}],56:[function(t,e,i){!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=!!t&&"length"in t&&t.length,i=ot.type(t);return"function"===i||ot.isWindow(t)?!1:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(ot.isFunction(e))return ot.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ot.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(gt.test(e))return ot.filter(e,t,i);e=ot.filter(e,t)}return ot.grep(t,function(t){return Z.call(e,t)>-1!==i})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e={};return ot.each(t.match(xt)||[],function(t,i){e[i]=!0}),e}function s(){V.removeEventListener("DOMContentLoaded",s),t.removeEventListener("load",s),ot.ready()}function a(){this.expando=ot.expando+a.uid++}function h(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(At,"-$&").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Et.test(i)?ot.parseJSON(i):i}catch(r){}Ot.set(t,e,i)}else i=void 0;return i}function l(t,e,i,n){var r,o=1,s=20,a=n?function(){return n.cur()}:function(){return ot.css(t,e,"")},h=a(),l=i&&i[3]||(ot.cssNumber[e]?"":"px"),c=(ot.cssNumber[e]||"px"!==l&&+h)&&jt.exec(ot.css(t,e));if(c&&c[3]!==l){l=l||c[3],i=i||[],c=+h||1;do o=o||".5",c/=o,ot.style(t,e,c+l);while(o!==(o=a()/h)&&1!==o&&--s)}return i&&(c=+c||+h||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=c,n.end=r)),r}function c(t,e){var i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],i):i}function u(t,e){for(var i=0,n=t.length;n>i;i++)Tt.set(t[i],"globalEval",!e||Tt.get(e[i],"globalEval"))}function f(t,e,i,n,r){for(var o,s,a,h,l,f,d=e.createDocumentFragment(),p=[],g=0,v=t.length;v>g;g++)if(o=t[g],o||0===o)if("object"===ot.type(o))ot.merge(p,o.nodeType?[o]:o);else if(Nt.test(o)){for(s=s||d.appendChild(e.createElement("div")),a=(Dt.exec(o)||["",""])[1].toLowerCase(),h=Rt[a]||Rt._default,s.innerHTML=h[1]+ot.htmlPrefilter(o)+h[2],f=h[0];f--;)s=s.lastChild;ot.merge(p,s.childNodes),s=d.firstChild,s.textContent=""}else p.push(e.createTextNode(o));for(d.textContent="",g=0;o=p[g++];)if(n&&ot.inArray(o,n)>-1)r&&r.push(o);else if(l=ot.contains(o.ownerDocument,o),s=c(d.appendChild(o),"script"),l&&u(s),i)for(f=0;o=s[f++];)Lt.test(o.type||"")&&i.push(o);return d}function d(){return!0}function p(){return!1}function g(){try{return V.activeElement}catch(t){}}function v(t,e,i,n,r,o){var s,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)v(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=p;else if(!r)return t;return 1===o&&(s=r,r=function(t){return ot().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=ot.guid++)),t.each(function(){ot.event.add(this,e,r,n,i)})}function m(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function b(t){var e=$t.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function _(t,e){var i,n,r,o,s,a,h,l;if(1===e.nodeType){if(Tt.hasData(t)&&(o=Tt.access(t),s=Tt.set(e,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(i=0,n=l[r].length;n>i;i++)ot.event.add(e,r,l[r][i])}Ot.hasData(t)&&(a=Ot.access(t),h=ot.extend({},a),Ot.set(e,h))}}function x(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Pt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function w(t,e,i,n){e=J.apply([],e);var r,o,s,a,h,l,u=0,d=t.length,p=d-1,g=e[0],v=ot.isFunction(g);if(v||d>1&&"string"==typeof g&&!nt.checkClone&&Yt.test(g))return t.each(function(r){var o=t.eq(r);v&&(e[0]=g.call(this,r,o.html())),w(o,e,i,n)});if(d&&(r=f(e,t[0].ownerDocument,!1,t,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(s=ot.map(c(r,"script"),y),a=s.length;d>u;u++)h=r,u!==p&&(h=ot.clone(h,!0,!0),a&&ot.merge(s,c(h,"script"))),i.call(t[u],h,u);if(a)for(l=s[s.length-1].ownerDocument,ot.map(s,b),u=0;a>u;u++)h=s[u],Lt.test(h.type||"")&&!Tt.access(h,"globalEval")&&ot.contains(l,h)&&(h.src?ot._evalUrl&&ot._evalUrl(h.src):ot.globalEval(h.textContent.replace(Ut,"")))}return t}function C(t,e,i){for(var n,r=e?ot.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||ot.cleanData(c(n)),n.parentNode&&(i&&ot.contains(n.ownerDocument,n)&&u(c(n,"script")),n.parentNode.removeChild(n));return t}function S(t,e){var i=ot(e.createElement(t)).appendTo(e.body),n=ot.css(i[0],"display");return i.detach(),n}function T(t){var e=V,i=zt[t];return i||(i=S(t,e),"none"!==i&&i||(Gt=(Gt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Gt[0].contentDocument,e.write(),e.close(),i=S(t,e),Gt.detach()),zt[t]=i),i}function O(t,e,i){var n,r,o,s,a=t.style;return i=i||Kt(t),s=i?i.getPropertyValue(e)||i[e]:void 0,""!==s&&void 0!==s||ot.contains(t.ownerDocument,t)||(s=ot.style(t,e)),i&&!nt.pixelMarginRight()&&Vt.test(s)&&qt.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function E(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function A(t){if(t in ne)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ie.length;i--;)if(t=ie[i]+e,t in ne)return t}function k(t,e,i){var n=jt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function j(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===i&&(s+=ot.css(t,i+It[o],!0,r)),n?("content"===i&&(s-=ot.css(t,"padding"+It[o],!0,r)),"margin"!==i&&(s-=ot.css(t,"border"+It[o]+"Width",!0,r))):(s+=ot.css(t,"padding"+It[o],!0,r),"padding"!==i&&(s+=ot.css(t,"border"+It[o]+"Width",!0,r)));return s}function I(e,i,n){var r=!0,o="width"===i?e.offsetWidth:e.offsetHeight,s=Kt(e),a="border-box"===ot.css(e,"boxSizing",!1,s);if(V.msFullscreenElement&&t.top!==t&&e.getClientRects().length&&(o=Math.round(100*e.getBoundingClientRect()[i])),0>=o||null==o){if(o=O(e,i,s),(0>o||null==o)&&(o=e.style[i]),Vt.test(o))return o;r=a&&(nt.boxSizingReliable()||o===e.style[i]),o=parseFloat(o)||0}return o+j(e,i,n||(a?"border":"content"),r,s)+"px"}function M(t,e){for(var i,n,r,o=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(o[s]=Tt.get(n,"olddisplay"),i=n.style.display,e?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Mt(n)&&(o[s]=Tt.access(n,"olddisplay",T(n.nodeName)))):(r=Mt(n),"none"===i&&r||Tt.set(n,"olddisplay",r?i:ot.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[s]||"":"none"));return t}function P(t,e,i,n,r){return new P.prototype.init(t,e,i,n,r)}function D(){return t.setTimeout(function(){re=void 0}),re=ot.now()}function L(t,e){var i,n=0,r={height:t};for(e=e?1:0;4>n;n+=2-e)i=It[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function R(t,e,i){for(var n,r=(F.tweeners[e]||[]).concat(F.tweeners["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,e,t))return n}function N(t,e,i){var n,r,o,s,a,h,l,c,u=this,f={},d=t.style,p=t.nodeType&&Mt(t),g=Tt.get(t,"fxshow");i.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],l=ot.css(t,"display"),c="none"===l?Tt.get(t,"olddisplay")||T(t.nodeName):l,"inline"===c&&"none"===ot.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],se.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;p=!0}f[n]=g&&g[n]||ot.style(t,n)}else l=void 0;if(ot.isEmptyObject(f))"inline"===("none"===l?T(t.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(p=g.hidden):g=Tt.access(t,"fxshow",{}),o&&(g.hidden=!p),p?ot(t).show():u.done(function(){ot(t).hide()}),u.done(function(){var e;Tt.remove(t,"fxshow");for(e in f)ot.style(t,e,f[e])});for(n in f)s=R(p?g[n]:0,n,u),n in g||(g[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function B(t,e){var i,n,r,o,s;for(i in t)if(n=ot.camelCase(i),r=e[n],o=t[i],ot.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),s=ot.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function F(t,e,i){var n,r,o=0,s=F.prefilters.length,a=ot.Deferred().always(function(){
delete h.elem}),h=function(){if(r)return!1;for(var e=re||D(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,o=1-n,s=0,h=l.tweens.length;h>s;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,i]),1>o&&h?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{},easing:ot.easing._default},i),originalProperties:e,originalOptions:i,startTime:re||D(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ot.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)l.tweens[i].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(B(c,l.opts.specialEasing);s>o;o++)if(n=F.prefilters[o].call(l,t,c,l.opts))return ot.isFunction(n.stop)&&(ot._queueHooks(l.elem,l.opts.queue).stop=ot.proxy(n.stop,n)),n;return ot.map(c,R,l),ot.isFunction(l.opts.start)&&l.opts.start.call(t,l),ot.fx.timer(ot.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function H(t){return t.getAttribute&&t.getAttribute("class")||""}function W(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(xt)||[];if(ot.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function X(t,e,i,n){function r(a){var h;return o[a]=!0,ot.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||s||o[l]?s?!(h=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),h}var o={},s=t===Te;return r(e.dataTypes[0])||!o["*"]&&r("*")}function Y(t,e){var i,n,r=ot.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&ot.extend(!0,t,n),t}function $(t,e,i){for(var n,r,o,s,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){h.unshift(r);break}if(h[0]in i)o=h[0];else{for(r in i){if(!h[0]||t.converters[r+" "+h[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==h[0]&&h.unshift(o),i[o]):void 0}function U(t,e,i,n){var r,o,s,a,h,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=c.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(s=l[h+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[h+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function G(t,e,i,n){var r;if(ot.isArray(e))ot.each(e,function(e,r){i||ke.test(t)?n(t,r):G(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)});else if(i||"object"!==ot.type(e))n(t,e);else for(r in e)G(t+"["+r+"]",e[r],i,n)}function z(t){return ot.isWindow(t)?t:9===t.nodeType&&t.defaultView}var q=[],V=t.document,K=q.slice,J=q.concat,Q=q.push,Z=q.indexOf,tt={},et=tt.toString,it=tt.hasOwnProperty,nt={},rt="2.2.1",ot=function(t,e){return new ot.fn.init(t,e)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,ht=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:rt,constructor:ot,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ot.each(this,t)},map:function(t){return this.pushStack(ot.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:q.sort,splice:q.splice},ot.extend=ot.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||ot.isFunction(s)||(s={}),a===h&&(s=this,a--);h>a;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(l&&n&&(ot.isPlainObject(n)||(r=ot.isArray(n)))?(r?(r=!1,o=i&&ot.isArray(i)?i:[]):o=i&&ot.isPlainObject(i)?i:{},s[e]=ot.extend(l,o,n)):void 0!==n&&(s[e]=n));return s},ot.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!ot.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){return"object"!==ot.type(t)||t.nodeType||ot.isWindow(t)?!1:!t.constructor||it.call(t.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=ot.trim(t),t&&(1===t.indexOf("use strict")?(e=V.createElement("script"),e.text=t,V.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(at,"ms-").replace(ht,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;n>r&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(st,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ot.merge(n,"string"==typeof t?[t]:t):Q.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:Z.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],o=0,s=t.length,a=!i;s>o;o++)n=!e(t[o],o),n!==a&&r.push(t[o]);return r},map:function(t,e,n){var r,o,s=0,a=[];if(i(t))for(r=t.length;r>s;s++)o=e(t[s],s,n),null!=o&&a.push(o);else for(s in t)o=e(t[s],s,n),null!=o&&a.push(o);return J.apply([],a)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(i=t[e],e=t,t=i),ot.isFunction(t)?(n=K.call(arguments,2),r=function(){return t.apply(e||this,n.concat(K.call(arguments)))},r.guid=t.guid=t.guid||ot.guid++,r):void 0},now:Date.now,support:nt}),"function"==typeof Symbol&&(ot.fn[Symbol.iterator]=q[Symbol.iterator]),ot.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,i,n){var r,o,s,a,h,l,u,d,p=e&&e.ownerDocument,g=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return i;if(!n&&((e?e.ownerDocument||e:H)!==M&&I(e),e=e||M,D)){if(11!==g&&(l=mt.exec(t)))if(r=l[1]){if(9===g){if(!(s=e.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(p&&(s=p.getElementById(r))&&B(e,s)&&s.id===r)return i.push(s),i}else{if(l[2])return Q.apply(i,e.getElementsByTagName(t)),i;if((r=l[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Q.apply(i,e.getElementsByClassName(r)),i}if(x.qsa&&!U[t+" "]&&(!L||!L.test(t))){if(1!==g)p=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,"\\$&"):e.setAttribute("id",a=F),u=T(t),o=u.length,h=ft.test(a)?"#"+a:"[id='"+a+"']";o--;)u[o]=h+" "+f(u[o]);d=u.join(","),p=yt.test(t)&&c(e.parentNode)||e}if(d)try{return Q.apply(i,p.querySelectorAll(d)),i}catch(v){}finally{a===F&&e.removeAttribute("id")}}}return E(t.replace(at,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>w.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function r(t){var e=M.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||z)-(~t.sourceIndex||z);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function f(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=X++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,s){var a,h,l,c=[W,o];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[F]||(e[F]={}),h=l[e.uniqueID]||(l[e.uniqueID]={}),(a=h[n])&&a[0]===W&&a[1]===o)return c[2]=a[2];if(h[n]=c,c[2]=t(e,i,s))return!0}}}function p(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var r=0,o=i.length;o>r;r++)e(t,i[r],n);return n}function v(t,e,i,n,r){for(var o,s=[],a=0,h=t.length,l=null!=e;h>a;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),l&&e.push(a)));return s}function m(t,e,i,r,o,s){return r&&!r[F]&&(r=m(r)),o&&!o[F]&&(o=m(o,s)),n(function(n,s,a,h){var l,c,u,f=[],d=[],p=s.length,m=n||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?m:v(m,f,t,a,h),b=i?o||(n?t:p||r)?[]:s:y;if(i&&i(y,b,a,h),r)for(l=v(b,d),r(l,[],a,h),c=l.length;c--;)(u=l[c])&&(b[d[c]]=!(y[d[c]]=u));if(n){if(o||t){if(o){for(l=[],c=b.length;c--;)(u=b[c])&&l.push(y[c]=u);o(null,b=[],l,h)}for(c=b.length;c--;)(u=b[c])&&(l=o?tt(n,u):f[c])>-1&&(n[l]=!(s[l]=u))}}else b=v(b===s?b.splice(p,b.length):b),o?o(null,s,b,h):Q.apply(s,b)})}function y(t){for(var e,i,n,r=t.length,o=w.relative[t[0].type],s=o||w.relative[" "],a=o?1:0,h=d(function(t){return t===e},s,!0),l=d(function(t){return tt(e,t)>-1},s,!0),c=[function(t,i,n){var r=!o&&(n||i!==A)||((e=i).nodeType?h(t,i,n):l(t,i,n));return e=null,r}];r>a;a++)if(i=w.relative[t[a].type])c=[d(p(c),i)];else{if(i=w.filter[t[a].type].apply(null,t[a].matches),i[F]){for(n=++a;r>n&&!w.relative[t[n].type];n++);return m(a>1&&p(c),a>1&&f(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),i,n>a&&y(t.slice(a,n)),r>n&&y(t=t.slice(n)),r>n&&f(t))}c.push(i)}return p(c)}function b(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,h,l){var c,u,f,d=0,p="0",g=n&&[],m=[],y=A,b=n||o&&w.find.TAG("*",l),_=W+=null==y?1:Math.random()||.1,x=b.length;for(l&&(A=s===M||s||l);p!==x&&null!=(c=b[p]);p++){if(o&&c){for(u=0,s||c.ownerDocument===M||(I(c),a=!D);f=t[u++];)if(f(c,s||M,a)){h.push(c);break}l&&(W=_)}r&&((c=!f&&c)&&d--,n&&g.push(c))}if(d+=p,r&&p!==d){for(u=0;f=i[u++];)f(g,m,s,a);if(n){if(d>0)for(;p--;)g[p]||m[p]||(m[p]=K.call(h));m=v(m)}Q.apply(h,m),l&&!n&&m.length>0&&d+i.length>1&&e.uniqueSort(h)}return l&&(W=_,A=y),g};return r?n(s):s}var _,x,w,C,S,T,O,E,A,k,j,I,M,P,D,L,R,N,B,F="sizzle"+1*new Date,H=t.document,W=0,X=0,Y=i(),$=i(),U=i(),G=function(t,e){return t===e&&(j=!0),0},z=1<<31,q={}.hasOwnProperty,V=[],K=V.pop,J=V.push,Q=V.push,Z=V.slice,tt=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",ot=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp(it+"+","g"),at=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ht=new RegExp("^"+it+"*,"+it+"*"),lt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ut=new RegExp(ot),ft=new RegExp("^"+nt+"$"),dt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},wt=function(){I()};try{Q.apply(V=Z.call(H.childNodes),H.childNodes),V[H.childNodes.length].nodeType}catch(Ct){Q={apply:V.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},I=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:H;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,P=M.documentElement,D=!S(M),(i=M.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",wt,!1):i.attachEvent&&i.attachEvent("onunload",wt)),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(M.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(M.getElementsByClassName),x.getById=r(function(t){return P.appendChild(t).id=F,!M.getElementsByName||!M.getElementsByName(F).length}),x.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&D){var i=e.getElementById(t);return i?[i]:[]}},w.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},w.find.CLASS=x.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&D?e.getElementsByClassName(t):void 0},R=[],L=[],(x.qsa=vt.test(M.querySelectorAll))&&(r(function(t){P.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+F+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||L.push(".#.+[+~]")}),r(function(t){var e=M.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=vt.test(N=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(t){x.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),R.push("!=",ot)}),L=L.length&&new RegExp(L.join("|")),R=R.length&&new RegExp(R.join("|")),e=vt.test(P.compareDocumentPosition),B=e||vt.test(P.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return j=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!x.sortDetached&&e.compareDocumentPosition(t)===i?t===M||t.ownerDocument===H&&B(H,t)?-1:e===M||e.ownerDocument===H&&B(H,e)?1:k?tt(k,t)-tt(k,e):0:4&i?-1:1)}:function(t,e){if(t===e)return j=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],h=[e];if(!r||!o)return t===M?-1:e===M?1:r?-1:o?1:k?tt(k,t)-tt(k,e):0;if(r===o)return s(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;a[n]===h[n];)n++;return n?s(a[n],h[n]):a[n]===H?-1:h[n]===H?1:0},M):M},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==M&&I(t),i=i.replace(ct,"='$1']"),x.matchesSelector&&D&&!U[i+" "]&&(!R||!R.test(i))&&(!L||!L.test(i)))try{var n=N.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&I(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&I(t);var i=w.attrHandle[e.toLowerCase()],n=i&&q.call(w.attrHandle,e.toLowerCase())?i(t,e,!D):void 0;return void 0!==n?n:x.attributes||!D?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(j=!x.detectDuplicates,k=!x.sortStable&&t.slice(0),t.sort(G),j){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return k=null,t},C=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=C(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=C(e);return i},w=e.selectors={cacheLength:50,createPseudo:n,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ut.test(i)&&(e=T(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Y[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&Y(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(st," ")+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,h){var l,c,u,f,d,p,g=o!==s?"nextSibling":"previousSibling",v=e.parentNode,m=a&&e.nodeName.toLowerCase(),y=!h&&!a,b=!1;if(v){if(o){for(;g;){for(f=e;f=f[g];)if(a?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(f=v,u=f[F]||(f[F]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),l=c[t]||[],d=l[0]===W&&l[1],b=d&&l[2],f=d&&v.childNodes[d];f=++d&&f&&f[g]||(b=d=0)||p.pop();)if(1===f.nodeType&&++b&&f===e){c[t]=[W,d,b];break}}else if(y&&(f=e,u=f[F]||(f[F]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),l=c[t]||[],d=l[0]===W&&l[1],b=d),b===!1)for(;(f=++d&&f&&f[g]||(b=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&(u=f[F]||(f[F]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),c[t]=[W,b]),f!==e)););return b-=r,b===n||b%n===0&&b/n>=0}}},PSEUDO:function(t,i){var r,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(i):o.length>1?(r=[t,t,"",i],w.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=tt(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=O(t.replace(at,"$1"));return r[F]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(_t,xt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return ft.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,xt).toLowerCase(),function(e){var i;do if(i=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})w.pseudos[_]=h(_);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,T=e.tokenize=function(t,i){var n,r,o,s,a,h,l,c=$[t+" "];if(c)return i?0:c.slice(0);for(a=t,h=[],l=w.preFilter;a;){n&&!(r=ht.exec(a))||(r&&(a=a.slice(r[0].length)||a),h.push(o=[])),n=!1,(r=lt.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(at," ")}),a=a.slice(n.length));for(s in w.filter)!(r=dt[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):$(t,h).slice(0)},O=e.compile=function(t,e){var i,n=[],r=[],o=U[t+" "];if(!o){for(e||(e=T(t)),i=e.length;i--;)o=y(e[i]),o[F]?n.push(o):r.push(o);o=U(t,b(r,n)),o.selector=t}return o},E=e.select=function(t,e,i,n){var r,o,s,a,h,l="function"==typeof t&&t,u=!n&&T(t=l.selector||t);if(i=i||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===e.nodeType&&D&&w.relative[o[1].type]){if(e=(w.find.ID(s.matches[0].replace(_t,xt),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=dt.needsContext.test(t)?0:o.length;r--&&(s=o[r],!w.relative[a=s.type]);)if((h=w.find[a])&&(n=h(s.matches[0].replace(_t,xt),yt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),t=n.length&&f(o),!t)return Q.apply(i,n),i;break}}return(l||O(t,u))(n,e,!D,i,!e||yt.test(t)&&c(e.parentNode)||e),i},x.sortStable=F.split("").sort(G).join("")===F,x.detectDuplicates=!!j,I(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.uniqueSort=ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ut=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&ot(t).is(i))break;n.push(t)}return n},ft=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},dt=ot.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,gt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ot.find.matchesSelector(n,t)?[n]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;i>e;e++)if(ot.contains(r[e],this))return!0}));for(e=0;i>e;e++)ot.find(t,r[e],n);return n=this.pushStack(i>1?ot.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&dt.test(t)?ot(t):t||[],!1).length}});var vt,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,yt=ot.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||vt,"string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:mt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:V,!0)),pt.test(n[1])&&ot.isPlainObject(e))for(n in e)ot.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=V.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=V,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?void 0!==i.ready?i.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};yt.prototype=ot.fn,vt=ot(V);var bt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};ot.fn.extend({has:function(t){var e=ot(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(ot.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],s=dt.test(t)||"string"!=typeof t?ot(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?ot.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?Z.call(ot(t),this[0]):Z.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.uniqueSort(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ut(t,"parentNode")},parentsUntil:function(t,e,i){return ut(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return ut(t,"nextSibling")},prevAll:function(t){return ut(t,"previousSibling")},nextUntil:function(t,e,i){return ut(t,"nextSibling",i)},prevUntil:function(t,e,i){return ut(t,"previousSibling",i)},siblings:function(t){return ft((t.parentNode||{}).firstChild,t)},children:function(t){return ft(t.firstChild)},contents:function(t){return t.contentDocument||ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(i,n){var r=ot.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=ot.filter(n,r)),this.length>1&&(_t[t]||ot.uniqueSort(r),bt.test(t)&&r.reverse()),this.pushStack(r)}});var xt=/\S+/g;ot.Callbacks=function(t){t="string"==typeof t?o(t):ot.extend({},t);var e,i,n,r,s=[],a=[],h=-1,l=function(){for(r=t.once,n=e=!0;a.length;h=-1)for(i=a.shift();++h<s.length;)s[h].apply(i[0],i[1])===!1&&t.stopOnFalse&&(h=s.length,i=!1);t.memory||(i=!1),e=!1,r&&(s=i?[]:"")},c={add:function(){return s&&(i&&!e&&(h=s.length-1,a.push(i)),function n(e){ot.each(e,function(e,i){ot.isFunction(i)?t.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==ot.type(i)&&n(i)})}(arguments),i&&!e&&l()),this},remove:function(){return ot.each(arguments,function(t,e){for(var i;(i=ot.inArray(e,s,i))>-1;)s.splice(i,1),h>=i&&h--}),this},has:function(t){return t?ot.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=a=[],i||(s=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=i||[],i=[t,i.slice?i.slice():i],a.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(i){ot.each(e,function(e,o){var s=ot.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,n):n}},r={};return n.pipe=n.then,ot.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,o=K.call(arguments),s=o.length,a=1!==s||t&&ot.isFunction(t.promise)?s:0,h=1===a?t:ot.Deferred(),l=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?K.call(arguments):r,n===e?h.notifyWith(i,n):--a||h.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)o[r]&&ot.isFunction(o[r].promise)?o[r].promise().progress(l(r,i,e)).done(l(r,n,o)).fail(h.reject):--a;return a||h.resolveWith(n,o),h.promise()}});var wt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){(t===!0?--ot.readyWait:ot.isReady)||(ot.isReady=!0,t!==!0&&--ot.readyWait>0||(wt.resolveWith(V,[ot]),
ot.fn.triggerHandler&&(ot(V).triggerHandler("ready"),ot(V).off("ready"))))}}),ot.ready.promise=function(e){return wt||(wt=ot.Deferred(),"complete"===V.readyState||"loading"!==V.readyState&&!V.documentElement.doScroll?t.setTimeout(ot.ready):(V.addEventListener("DOMContentLoaded",s),t.addEventListener("load",s))),wt.promise(e)},ot.ready.promise();var Ct=function(t,e,i,n,r,o,s){var a=0,h=t.length,l=null==i;if("object"===ot.type(i)){r=!0;for(a in i)Ct(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,ot.isFunction(n)||(s=!0),l&&(s?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(ot(t),i)})),e))for(;h>a;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:l?e.call(t):h?e(t[0],i):o},St=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};a.uid=1,a.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!St(t))return{};var e=t[this.expando];return e||(e={},St(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[e]=i;else for(n in e)r[n]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,ot.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{ot.isArray(e)?n=e.concat(e.map(ot.camelCase)):(r=ot.camelCase(e),e in o?n=[e,r]:(n=r,n=n in o?[n]:n.match(xt)||[])),i=n.length;for(;i--;)delete o[n[i]]}(void 0===e||ot.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ot.isEmptyObject(e)}};var Tt=new a,Ot=new a,Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,At=/[A-Z]/g;ot.extend({hasData:function(t){return Ot.hasData(t)||Tt.hasData(t)},data:function(t,e,i){return Ot.access(t,e,i)},removeData:function(t,e){Ot.remove(t,e)},_data:function(t,e,i){return Tt.access(t,e,i)},_removeData:function(t,e){Tt.remove(t,e)}}),ot.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=Ot.get(o),1===o.nodeType&&!Tt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),h(o,n,r[n])));Tt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Ot.set(this,t)}):Ct(this,function(e){var i,n;if(o&&void 0===e){if(i=Ot.get(o,t)||Ot.get(o,t.replace(At,"-$&").toLowerCase()),void 0!==i)return i;if(n=ot.camelCase(t),i=Ot.get(o,n),void 0!==i)return i;if(i=h(o,n,void 0),void 0!==i)return i}else n=ot.camelCase(t),this.each(function(){var i=Ot.get(this,n);Ot.set(this,n,e),t.indexOf("-")>-1&&void 0!==i&&Ot.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ot.remove(this,t)})}}),ot.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=Tt.get(t,e),i&&(!n||ot.isArray(i)?n=Tt.access(t,e,ot.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=ot.queue(t,e),n=i.length,r=i.shift(),o=ot._queueHooks(t,e),s=function(){ot.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Tt.get(t,i)||Tt.access(t,i,{empty:ot.Callbacks("once memory").add(function(){Tt.remove(t,[e+"queue",i])})})}}),ot.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ot.queue(this[0],t):void 0===e?this:this.each(function(){var i=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=ot.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=Tt.get(o[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,jt=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),It=["Top","Right","Bottom","Left"],Mt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Pt=/^(?:checkbox|radio)$/i,Dt=/<([\w:-]+)/,Lt=/^$|\/(?:java|ecma)script/i,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td;var Nt=/<|&#?\w+;/;!function(){var t=V.createDocumentFragment(),e=t.appendChild(V.createElement("div")),i=V.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Bt=/^key/,Ft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ht=/^([^.]*)(?:\.(.+)|)/;ot.event={global:{},add:function(t,e,i,n,r){var o,s,a,h,l,c,u,f,d,p,g,v=Tt.get(t);if(v)for(i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=ot.guid++),(h=v.events)||(h=v.events={}),(s=v.handle)||(s=v.handle=function(e){return"undefined"!=typeof ot&&ot.event.triggered!==e.type?ot.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(xt)||[""],l=e.length;l--;)a=Ht.exec(e[l])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(u=ot.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=ot.event.special[d]||{},c=ot.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&ot.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=h[d])||(f=h[d]=[],f.delegateCount=0,u.setup&&u.setup.call(t,n,p,s)!==!1||t.addEventListener&&t.addEventListener(d,s)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),ot.event.global[d]=!0)},remove:function(t,e,i,n,r){var o,s,a,h,l,c,u,f,d,p,g,v=Tt.hasData(t)&&Tt.get(t);if(v&&(h=v.events)){for(e=(e||"").match(xt)||[""],l=e.length;l--;)if(a=Ht.exec(e[l])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(u=ot.event.special[d]||{},d=(n?u.delegateType:u.bindType)||d,f=h[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!r&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(t,c));s&&!f.length&&(u.teardown&&u.teardown.call(t,p,v.handle)!==!1||ot.removeEvent(t,d,v.handle),delete h[d])}else for(d in h)ot.event.remove(t,d+e[l],i,n,!0);ot.isEmptyObject(h)&&Tt.remove(t,"handle events")}},dispatch:function(t){t=ot.event.fix(t);var e,i,n,r,o,s=[],a=K.call(arguments),h=(Tt.get(this,"events")||{})[t.type]||[],l=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(s=ot.event.handlers.call(this,t,h),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,n=((ot.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,h=t.target;if(a&&h.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&(h.disabled!==!0||"click"!==t.type)){for(n=[],i=0;a>i;i++)o=e[i],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?ot(r,this).index(h)>-1:ot.find(r,this,null,[h]).length),n[r]&&n.push(o);n.length&&s.push({elem:h,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||V,n=i.documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[ot.expando])return t;var e,i,n,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ft.test(r)?this.mouseHooks:Bt.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new ot.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=V),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ot.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ot.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={constructor:ot.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||ot.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ot.fn.extend({on:function(t,e,i,n){return v(this,t,e,i,n)},one:function(t,e,i,n){return v(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ot(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=p),this.each(function(){ot.event.remove(this,t,i,e)})}});var Wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Xt=/<script|<style|<link/i,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ot.extend({htmlPrefilter:function(t){return t.replace(Wt,"<$1></$2>")},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),h=ot.contains(t.ownerDocument,t);if(!(nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(s=c(a),o=c(t),n=0,r=o.length;r>n;n++)x(o[n],s[n]);if(e)if(i)for(o=o||c(t),s=s||c(a),n=0,r=o.length;r>n;n++)_(o[n],s[n]);else _(t,a);return s=c(a,"script"),s.length>0&&u(s,!h&&c(t,"script")),a},cleanData:function(t){for(var e,i,n,r=ot.event.special,o=0;void 0!==(i=t[o]);o++)if(St(i)){if(e=i[Tt.expando]){if(e.events)for(n in e.events)r[n]?ot.event.remove(i,n):ot.removeEvent(i,n,e.handle);i[Tt.expando]=void 0}i[Ot.expando]&&(i[Ot.expando]=void 0)}}}),ot.fn.extend({domManip:w,detach:function(t){return C(this,t,!0)},remove:function(t){return C(this,t)},text:function(t){return Ct(this,function(t){return void 0===t?ot.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.appendChild(t)}})},prepend:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ot.cleanData(c(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return Ct(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Xt.test(t)&&!Rt[(Dt.exec(t)||["",""])[1].toLowerCase()]){t=ot.htmlPrefilter(t);try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(ot.cleanData(c(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return w(this,arguments,function(e){var i=this.parentNode;ot.inArray(this,t)<0&&(ot.cleanData(c(this)),i&&i.replaceChild(e,this))},t)}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var i,n=[],r=ot(t),o=r.length-1,s=0;o>=s;s++)i=s===o?this:this.clone(!0),ot(r[s])[e](i),Q.apply(n,i.get());return this.pushStack(n)}});var Gt,zt={HTML:"block",BODY:"block"},qt=/^margin/,Vt=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),Kt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Jt=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r},Qt=V.documentElement;!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Qt.appendChild(s);var e=t.getComputedStyle(a);i="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,Qt.removeChild(s)}var i,n,r,o,s=V.createElement("div"),a=V.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),ot.extend(nt,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),r},reliableMarginLeft:function(){return null==n&&e(),o},reliableMarginRight:function(){var e,i=a.appendChild(V.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",Qt.appendChild(s),e=!parseFloat(t.getComputedStyle(i).marginRight),Qt.removeChild(s),a.removeChild(i),e}}))}();var Zt=/^(none|table(?!-c[ea]).+)/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ie=["Webkit","O","Moz","ms"],ne=V.createElement("div").style;ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=O(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=ot.camelCase(e),h=t.style;return e=ot.cssProps[a]||(ot.cssProps[a]=A(a)||a),s=ot.cssHooks[e]||ot.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:h[e]:(o=typeof i,"string"===o&&(r=jt.exec(i))&&r[1]&&(i=l(t,e,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(ot.cssNumber[a]?"":"px")),nt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(h[e]=i)),void 0)}},css:function(t,e,i,n){var r,o,s,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=A(a)||a),s=ot.cssHooks[e]||ot.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=O(t,e,n)),"normal"===r&&e in ee&&(r=ee[e]),""===i||i?(o=parseFloat(r),i===!0||isFinite(o)?o||0:r):r}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,i,n){return i?Zt.test(ot.css(t,"display"))&&0===t.offsetWidth?Jt(t,te,function(){return I(t,e,n)}):I(t,e,n):void 0},set:function(t,i,n){var r,o=n&&Kt(t),s=n&&j(t,e,n,"border-box"===ot.css(t,"boxSizing",!1,o),o);return s&&(r=jt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=ot.css(t,e)),k(t,i,s)}}}),ot.cssHooks.marginLeft=E(nt.reliableMarginLeft,function(t,e){return e?(parseFloat(O(t,"marginLeft"))||t.getBoundingClientRect().left-Jt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),ot.cssHooks.marginRight=E(nt.reliableMarginRight,function(t,e){return e?Jt(t,{display:"inline-block"},O,[t,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+It[n]+e]=o[n]||o[n-2]||o[0];return r}},qt.test(t)||(ot.cssHooks[t+e].set=k)}),ot.fn.extend({css:function(t,e){return Ct(this,function(t,e,i){var n,r,o={},s=0;if(ot.isArray(e)){for(n=Kt(t),r=e.length;r>s;s++)o[e[s]]=ot.css(t,e[s],!1,n);return o}return void 0!==i?ot.style(t,e,i):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Mt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=P,P.prototype={constructor:P,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||ot.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ot.cssNumber[i]?"":"px")},cur:function(){var t=P.propHooks[this.prop];return t&&t.get?t.get(this):P.propHooks._default.get(this)},run:function(t){var e,i=P.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ot.cssProps[t.prop]]&&!ot.cssHooks[t.prop]?t.elem[t.prop]=t.now:ot.style(t.elem,t.prop,t.now+t.unit)}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ot.fx=P.prototype.init,ot.fx.step={};var re,oe,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;ot.Animation=ot.extend(F,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return l(i.elem,t,jt.exec(e),i),i}]},tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.match(xt);for(var i,n=0,r=t.length;r>n;n++)i=t[n],F.tweeners[i]=F.tweeners[i]||[],F.tweeners[i].unshift(e)},prefilters:[N],prefilter:function(t,e){e?F.prefilters.unshift(t):F.prefilters.push(t)}}),ot.speed=function(t,e,i){var n=t&&"object"==typeof t?ot.extend({},t):{complete:i||!i&&e||ot.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ot.isFunction(e)&&e};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Mt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=ot.isEmptyObject(t),o=ot.speed(e,i,n),s=function(){var e=F(this,ot.extend({},t),o);(r||Tt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=ot.timers,s=Tt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ae.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=Tt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=ot.timers,s=n?n.length:0;for(i.finish=!0,ot.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var i=ot.fn[e];ot.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(L(e,!0),t,n,r)}}),ot.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ot.timers=[],ot.fx.tick=function(){var t,e=0,i=ot.timers;for(re=ot.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||ot.fx.stop(),re=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){oe||(oe=t.setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){t.clearInterval(oe),oe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,i){return e=ot.fx?ot.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t=V.createElement("input"),e=V.createElement("select"),i=e.appendChild(V.createElement("option"));t.type="checkbox",nt.checkOn=""!==t.value,nt.optSelected=i.selected,e.disabled=!0,nt.optDisabled=!i.disabled,t=V.createElement("input"),t.value="t",t.type="radio",nt.radioValue="t"===t.value}();var he,le=ot.expr.attrHandle;ot.fn.extend({attr:function(t,e){return Ct(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?ot.prop(t,e,i):(1===o&&ot.isXMLDoc(t)||(e=e.toLowerCase(),r=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?he:void 0)),void 0!==i?null===i?void ot.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=ot.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(xt);if(o&&1===t.nodeType)for(;i=o[r++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)}}),he={set:function(t,e,i){return e===!1?ot.removeAttr(t,i):t.setAttribute(i,i),i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var i=le[e]||ot.find.attr;le[e]=function(t,e,n){var r,o;return n||(o=le[e],le[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,le[e]=o),r}});var ce=/^(?:input|select|textarea|button)$/i,ue=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return Ct(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[ot.propFix[t]||t]})}}),ot.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ot.isXMLDoc(t)||(e=ot.propFix[e]||e,r=ot.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||ue.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),nt.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this});var fe=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,i,n,r,o,s,a,h=0;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,H(this)))});if("string"==typeof t&&t)for(e=t.match(xt)||[];i=this[h++];)if(r=H(i),n=1===i.nodeType&&(" "+r+" ").replace(fe," ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=ot.trim(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,s,a,h=0;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(xt)||[];i=this[h++];)if(r=H(i),n=1===i.nodeType&&(" "+r+" ").replace(fe," ")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=ot.trim(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(i){ot(this).toggleClass(t.call(this,i,H(this),e),e)}):this.each(function(){var e,n,r,o;if("string"===i)for(n=0,r=ot(this),o=t.match(xt)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||(e=H(this),e&&Tt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Tt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+H(i)+" ").replace(fe," ").indexOf(e)>-1)return!0;return!1}});var de=/\r/g;ot.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=ot.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,ot(this).val()):t,null==r?r="":"number"==typeof r?r+="":ot.isArray(r)&&(r=ot.map(r,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=ot.valHooks[r.type]||ot.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(de,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(t){return ot.trim(t.value)}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:n.length,h=0>r?a:o?r:0;a>h;h++)if(i=n[h],(i.selected||h===r)&&(nt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ot.nodeName(i.parentNode,"optgroup"))){if(e=ot(i).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=ot.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=ot.inArray(ot.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){return ot.isArray(e)?t.checked=ot.inArray(ot(t).val(),e)>-1:void 0}},nt.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var pe=/^(?:focusinfocus|focusoutblur)$/;ot.extend(ot.event,{trigger:function(e,i,n,r){var o,s,a,h,l,c,u,f=[n||V],d=it.call(e,"type")?e.type:e,p=it.call(e,"namespace")?e.namespace.split("."):[];if(s=a=n=n||V,3!==n.nodeType&&8!==n.nodeType&&!pe.test(d+ot.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,e=e[ot.expando]?e:new ot.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ot.makeArray(i,[e]),u=ot.event.special[d]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!ot.isWindow(n)){for(h=u.delegateType||d,pe.test(h+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(n.ownerDocument||V)&&f.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=f[o++])&&!e.isPropagationStopped();)e.type=o>1?h:u.bindType||d,c=(Tt.get(s,"events")||{})[e.type]&&Tt.get(s,"handle"),c&&c.apply(s,i),c=l&&s[l],c&&c.apply&&St(s)&&(e.result=c.apply(s,i),e.result===!1&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||u._default&&u._default.apply(f.pop(),i)!==!1||!St(n)||l&&ot.isFunction(n[d])&&!ot.isWindow(n)&&(a=n[l],a&&(n[l]=null),ot.event.triggered=d,n[d](),ot.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(t,e,i){var n=ot.extend(new ot.Event,i,{type:t,isSimulated:!0});ot.event.trigger(n,null,e),n.isDefaultPrevented()&&i.preventDefault()}}),ot.fn.extend({trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?ot.event.trigger(t,e,i,!0):void 0}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),nt.focusin="onfocusin"in t,nt.focusin||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ot.event.simulate(e,t.target,ot.event.fix(t))};ot.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=Tt.access(n,e);r||n.addEventListener(t,i,!0),Tt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Tt.access(n,e)-1;r?Tt.access(n,e,r):(n.removeEventListener(t,i,!0),Tt.remove(n,e))}}});var ge=t.location,ve=ot.now(),me=/\?/;ot.parseJSON=function(t){return JSON.parse(t+"")},ot.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(n){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),i};var ye=/#.*$/,be=/([?&])_=[^&]*/,_e=/^(.*?):[ \t]*([^\r\n]*)$/gm,xe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,we=/^(?:GET|HEAD)$/,Ce=/^\/\//,Se={},Te={},Oe="*/".concat("*"),Ee=V.createElement("a");Ee.href=ge.href,ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ge.href,type:"GET",isLocal:xe.test(ge.protocol),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Y(Y(t,ot.ajaxSettings),e):Y(ot.ajaxSettings,t)},ajaxPrefilter:W(Se),ajaxTransport:W(Te),ajax:function(e,i){function n(e,i,n,a){var l,u,y,b,x,C=i;2!==_&&(_=2,h&&t.clearTimeout(h),r=void 0,s=a||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(b=$(f,w,n)),b=U(f,b,w,l),l?(f.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(ot.lastModified[o]=x),x=w.getResponseHeader("etag"),x&&(ot.etag[o]=x)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=b.state,u=b.data,y=b.error,l=!y)):(y=C,!e&&C||(C="error",0>e&&(e=0))),w.status=e,w.statusText=(i||C)+"",l?g.resolveWith(d,[u,C,w]):g.rejectWith(d,[w,C,y]),w.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,f,l?u:y]),v.fireWith(d,[w,C]),c&&(p.trigger("ajaxComplete",[w,f]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var r,o,s,a,h,l,c,u,f=ot.ajaxSetup({},i),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?ot(d):ot.event,g=ot.Deferred(),v=ot.Callbacks("once memory"),m=f.statusCode||{},y={},b={},_=0,x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=_e.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=b[i]=b[i]||t,y[t]=e),this},overrideMimeType:function(t){return _||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||x;return r&&r.abort(e),n(0,e),this}};if(g.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||ge.href)+"").replace(ye,"").replace(Ce,ge.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=ot.trim(f.dataType||"*").toLowerCase().match(xt)||[""],null==f.crossDomain){l=V.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ee.protocol+"//"+Ee.host!=l.protocol+"//"+l.host}catch(C){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ot.param(f.data,f.traditional)),X(Se,f,i,w),2===_)return w;c=ot.event&&f.global,c&&0===ot.active++&&ot.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!we.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(me.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=be.test(o)?o.replace(be,"$1_="+ve++):o+(me.test(o)?"&":"?")+"_="+ve++)),f.ifModified&&(ot.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&w.setRequestHeader("If-None-Match",ot.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||i.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Oe+"; q=0.01":""):f.accepts["*"]);for(u in f.headers)w.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(f.beforeSend.call(d,w,f)===!1||2===_))return w.abort();x="abort";for(u in{success:1,error:1,complete:1})w[u](f[u]);if(r=X(Te,f,i,w)){if(w.readyState=1,c&&p.trigger("ajaxSend",[w,f]),2===_)return w;f.async&&f.timeout>0&&(h=t.setTimeout(function(){w.abort("timeout")},f.timeout));try{_=1,r.send(y,n)}catch(C){if(!(2>_))throw C;n(-1,C)}}else n(-1,"No Transport");return w},getJSON:function(t,e,i){return ot.get(t,e,i,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,i,n,r){return ot.isFunction(i)&&(r=r||n,n=i,i=void 0),ot.ajax(ot.extend({url:t,type:e,dataType:r,data:i,success:n},ot.isPlainObject(t)&&t))}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){var e;return ot.isFunction(t)?this.each(function(e){ot(this).wrapAll(t.call(this,e))}):(this[0]&&(e=ot(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(i){ot(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return!ot.expr.filters.visible(t)},ot.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ae=/%20/g,ke=/\[\]$/,je=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var i,n=[],r=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){r(this.name,this.value)});else for(i in t)G(i,t[i],e,r);return n.join("&").replace(Ae,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Me.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!Pt.test(t))}).map(function(t,e){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:i.replace(je,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Pe={0:200,1223:204},De=ot.ajaxSettings.xhr();nt.cors=!!De&&"withCredentials"in De,nt.ajax=De=!!De,ot.ajaxTransport(function(e){var i,n;return nt.cors||De&&!e.crossDomain?{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Pe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(h){if(i)throw h}},abort:function(){i&&i()}}:void 0}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=ot("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),V.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Le=[],Re=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Le.pop()||ot.expando+"_"+ve++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==!1&&(Re.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Re.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Re,"$1"+r):e.jsonp!==!1&&(e.url+=(me.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||ot.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){void 0===o?ot(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Le.push(r)),s&&ot.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),nt.createHTMLDocument=function(){var t=V.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),ot.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||(nt.createHTMLDocument?V.implementation.createHTMLDocument(""):V);var n=pt.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=f([t],e,r),r&&r.length&&ot(r).remove(),ot.merge([],n.childNodes))};var Ne=ot.fn.load;ot.fn.load=function(t,e,i){if("string"!=typeof t&&Ne)return Ne.apply(this,arguments);var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=ot.trim(t.slice(a)),t=t.slice(0,a)),ot.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&ot.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?ot("<div>").append(ot.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(s,o||[t.responseText,e,t])})}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length},ot.offset={setOffset:function(t,e,i){var n,r,o,s,a,h,l,c=ot.css(t,"position"),u=ot(t),f={};"static"===c&&(t.style.position="relative"),a=u.offset(),o=ot.css(t,"top"),h=ot.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+h).indexOf("auto")>-1,l?(n=u.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(h)||0),ot.isFunction(e)&&(e=e.call(t,i,ot.extend({},a))),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+r),"using"in e?e.using.call(t,f):u.css(f)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(o)return e=o.documentElement,ot.contains(e,n)?(r=n.getBoundingClientRect(),i=z(o),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===ot.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(n=t.offset()),n.top+=ot.css(t[0],"borderTopWidth",!0),n.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ot.css(i,"marginTop",!0),left:e.left-n.left-ot.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||Qt})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;ot.fn[t]=function(n){return Ct(this,function(t,n,r){var o=z(t);return void 0===r?o?o[e]:t[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r)},t,n,arguments.length)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=E(nt.pixelPosition,function(t,i){return i?(i=O(t,e),Vt.test(i)?ot(t).position()[e]+"px":i):void 0})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ot.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return Ct(this,function(e,i,n){var r;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?ot.css(e,i,s):ot.style(e,i,n,s)},e,o?n:void 0,o,null)}})}),ot.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var Be=t.jQuery,Fe=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=Fe),e&&t.jQuery===ot&&(t.jQuery=Be),ot},e||(t.jQuery=t.$=ot),ot})},{}],57:[function(t,e,i){(function(t){(function(){function n(t,e){if(t!==e){var i=null===t,n=t===T,r=t===t,o=null===e,s=e===T,a=e===e;if(t>e&&!o||!r||i&&!s&&a||n&&a)return 1;if(e>t&&!i||!a||o&&!n&&r||s&&r)return-1}return 0}function r(t,e,i){for(var n=t.length,r=i?n:-1;i?r--:++r<n;)if(e(t[r],r,t))return r;return-1}function o(t,e,i){if(e!==e)return v(t,i);for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function s(t){return"function"==typeof t||!1}function a(t){return null==t?"":t+""}function h(t,e){for(var i=-1,n=t.length;++i<n&&e.indexOf(t.charAt(i))>-1;);return i}function l(t,e){for(var i=t.length;i--&&e.indexOf(t.charAt(i))>-1;);return i}function c(t,e){return n(t.criteria,e.criteria)||t.index-e.index}function u(t,e,i){for(var r=-1,o=t.criteria,s=e.criteria,a=o.length,h=i.length;++r<a;){var l=n(o[r],s[r]);if(l){if(r>=h)return l;var c=i[r];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function f(t){return $t[t]}function d(t){return Ut[t]}function p(t,e,i){return e?t=qt[t]:i&&(t=Vt[t]),"\\"+t}function g(t){return"\\"+Vt[t]}function v(t,e,i){for(var n=t.length,r=e+(i?0:-1);i?r--:++r<n;){var o=t[r];if(o!==o)return r}return-1}function m(t){return!!t&&"object"==typeof t}function y(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;)t[i]===e&&(t[i]=$,o[++r]=i);return o}function _(t,e){for(var i,n=-1,r=t.length,o=-1,s=[];++n<r;){var a=t[n],h=e?e(a,n,t):a;n&&i===h||(i=h,s[++o]=a)}return s}function x(t){for(var e=-1,i=t.length;++e<i&&y(t.charCodeAt(e)););return e}function w(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function C(t){return Gt[t]}function S(t){function e(t){if(m(t)&&!ka(t)&&!(t instanceof J)){if(t instanceof y)return t;if(es.call(t,"__chain__")&&es.call(t,"__wrapped__"))return dn(t)}return new y(t)}function i(){}function y(t,e,i){this.__wrapped__=t,this.__actions__=i||[],this.__chain__=!!e}function J(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=As,this.__views__=[]}function et(){var t=new J(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function nt(){if(this.__filtered__){var t=new J(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function $t(){var t=this.__wrapped__.value(),e=this.__dir__,i=ka(t),n=0>e,r=i?t.length:0,o=Ui(0,r,this.__views__),s=o.start,a=o.end,h=a-s,l=n?a:s-1,c=this.__iteratees__,u=c.length,f=0,d=Cs(h,this.__takeCount__);if(!i||H>r||r==h&&d==h)return ii(n&&i?t.reverse():t,this.__actions__);var p=[];t:for(;h--&&d>f;){l+=e;for(var g=-1,v=t[l];++g<u;){var m=c[g],y=m.iteratee,b=m.type,_=y(v);if(b==X)v=_;else if(!_){if(b==W)continue t;break t}}p[f++]=v}return p}function Ut(){this.__data__={}}function Gt(t){return this.has(t)&&delete this.__data__[t]}function zt(t){return"__proto__"==t?T:this.__data__[t]}function qt(t){return"__proto__"!=t&&es.call(this.__data__,t)}function Vt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Kt(t){var e=t?t.length:0;for(this.data={hash:ms(null),set:new us};e--;)this.push(t[e])}function Jt(t,e){var i=t.data,n="string"==typeof e||Dr(e)?i.set.has(e):i.hash[e];return n?0:-1}function Qt(t){var e=this.data;"string"==typeof t||Dr(t)?e.set.add(t):e.hash[t]=!0}function Zt(t,e){for(var i=-1,n=t.length,r=-1,o=e.length,s=Wo(n+o);++i<n;)s[i]=t[i];for(;++r<o;)s[i++]=e[r];return s}function te(t,e){var i=-1,n=t.length;for(e||(e=Wo(n));++i<n;)e[i]=t[i];return e}function ee(t,e){for(var i=-1,n=t.length;++i<n&&e(t[i],i,t)!==!1;);return t}function re(t,e){for(var i=t.length;i--&&e(t[i],i,t)!==!1;);return t}function oe(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function se(t,e,i,n){for(var r=-1,o=t.length,s=n,a=s;++r<o;){var h=t[r],l=+e(h);i(l,s)&&(s=l,a=h)}return a}function ae(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[++r]=s)}return o}function he(t,e){for(var i=-1,n=t.length,r=Wo(n);++i<n;)r[i]=e(t[i],i,t);return r}function le(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function ce(t,e,i,n){var r=-1,o=t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function ue(t,e,i,n){var r=t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function fe(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function de(t,e){for(var i=t.length,n=0;i--;)n+=+e(t[i])||0;return n}function pe(t,e){return t===T?e:t}function ge(t,e,i,n){return t!==T&&es.call(n,i)?t:e}function ve(t,e,i){for(var n=-1,r=Ha(e),o=r.length;++n<o;){var s=r[n],a=t[s],h=i(a,e[s],s,t,e);(h===h?h===a:a!==a)&&(a!==T||s in t)||(t[s]=h)}return t}function me(t,e){return null==e?t:be(e,Ha(e),t)}function ye(t,e){for(var i=-1,n=null==t,r=!n&&Ki(t),o=r?t.length:0,s=e.length,a=Wo(s);++i<s;){var h=e[i];r?a[i]=Ji(h,o)?t[h]:T:a[i]=n?T:t[h]}return a}function be(t,e,i){i||(i={});for(var n=-1,r=e.length;++n<r;){var o=e[n];i[o]=t[o]}return i}function _e(t,e,i){var n=typeof t;return"function"==n?e===T?t:oi(t,e,i):null==t?Ao:"object"==n?Fe(t):e===T?Do(t):He(t,e)}function xe(t,e,i,n,r,o,s){var a;if(i&&(a=r?i(t,n,r):i(t)),a!==T)return a;if(!Dr(t))return t;var h=ka(t);if(h){if(a=Gi(t),!e)return te(t,a)}else{var l=ns.call(t),c=l==K;if(l!=Z&&l!=U&&(!c||r))return Yt[l]?qi(t,l,e):r?t:{};if(a=zi(c?{}:t),!e)return me(a,t)}o||(o=[]),s||(s=[]);for(var u=o.length;u--;)if(o[u]==t)return s[u];return o.push(t),s.push(a),(h?ee:Ie)(t,function(n,r){a[r]=xe(n,e,i,r,t,o,s)}),a}function we(t,e,i){if("function"!=typeof t)throw new Ko(Y);return fs(function(){t.apply(T,i)},e)}function Ce(t,e){var i=t?t.length:0,n=[];if(!i)return n;var r=-1,s=Xi(),a=s==o,h=a&&e.length>=H?pi(e):null,l=e.length;h&&(s=Jt,a=!1,e=h);t:for(;++r<i;){var c=t[r];if(a&&c===c){for(var u=l;u--;)if(e[u]===c)continue t;n.push(c)}else s(e,c,0)<0&&n.push(c)}return n}function Se(t,e){var i=!0;return Rs(t,function(t,n,r){return i=!!e(t,n,r)}),i}function Te(t,e,i,n){var r=n,o=r;return Rs(t,function(t,s,a){var h=+e(t,s,a);(i(h,r)||h===n&&h===o)&&(r=h,o=t)}),o}function Oe(t,e,i,n){var r=t.length;for(i=null==i?0:+i||0,0>i&&(i=-i>r?0:r+i),n=n===T||n>r?r:+n||0,0>n&&(n+=r),r=i>n?0:n>>>0,i>>>=0;r>i;)t[i++]=e;return t}function Ee(t,e){var i=[];return Rs(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function Ae(t,e,i,n){var r;return i(t,function(t,i,o){return e(t,i,o)?(r=n?i:t,!1):void 0}),r}function ke(t,e,i,n){n||(n=[]);for(var r=-1,o=t.length;++r<o;){var s=t[r];m(s)&&Ki(s)&&(i||ka(s)||Tr(s))?e?ke(s,e,i,n):le(n,s):i||(n[n.length]=s)}return n}function je(t,e){return Bs(t,e,to)}function Ie(t,e){return Bs(t,e,Ha)}function Me(t,e){return Fs(t,e,Ha)}function Pe(t,e){for(var i=-1,n=e.length,r=-1,o=[];++i<n;){var s=e[i];Pr(t[s])&&(o[++r]=s)}return o}function De(t,e,i){if(null!=t){i!==T&&i in un(t)&&(e=[i]);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:T}}function Le(t,e,i,n,r,o){return t===e?!0:null==t||null==e||!Dr(t)&&!m(e)?t!==t&&e!==e:Re(t,e,Le,i,n,r,o)}function Re(t,e,i,n,r,o,s){var a=ka(t),h=ka(e),l=G,c=G;a||(l=ns.call(t),l==U?l=Z:l!=Z&&(a=Yr(t))),h||(c=ns.call(e),c==U?c=Z:c!=Z&&(h=Yr(e)));var u=l==Z,f=c==Z,d=l==c;if(d&&!a&&!u)return Bi(t,e,l);if(!r){var p=u&&es.call(t,"__wrapped__"),g=f&&es.call(e,"__wrapped__");if(p||g)return i(p?t.value():t,g?e.value():e,n,r,o,s)}if(!d)return!1;o||(o=[]),s||(s=[]);for(var v=o.length;v--;)if(o[v]==t)return s[v]==e;o.push(t),s.push(e);var m=(a?Ni:Fi)(t,e,i,n,r,o,s);return o.pop(),s.pop(),m}function Ne(t,e,i){var n=e.length,r=n,o=!i;if(null==t)return!r;for(t=un(t);n--;){var s=e[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<r;){s=e[n];var a=s[0],h=t[a],l=s[1];if(o&&s[2]){if(h===T&&!(a in t))return!1}else{var c=i?i(h,l,a):T;if(!(c===T?Le(l,h,i,!0):c))return!1}}return!0}function Be(t,e){var i=-1,n=Ki(t)?Wo(t.length):[];return Rs(t,function(t,r,o){n[++i]=e(t,r,o)}),n}function Fe(t){var e=Yi(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[i]===n&&(n!==T||i in un(t))}}return function(t){return Ne(t,e)}}function He(t,e){var i=ka(t),n=Zi(t)&&nn(e),r=t+"";return t=fn(t),function(o){if(null==o)return!1;var s=r;if(o=un(o),(i||!n)&&!(s in o)){if(o=1==t.length?o:De(o,qe(t,0,-1)),null==o)return!1;s=On(t),o=un(o)}return o[s]===e?e!==T||s in o:Le(e,o[s],T,!0)}}function We(t,e,i,n,r){if(!Dr(t))return t;var o=Ki(e)&&(ka(e)||Yr(e)),s=o?T:Ha(e);return ee(s||e,function(a,h){if(s&&(h=a,a=e[h]),m(a))n||(n=[]),r||(r=[]),Xe(t,e,h,We,i,n,r);else{var l=t[h],c=i?i(l,a,h,t,e):T,u=c===T;u&&(c=a),c===T&&(!o||h in t)||!u&&(c===c?c===l:l!==l)||(t[h]=c)}}),t}function Xe(t,e,i,n,r,o,s){for(var a=o.length,h=e[i];a--;)if(o[a]==h)return void(t[i]=s[a]);var l=t[i],c=r?r(l,h,i,t,e):T,u=c===T;u&&(c=h,Ki(h)&&(ka(h)||Yr(h))?c=ka(l)?l:Ki(l)?te(l):[]:Hr(h)||Tr(h)?c=Tr(l)?qr(l):Hr(l)?l:{}:u=!1),o.push(h),s.push(c),u?t[i]=n(c,h,r,o,s):(c===c?c!==l:l===l)&&(t[i]=c)}function Ye(t){return function(e){return null==e?T:e[t]}}function $e(t){var e=t+"";return t=fn(t),function(i){return De(i,t,e)}}function Ue(t,e){for(var i=t?e.length:0;i--;){var n=e[i];if(n!=r&&Ji(n)){var r=n;ds.call(t,n,1)}}return t}function Ge(t,e){return t+ys(Os()*(e-t+1))}function ze(t,e,i,n,r){return r(t,function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)}),i}function qe(t,e,i){var n=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),i=i===T||i>r?r:+i||0,0>i&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Wo(r);++n<r;)o[n]=t[n+e];return o}function Ve(t,e){var i;return Rs(t,function(t,n,r){return i=e(t,n,r),!i}),!!i}function Ke(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Je(t,e,i){var n=Hi(),r=-1;e=he(e,function(t){return n(t)});var o=Be(t,function(t){var i=he(e,function(e){return e(t)});return{criteria:i,index:++r,value:t}});return Ke(o,function(t,e){return u(t,e,i)})}function Qe(t,e){var i=0;return Rs(t,function(t,n,r){i+=+e(t,n,r)||0}),i}function Ze(t,e){var i=-1,n=Xi(),r=t.length,s=n==o,a=s&&r>=H,h=a?pi():null,l=[];h?(n=Jt,s=!1):(a=!1,h=e?[]:l);t:for(;++i<r;){var c=t[i],u=e?e(c,i,t):c;if(s&&c===c){for(var f=h.length;f--;)if(h[f]===u)continue t;e&&h.push(u),l.push(c)}else n(h,u,0)<0&&((e||a)&&h.push(u),l.push(c))}return l}function ti(t,e){for(var i=-1,n=e.length,r=Wo(n);++i<n;)r[i]=t[e[i]];return r}function ei(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?qe(t,n?0:o,n?o+1:r):qe(t,n?o+1:0,n?r:o)}function ii(t,e){var i=t;i instanceof J&&(i=i.value());for(var n=-1,r=e.length;++n<r;){var o=e[n];i=o.func.apply(o.thisArg,le([i],o.args))}return i}function ni(t,e,i){var n=0,r=t?t.length:n;if("number"==typeof e&&e===e&&Is>=r){for(;r>n;){var o=n+r>>>1,s=t[o];(i?e>=s:e>s)&&null!==s?n=o+1:r=o}return r}return ri(t,e,Ao,i)}function ri(t,e,i,n){e=i(e);for(var r=0,o=t?t.length:0,s=e!==e,a=null===e,h=e===T;o>r;){var l=ys((r+o)/2),c=i(t[l]),u=c!==T,f=c===c;if(s)var d=f||n;else d=a?f&&u&&(n||null!=c):h?f&&(n||u):null==c?!1:n?e>=c:e>c;d?r=l+1:o=l}return Cs(o,js)}function oi(t,e,i){if("function"!=typeof t)return Ao;if(e===T)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,s){return t.call(e,i,n,r,o,s)}}return function(){return t.apply(e,arguments)}}function si(t){var e=new ss(t.byteLength),i=new ps(e);return i.set(new ps(t)),e}function ai(t,e,i){for(var n=i.length,r=-1,o=ws(t.length-n,0),s=-1,a=e.length,h=Wo(a+o);++s<a;)h[s]=e[s];for(;++r<n;)h[i[r]]=t[r];for(;o--;)h[s++]=t[r++];return h}function hi(t,e,i){for(var n=-1,r=i.length,o=-1,s=ws(t.length-r,0),a=-1,h=e.length,l=Wo(s+h);++o<s;)l[o]=t[o];for(var c=o;++a<h;)l[c+a]=e[a];for(;++n<r;)l[c+i[n]]=t[o++];return l}function li(t,e){return function(i,n,r){var o=e?e():{};if(n=Hi(n,r,3),ka(i))for(var s=-1,a=i.length;++s<a;){var h=i[s];t(o,h,n(h,s,i),i)}else Rs(i,function(e,i,r){t(o,e,n(e,i,r),r)});return o}}function ci(t){return mr(function(e,i){var n=-1,r=null==e?0:i.length,o=r>2?i[r-2]:T,s=r>2?i[2]:T,a=r>1?i[r-1]:T;for("function"==typeof o?(o=oi(o,a,5),r-=2):(o="function"==typeof a?a:T,r-=o?1:0),s&&Qi(i[0],i[1],s)&&(o=3>r?T:o,r=1);++n<r;){var h=i[n];h&&t(e,h,o)}return e})}function ui(t,e){return function(i,n){var r=i?Xs(i):0;if(!en(r))return t(i,n);for(var o=e?r:-1,s=un(i);(e?o--:++o<r)&&n(s[o],o,s)!==!1;);return i}}function fi(t){return function(e,i,n){for(var r=un(e),o=n(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var h=o[a];if(i(r[h],h,r)===!1)break}return e}}function di(t,e){function i(){var r=this&&this!==ie&&this instanceof i?n:t;return r.apply(e,arguments)}var n=vi(t);return i}function pi(t){return ms&&us?new Kt(t):null}function gi(t){return function(e){for(var i=-1,n=To(co(e)),r=n.length,o="";++i<r;)o=t(o,n[i],i);return o}}function vi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ls(t.prototype),n=t.apply(i,e);return Dr(n)?n:i}}function mi(t){function e(i,n,r){r&&Qi(i,n,r)&&(n=T);var o=Ri(i,t,T,T,T,T,T,n);return o.placeholder=e.placeholder,o}return e}function yi(t,e){return mr(function(i){var n=i[0];return null==n?n:(i.push(e),t.apply(T,i))})}function bi(t,e){return function(i,n,r){if(r&&Qi(i,n,r)&&(n=T),n=Hi(n,r,3),1==n.length){i=ka(i)?i:cn(i);var o=se(i,n,t,e);if(!i.length||o!==e)return o}return Te(i,n,t,e)}}function _i(t,e){return function(i,n,o){if(n=Hi(n,o,3),ka(i)){var s=r(i,n,e);return s>-1?i[s]:T}return Ae(i,n,t)}}function xi(t){return function(e,i,n){return e&&e.length?(i=Hi(i,n,3),r(e,i,t)):-1}}function wi(t){return function(e,i,n){return i=Hi(i,n,3),Ae(e,i,t,!0)}}function Ci(t){return function(){for(var e,i=arguments.length,n=t?i:-1,r=0,o=Wo(i);t?n--:++n<i;){var s=o[r++]=arguments[n];if("function"!=typeof s)throw new Ko(Y);!e&&y.prototype.thru&&"wrapper"==Wi(s)&&(e=new y([],!0))}for(n=e?-1:i;++n<i;){s=o[n];var a=Wi(s),h="wrapper"==a?Ws(s):T;e=h&&tn(h[0])&&h[1]==(D|j|M|L)&&!h[4].length&&1==h[9]?e[Wi(h[0])].apply(e,h[3]):1==s.length&&tn(s)?e[a]():e.thru(s)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&ka(n)&&n.length>=H)return e.plant(n).value();for(var r=0,s=i?o[r].apply(this,t):n;++r<i;)s=o[r].call(this,s);return s}}}function Si(t,e){return function(i,n,r){return"function"==typeof n&&r===T&&ka(i)?t(i,n):e(i,oi(n,r,3))}}function Ti(t){return function(e,i,n){return"function"==typeof i&&n===T||(i=oi(i,n,3)),t(e,i,to)}}function Oi(t){return function(e,i,n){return"function"==typeof i&&n===T||(i=oi(i,n,3)),t(e,i)}}function Ei(t){return function(e,i,n){var r={};return i=Hi(i,n,3),Ie(e,function(e,n,o){var s=i(e,n,o);n=t?s:n,e=t?e:s,r[n]=e}),r}}function Ai(t){return function(e,i,n){return e=a(e),(t?e:"")+Mi(e,i,n)+(t?"":e)}}function ki(t){var e=mr(function(i,n){var r=b(n,e.placeholder);return Ri(i,t,T,n,r)});return e}function ji(t,e){return function(i,n,r,o){var s=arguments.length<3;return"function"==typeof n&&o===T&&ka(i)?t(i,n,r,s):ze(i,Hi(n,o,4),r,s,e)}}function Ii(t,e,i,n,r,o,s,a,h,l){function c(){for(var y=arguments.length,_=y,x=Wo(y);_--;)x[_]=arguments[_];if(n&&(x=ai(x,n,r)),o&&(x=hi(x,o,s)),p||v){var w=c.placeholder,C=b(x,w);if(y-=C.length,l>y){var S=a?te(a):T,O=ws(l-y,0),k=p?C:T,j=p?T:C,I=p?x:T,D=p?T:x;e|=p?M:P,e&=~(p?P:M),g||(e&=~(E|A));var L=[t,e,i,I,k,D,j,S,h,O],R=Ii.apply(T,L);return tn(t)&&Ys(R,L),R.placeholder=w,R}}var N=f?i:this,B=d?N[t]:t;return a&&(x=hn(x,a)),u&&h<x.length&&(x.length=h),this&&this!==ie&&this instanceof c&&(B=m||vi(t)),B.apply(N,x)}var u=e&D,f=e&E,d=e&A,p=e&j,g=e&k,v=e&I,m=d?T:vi(t);return c}function Mi(t,e,i){var n=t.length;if(e=+e,n>=e||!_s(e))return"";var r=e-n;return i=null==i?" ":i+"",mo(i,vs(r/i.length)).slice(0,r)}function Pi(t,e,i,n){function r(){for(var e=-1,a=arguments.length,h=-1,l=n.length,c=Wo(l+a);++h<l;)c[h]=n[h];for(;a--;)c[h++]=arguments[++e];var u=this&&this!==ie&&this instanceof r?s:t;return u.apply(o?i:this,c)}var o=e&E,s=vi(t);return r}function Di(t){var e=Uo[t];return function(t,i){return i=i===T?0:+i||0,i?(i=ls(10,i),e(t*i)/i):e(t)}}function Li(t){return function(e,i,n,r){var o=Hi(n);return null==n&&o===_e?ni(e,i,t):ri(e,i,o(n,r,1),t)}}function Ri(t,e,i,n,r,o,s,a){var h=e&A;if(!h&&"function"!=typeof t)throw new Ko(Y);var l=n?n.length:0;if(l||(e&=~(M|P),n=r=T),l-=r?r.length:0,e&P){var c=n,u=r;n=r=T}var f=h?T:Ws(t),d=[t,e,i,n,r,c,u,o,s,a];if(f&&(rn(d,f),e=d[1],a=d[9]),d[9]=null==a?h?0:t.length:ws(a-l,0)||0,e==E)var p=di(d[0],d[2]);else p=e!=M&&e!=(E|M)||d[4].length?Ii.apply(T,d):Pi.apply(T,d);var g=f?Hs:Ys;return g(p,d)}function Ni(t,e,i,n,r,o,s){var a=-1,h=t.length,l=e.length;if(h!=l&&!(r&&l>h))return!1;for(;++a<h;){var c=t[a],u=e[a],f=n?n(r?u:c,r?c:u,a):T;if(f!==T){if(f)continue;return!1}if(r){if(!fe(e,function(t){return c===t||i(c,t,n,r,o,s)}))return!1}else if(c!==u&&!i(c,u,n,r,o,s))return!1}return!0}function Bi(t,e,i){switch(i){case z:case q:return+t==+e;case V:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case tt:case it:return t==e+""}return!1}function Fi(t,e,i,n,r,o,s){var a=Ha(t),h=a.length,l=Ha(e),c=l.length;if(h!=c&&!r)return!1;for(var u=h;u--;){var f=a[u];if(!(r?f in e:es.call(e,f)))return!1}for(var d=r;++u<h;){f=a[u];var p=t[f],g=e[f],v=n?n(r?g:p,r?p:g,f):T;if(!(v===T?i(p,g,n,r,o,s):v))return!1;d||(d="constructor"==f)}if(!d){var m=t.constructor,y=e.constructor;if(m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function Hi(t,i,n){var r=e.callback||Oo;return r=r===Oo?_e:r,n?r(t,i,n):r}function Wi(t){for(var e=t.name,i=Ds[e],n=i?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function Xi(t,i,n){var r=e.indexOf||Sn;return r=r===Sn?o:r,t?r(t,i,n):r}function Yi(t){for(var e=eo(t),i=e.length;i--;)e[i][2]=nn(e[i][1]);return e}function $i(t,e){var i=null==t?T:t[e];return Nr(i)?i:T}function Ui(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Cs(e,t+s);break;case"takeRight":t=ws(t,e-s)}}return{start:t,end:e}}function Gi(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&es.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function zi(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=zo),new e}function qi(t,e,i){var n=t.constructor;switch(e){case rt:return si(t);case z:case q:return new n(+t);case ot:case st:case at:case ht:case lt:case ct:case ut:case ft:case dt:var r=t.buffer;return new n(i?si(r):r,t.byteOffset,t.length);case Q:case it:return new n(t);case tt:var o=new n(t.source,Mt.exec(t));o.lastIndex=t.lastIndex}return o}function Vi(t,e,i){null==t||Zi(e,t)||(e=fn(e),t=1==e.length?t:De(t,qe(e,0,-1)),
e=On(e));var n=null==t?t:t[e];return null==n?T:n.apply(t,i)}function Ki(t){return null!=t&&en(Xs(t))}function Ji(t,e){return t="number"==typeof t||Lt.test(t)?+t:-1,e=null==e?Ms:e,t>-1&&t%1==0&&e>t}function Qi(t,e,i){if(!Dr(i))return!1;var n=typeof e;if("number"==n?Ki(i)&&Ji(e,i.length):"string"==n&&e in i){var r=i[e];return t===t?t===r:r!==r}return!1}function Zi(t,e){var i=typeof t;if("string"==i&&Tt.test(t)||"number"==i)return!0;if(ka(t))return!1;var n=!St.test(t);return n||null!=e&&t in un(e)}function tn(t){var i=Wi(t);if(!(i in J.prototype))return!1;var n=e[i];if(t===n)return!0;var r=Ws(n);return!!r&&t===r[0]}function en(t){return"number"==typeof t&&t>-1&&t%1==0&&Ms>=t}function nn(t){return t===t&&!Dr(t)}function rn(t,e){var i=t[1],n=e[1],r=i|n,o=D>r,s=n==D&&i==j||n==D&&i==L&&t[7].length<=e[8]||n==(D|L)&&i==j;if(!o&&!s)return t;n&E&&(t[2]=e[2],r|=i&E?0:k);var a=e[3];if(a){var h=t[3];t[3]=h?ai(h,a,e[4]):te(a),t[4]=h?b(t[3],$):te(e[4])}return a=e[5],a&&(h=t[5],t[5]=h?hi(h,a,e[6]):te(a),t[6]=h?b(t[5],$):te(e[6])),a=e[7],a&&(t[7]=te(a)),n&D&&(t[8]=null==t[8]?e[8]:Cs(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function on(t,e){return t===T?e:ja(t,e,on)}function sn(t,e){t=un(t);for(var i=-1,n=e.length,r={};++i<n;){var o=e[i];o in t&&(r[o]=t[o])}return r}function an(t,e){var i={};return je(t,function(t,n,r){e(t,n,r)&&(i[n]=t)}),i}function hn(t,e){for(var i=t.length,n=Cs(e.length,i),r=te(t);n--;){var o=e[n];t[n]=Ji(o,i)?r[o]:T}return t}function ln(t){for(var e=to(t),i=e.length,n=i&&t.length,r=!!n&&en(n)&&(ka(t)||Tr(t)),o=-1,s=[];++o<i;){var a=e[o];(r&&Ji(a,n)||es.call(t,a))&&s.push(a)}return s}function cn(t){return null==t?[]:Ki(t)?Dr(t)?t:zo(t):oo(t)}function un(t){return Dr(t)?t:zo(t)}function fn(t){if(ka(t))return t;var e=[];return a(t).replace(Ot,function(t,i,n,r){e.push(n?r.replace(jt,"$1"):i||t)}),e}function dn(t){return t instanceof J?t.clone():new y(t.__wrapped__,t.__chain__,te(t.__actions__))}function pn(t,e,i){e=(i?Qi(t,e,i):null==e)?1:ws(ys(e)||1,1);for(var n=0,r=t?t.length:0,o=-1,s=Wo(vs(r/e));r>n;)s[++o]=qe(t,n,n+=e);return s}function gn(t){for(var e=-1,i=t?t.length:0,n=-1,r=[];++e<i;){var o=t[e];o&&(r[++n]=o)}return r}function vn(t,e,i){var n=t?t.length:0;return n?((i?Qi(t,e,i):null==e)&&(e=1),qe(t,0>e?0:e)):[]}function mn(t,e,i){var n=t?t.length:0;return n?((i?Qi(t,e,i):null==e)&&(e=1),e=n-(+e||0),qe(t,0,0>e?0:e)):[]}function yn(t,e,i){return t&&t.length?ei(t,Hi(e,i,3),!0,!0):[]}function bn(t,e,i){return t&&t.length?ei(t,Hi(e,i,3),!0):[]}function _n(t,e,i,n){var r=t?t.length:0;return r?(i&&"number"!=typeof i&&Qi(t,e,i)&&(i=0,n=r),Oe(t,e,i,n)):[]}function xn(t){return t?t[0]:T}function wn(t,e,i){var n=t?t.length:0;return i&&Qi(t,e,i)&&(e=!1),n?ke(t,e):[]}function Cn(t){var e=t?t.length:0;return e?ke(t,!0):[]}function Sn(t,e,i){var n=t?t.length:0;if(!n)return-1;if("number"==typeof i)i=0>i?ws(n+i,0):i;else if(i){var r=ni(t,e);return n>r&&(e===e?e===t[r]:t[r]!==t[r])?r:-1}return o(t,e,i||0)}function Tn(t){return mn(t,1)}function On(t){var e=t?t.length:0;return e?t[e-1]:T}function En(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n;if("number"==typeof i)r=(0>i?ws(n+i,0):Cs(i||0,n-1))+1;else if(i){r=ni(t,e,!0)-1;var o=t[r];return(e===e?e===o:o!==o)?r:-1}if(e!==e)return v(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function An(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var i=0,n=Xi(),r=t.length;++i<r;)for(var o=0,s=t[i];(o=n(e,s,o))>-1;)ds.call(e,o,1);return e}function kn(t,e,i){var n=[];if(!t||!t.length)return n;var r=-1,o=[],s=t.length;for(e=Hi(e,i,3);++r<s;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Ue(t,o),n}function jn(t){return vn(t,1)}function In(t,e,i){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&Qi(t,e,i)&&(e=0,i=n),qe(t,e,i)):[]}function Mn(t,e,i){var n=t?t.length:0;return n?((i?Qi(t,e,i):null==e)&&(e=1),qe(t,0,0>e?0:e)):[]}function Pn(t,e,i){var n=t?t.length:0;return n?((i?Qi(t,e,i):null==e)&&(e=1),e=n-(+e||0),qe(t,0>e?0:e)):[]}function Dn(t,e,i){return t&&t.length?ei(t,Hi(e,i,3),!1,!0):[]}function Ln(t,e,i){return t&&t.length?ei(t,Hi(e,i,3)):[]}function Rn(t,e,i,n){var r=t?t.length:0;if(!r)return[];null!=e&&"boolean"!=typeof e&&(n=i,i=Qi(t,e,n)?T:e,e=!1);var s=Hi();return null==i&&s===_e||(i=s(i,n,3)),e&&Xi()==o?_(t,i):Ze(t,i)}function Nn(t){if(!t||!t.length)return[];var e=-1,i=0;t=ae(t,function(t){return Ki(t)?(i=ws(t.length,i),!0):void 0});for(var n=Wo(i);++e<i;)n[e]=he(t,Ye(e));return n}function Bn(t,e,i){var n=t?t.length:0;if(!n)return[];var r=Nn(t);return null==e?r:(e=oi(e,i,4),he(r,function(t){return ce(t,e,T,!0)}))}function Fn(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(Ki(i))var n=n?le(Ce(n,i),Ce(i,n)):i}return n?Ze(n):[]}function Hn(t,e){var i=-1,n=t?t.length:0,r={};for(!n||e||ka(t[0])||(e=[]);++i<n;){var o=t[i];e?r[o]=e[i]:o&&(r[o[0]]=o[1])}return r}function Wn(t){var i=e(t);return i.__chain__=!0,i}function Xn(t,e,i){return e.call(i,t),t}function Yn(t,e,i){return e.call(i,t)}function $n(){return Wn(this)}function Un(){return new y(this.value(),this.__chain__)}function Gn(t){for(var e,n=this;n instanceof i;){var r=dn(n);e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e}function zn(){var t=this.__wrapped__,e=function(t){return i&&i.__dir__<0?t:t.reverse()};if(t instanceof J){var i=t;return this.__actions__.length&&(i=new J(this)),i=i.reverse(),i.__actions__.push({func:Yn,args:[e],thisArg:T}),new y(i,this.__chain__)}return this.thru(e)}function qn(){return this.value()+""}function Vn(){return ii(this.__wrapped__,this.__actions__)}function Kn(t,e,i){var n=ka(t)?oe:Se;return i&&Qi(t,e,i)&&(e=T),"function"==typeof e&&i===T||(e=Hi(e,i,3)),n(t,e)}function Jn(t,e,i){var n=ka(t)?ae:Ee;return e=Hi(e,i,3),n(t,e)}function Qn(t,e){return ra(t,Fe(e))}function Zn(t,e,i,n){var r=t?Xs(t):0;return en(r)||(t=oo(t),r=t.length),i="number"!=typeof i||n&&Qi(e,i,n)?0:0>i?ws(r+i,0):i||0,"string"==typeof t||!ka(t)&&Xr(t)?r>=i&&t.indexOf(e,i)>-1:!!r&&Xi(t,e,i)>-1}function tr(t,e,i){var n=ka(t)?he:Be;return e=Hi(e,i,3),n(t,e)}function er(t,e){return tr(t,Do(e))}function ir(t,e,i){var n=ka(t)?ae:Ee;return e=Hi(e,i,3),n(t,function(t,i,n){return!e(t,i,n)})}function nr(t,e,i){if(i?Qi(t,e,i):null==e){t=cn(t);var n=t.length;return n>0?t[Ge(0,n-1)]:T}var r=-1,o=zr(t),n=o.length,s=n-1;for(e=Cs(0>e?0:+e||0,n);++r<e;){var a=Ge(r,s),h=o[a];o[a]=o[r],o[r]=h}return o.length=e,o}function rr(t){return nr(t,As)}function or(t){var e=t?Xs(t):0;return en(e)?e:Ha(t).length}function sr(t,e,i){var n=ka(t)?fe:Ve;return i&&Qi(t,e,i)&&(e=T),"function"==typeof e&&i===T||(e=Hi(e,i,3)),n(t,e)}function ar(t,e,i){if(null==t)return[];i&&Qi(t,e,i)&&(e=T);var n=-1;e=Hi(e,i,3);var r=Be(t,function(t,i,r){return{criteria:e(t,i,r),index:++n,value:t}});return Ke(r,c)}function hr(t,e,i,n){return null==t?[]:(n&&Qi(e,i,n)&&(i=T),ka(e)||(e=null==e?[]:[e]),ka(i)||(i=null==i?[]:[i]),Je(t,e,i))}function lr(t,e){return Jn(t,Fe(e))}function cr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ko(Y);var i=t;t=e,e=i}return t=_s(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function ur(t,e,i){return i&&Qi(t,e,i)&&(e=T),e=t&&null==e?t.length:ws(+e||0,0),Ri(t,D,T,T,T,T,e)}function fr(t,e){var i;if("function"!=typeof e){if("function"!=typeof t)throw new Ko(Y);var n=t;t=e,e=n}return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=T),i}}function dr(t,e,i){function n(){d&&as(d),l&&as(l),g=0,l=d=p=T}function r(e,i){i&&as(i),l=d=p=T,e&&(g=ga(),c=t.apply(f,h),d||l||(h=f=T))}function o(){var t=e-(ga()-u);0>=t||t>e?r(p,l):d=fs(o,t)}function s(){r(m,d)}function a(){if(h=arguments,u=ga(),f=this,p=m&&(d||!y),v===!1)var i=y&&!d;else{l||y||(g=u);var n=v-(u-g),r=0>=n||n>v;r?(l&&(l=as(l)),g=u,c=t.apply(f,h)):l||(l=fs(s,n))}return r&&d?d=as(d):d||e===v||(d=fs(o,e)),i&&(r=!0,c=t.apply(f,h)),!r||d||l||(h=f=T),c}var h,l,c,u,f,d,p,g=0,v=!1,m=!0;if("function"!=typeof t)throw new Ko(Y);if(e=0>e?0:+e||0,i===!0){var y=!0;m=!1}else Dr(i)&&(y=!!i.leading,v="maxWait"in i&&ws(+i.maxWait||0,e),m="trailing"in i?!!i.trailing:m);return a.cancel=n,a}function pr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ko(Y);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s),s};return i.cache=new pr.Cache,i}function gr(t){if("function"!=typeof t)throw new Ko(Y);return function(){return!t.apply(this,arguments)}}function vr(t){return fr(2,t)}function mr(t,e){if("function"!=typeof t)throw new Ko(Y);return e=ws(e===T?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,r=ws(i.length-e,0),o=Wo(r);++n<r;)o[n]=i[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,i[0],o);case 2:return t.call(this,i[0],i[1],o)}var s=Wo(e+1);for(n=-1;++n<e;)s[n]=i[n];return s[e]=o,t.apply(this,s)}}function yr(t){if("function"!=typeof t)throw new Ko(Y);return function(e){return t.apply(this,e)}}function br(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Ko(Y);return i===!1?n=!1:Dr(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),dr(t,e,{leading:n,maxWait:+e,trailing:r})}function _r(t,e){return e=null==e?Ao:e,Ri(e,M,T,[t],[])}function xr(t,e,i,n){return e&&"boolean"!=typeof e&&Qi(t,e,i)?e=!1:"function"==typeof e&&(n=i,i=e,e=!1),"function"==typeof i?xe(t,e,oi(i,n,1)):xe(t,e)}function wr(t,e,i){return"function"==typeof e?xe(t,!0,oi(e,i,1)):xe(t,!0)}function Cr(t,e){return t>e}function Sr(t,e){return t>=e}function Tr(t){return m(t)&&Ki(t)&&es.call(t,"callee")&&!cs.call(t,"callee")}function Or(t){return t===!0||t===!1||m(t)&&ns.call(t)==z}function Er(t){return m(t)&&ns.call(t)==q}function Ar(t){return!!t&&1===t.nodeType&&m(t)&&!Hr(t)}function kr(t){return null==t?!0:Ki(t)&&(ka(t)||Xr(t)||Tr(t)||m(t)&&Pr(t.splice))?!t.length:!Ha(t).length}function jr(t,e,i,n){i="function"==typeof i?oi(i,n,3):T;var r=i?i(t,e):T;return r===T?Le(t,e,i):!!r}function Ir(t){return m(t)&&"string"==typeof t.message&&ns.call(t)==V}function Mr(t){return"number"==typeof t&&_s(t)}function Pr(t){return Dr(t)&&ns.call(t)==K}function Dr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Lr(t,e,i,n){return i="function"==typeof i?oi(i,n,3):T,Ne(t,Yi(e),i)}function Rr(t){return Fr(t)&&t!=+t}function Nr(t){return null==t?!1:Pr(t)?os.test(ts.call(t)):m(t)&&Dt.test(t)}function Br(t){return null===t}function Fr(t){return"number"==typeof t||m(t)&&ns.call(t)==Q}function Hr(t){var e;if(!m(t)||ns.call(t)!=Z||Tr(t)||!es.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var i;return je(t,function(t,e){i=e}),i===T||es.call(t,i)}function Wr(t){return Dr(t)&&ns.call(t)==tt}function Xr(t){return"string"==typeof t||m(t)&&ns.call(t)==it}function Yr(t){return m(t)&&en(t.length)&&!!Xt[ns.call(t)]}function $r(t){return t===T}function Ur(t,e){return e>t}function Gr(t,e){return e>=t}function zr(t){var e=t?Xs(t):0;return en(e)?e?te(t):[]:oo(t)}function qr(t){return be(t,to(t))}function Vr(t,e,i){var n=Ls(t);return i&&Qi(t,e,i)&&(e=T),e?me(n,e):n}function Kr(t){return Pe(t,to(t))}function Jr(t,e,i){var n=null==t?T:De(t,fn(e),e+"");return n===T?i:n}function Qr(t,e){if(null==t)return!1;var i=es.call(t,e);if(!i&&!Zi(e)){if(e=fn(e),t=1==e.length?t:De(t,qe(e,0,-1)),null==t)return!1;e=On(e),i=es.call(t,e)}return i||en(t.length)&&Ji(e,t.length)&&(ka(t)||Tr(t))}function Zr(t,e,i){i&&Qi(t,e,i)&&(e=T);for(var n=-1,r=Ha(t),o=r.length,s={};++n<o;){var a=r[n],h=t[a];e?es.call(s,h)?s[h].push(a):s[h]=[a]:s[h]=a}return s}function to(t){if(null==t)return[];Dr(t)||(t=zo(t));var e=t.length;e=e&&en(e)&&(ka(t)||Tr(t))&&e||0;for(var i=t.constructor,n=-1,r="function"==typeof i&&i.prototype===t,o=Wo(e),s=e>0;++n<e;)o[n]=n+"";for(var a in t)s&&Ji(a,e)||"constructor"==a&&(r||!es.call(t,a))||o.push(a);return o}function eo(t){t=un(t);for(var e=-1,i=Ha(t),n=i.length,r=Wo(n);++e<n;){var o=i[e];r[e]=[o,t[o]]}return r}function io(t,e,i){var n=null==t?T:t[e];return n===T&&(null==t||Zi(e,t)||(e=fn(e),t=1==e.length?t:De(t,qe(e,0,-1)),n=null==t?T:t[On(e)]),n=n===T?i:n),Pr(n)?n.call(t):n}function no(t,e,i){if(null==t)return t;var n=e+"";e=null!=t[n]||Zi(e,t)?[n]:fn(e);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var h=e[r];Dr(a)&&(r==s?a[h]=i:null==a[h]&&(a[h]=Ji(e[r+1])?[]:{})),a=a[h]}return t}function ro(t,e,i,n){var r=ka(t)||Yr(t);if(e=Hi(e,n,4),null==i)if(r||Dr(t)){var o=t.constructor;i=r?ka(t)?new o:[]:Ls(Pr(o)?o.prototype:T)}else i={};return(r?ee:Ie)(t,function(t,n,r){return e(i,t,n,r)}),i}function oo(t){return ti(t,Ha(t))}function so(t){return ti(t,to(t))}function ao(t,e,i){return e=+e||0,i===T?(i=e,e=0):i=+i||0,t>=Cs(e,i)&&t<ws(e,i)}function ho(t,e,i){i&&Qi(t,e,i)&&(e=i=T);var n=null==t,r=null==e;if(null==i&&(r&&"boolean"==typeof t?(i=t,t=1):"boolean"==typeof e&&(i=e,r=!0)),n&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,i||t%1||e%1){var o=Os();return Cs(t+o*(e-t+hs("1e-"+((o+"").length-1))),e)}return Ge(t,e)}function lo(t){return t=a(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return t=a(t),t&&t.replace(Rt,f).replace(kt,"")}function uo(t,e,i){t=a(t),e+="";var n=t.length;return i=i===T?n:Cs(0>i?0:+i||0,n),i-=e.length,i>=0&&t.indexOf(e,i)==i}function fo(t){return t=a(t),t&&_t.test(t)?t.replace(yt,d):t}function po(t){return t=a(t),t&&At.test(t)?t.replace(Et,p):t||"(?:)"}function go(t,e,i){t=a(t),e=+e;var n=t.length;if(n>=e||!_s(e))return t;var r=(e-n)/2,o=ys(r),s=vs(r);return i=Mi("",s,i),i.slice(0,o)+t+i}function vo(t,e,i){return(i?Qi(t,e,i):null==e)?e=0:e&&(e=+e),t=_o(t),Ts(t,e||(Pt.test(t)?16:10))}function mo(t,e){var i="";if(t=a(t),e=+e,1>e||!t||!_s(e))return i;do e%2&&(i+=t),e=ys(e/2),t+=t;while(e);return i}function yo(t,e,i){return t=a(t),i=null==i?0:Cs(0>i?0:+i||0,t.length),t.lastIndexOf(e,i)==i}function bo(t,i,n){var r=e.templateSettings;n&&Qi(t,i,n)&&(i=n=T),t=a(t),i=ve(me({},n||i),r,ge);var o,s,h=ve(me({},i.imports),r.imports,ge),l=Ha(h),c=ti(h,l),u=0,f=i.interpolate||Nt,d="__p += '",p=qo((i.escape||Nt).source+"|"+f.source+"|"+(f===Ct?It:Nt).source+"|"+(i.evaluate||Nt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in i?i.sourceURL:"lodash.templateSources["+ ++Wt+"]")+"\n";t.replace(p,function(e,i,n,r,a,h){return n||(n=r),d+=t.slice(u,h).replace(Bt,g),i&&(o=!0,d+="' +\n__e("+i+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=h+e.length,e}),d+="';\n";var m=i.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(pt,""):d).replace(gt,"$1").replace(vt,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Ja(function(){return $o(l,v+"return "+d).apply(T,c)});if(y.source=d,Ir(y))throw y;return y}function _o(t,e,i){var n=t;return(t=a(t))?(i?Qi(n,e,i):null==e)?t.slice(x(t),w(t)+1):(e+="",t.slice(h(t,e),l(t,e)+1)):t}function xo(t,e,i){var n=t;return t=a(t),t?(i?Qi(n,e,i):null==e)?t.slice(x(t)):t.slice(h(t,e+"")):t}function wo(t,e,i){var n=t;return t=a(t),t?(i?Qi(n,e,i):null==e)?t.slice(0,w(t)+1):t.slice(0,l(t,e+"")+1):t}function Co(t,e,i){i&&Qi(t,e,i)&&(e=T);var n=R,r=N;if(null!=e)if(Dr(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n,r="omission"in e?a(e.omission):r}else n=+e||0;if(t=a(t),n>=t.length)return t;var s=n-r.length;if(1>s)return r;var h=t.slice(0,s);if(null==o)return h+r;if(Wr(o)){if(t.slice(s).search(o)){var l,c,u=t.slice(0,s);for(o.global||(o=qo(o.source,(Mt.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(u);)c=l.index;h=h.slice(0,null==c?s:c)}}else if(t.indexOf(o,s)!=s){var f=h.lastIndexOf(o);f>-1&&(h=h.slice(0,f))}return h+r}function So(t){return t=a(t),t&&bt.test(t)?t.replace(mt,C):t}function To(t,e,i){return i&&Qi(t,e,i)&&(e=T),t=a(t),t.match(e||Ft)||[]}function Oo(t,e,i){return i&&Qi(t,e,i)&&(e=T),m(t)?ko(t):_e(t,e)}function Eo(t){return function(){return t}}function Ao(t){return t}function ko(t){return Fe(xe(t,!0))}function jo(t,e){return He(t,xe(e,!0))}function Io(t,e,i){if(null==i){var n=Dr(e),r=n?Ha(e):T,o=r&&r.length?Pe(e,r):T;(o?o.length:n)||(o=!1,i=e,e=t,t=this)}o||(o=Pe(e,Ha(e)));var s=!0,a=-1,h=Pr(t),l=o.length;i===!1?s=!1:Dr(i)&&"chain"in i&&(s=i.chain);for(;++a<l;){var c=o[a],u=e[c];t[c]=u,h&&(t.prototype[c]=function(e){return function(){var i=this.__chain__;if(s||i){var n=t(this.__wrapped__),r=n.__actions__=te(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),n.__chain__=i,n}return e.apply(t,le([this.value()],arguments))}}(u))}return t}function Mo(){return ie._=rs,this}function Po(){}function Do(t){return Zi(t)?Ye(t):$e(t)}function Lo(t){return function(e){return De(t,fn(e),e+"")}}function Ro(t,e,i){i&&Qi(t,e,i)&&(e=i=T),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,r=ws(vs((e-t)/(i||1)),0),o=Wo(r);++n<r;)o[n]=t,t+=i;return o}function No(t,e,i){if(t=ys(t),1>t||!_s(t))return[];var n=-1,r=Wo(Cs(t,ks));for(e=oi(e,i,1);++n<t;)ks>n?r[n]=e(n):e(n);return r}function Bo(t){var e=++is;return a(t)+e}function Fo(t,e){return(+t||0)+(+e||0)}function Ho(t,e,i){return i&&Qi(t,e,i)&&(e=T),e=Hi(e,i,3),1==e.length?de(ka(t)?t:cn(t),e):Qe(t,e)}t=t?ne.defaults(ie.Object(),t,ne.pick(ie,Ht)):ie;var Wo=t.Array,Xo=t.Date,Yo=t.Error,$o=t.Function,Uo=t.Math,Go=t.Number,zo=t.Object,qo=t.RegExp,Vo=t.String,Ko=t.TypeError,Jo=Wo.prototype,Qo=zo.prototype,Zo=Vo.prototype,ts=$o.prototype.toString,es=Qo.hasOwnProperty,is=0,ns=Qo.toString,rs=ie._,os=qo("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=t.ArrayBuffer,as=t.clearTimeout,hs=t.parseFloat,ls=Uo.pow,cs=Qo.propertyIsEnumerable,us=$i(t,"Set"),fs=t.setTimeout,ds=Jo.splice,ps=t.Uint8Array,gs=$i(t,"WeakMap"),vs=Uo.ceil,ms=$i(zo,"create"),ys=Uo.floor,bs=$i(Wo,"isArray"),_s=t.isFinite,xs=$i(zo,"keys"),ws=Uo.max,Cs=Uo.min,Ss=$i(Xo,"now"),Ts=t.parseInt,Os=Uo.random,Es=Go.NEGATIVE_INFINITY,As=Go.POSITIVE_INFINITY,ks=4294967295,js=ks-1,Is=ks>>>1,Ms=9007199254740991,Ps=gs&&new gs,Ds={};e.support={};e.templateSettings={escape:xt,evaluate:wt,interpolate:Ct,variable:"",imports:{_:e}};var Ls=function(){function t(){}return function(e){if(Dr(e)){t.prototype=e;var i=new t;t.prototype=T}return i||{}}}(),Rs=ui(Ie),Ns=ui(Me,!0),Bs=fi(),Fs=fi(!0),Hs=Ps?function(t,e){return Ps.set(t,e),t}:Ao,Ws=Ps?function(t){return Ps.get(t)}:Po,Xs=Ye("length"),Ys=function(){var t=0,e=0;return function(i,n){var r=ga(),o=F-(r-e);if(e=r,o>0){if(++t>=B)return i}else t=0;return Hs(i,n)}}(),$s=mr(function(t,e){return m(t)&&Ki(t)?Ce(t,ke(e,!1,!0)):[]}),Us=xi(),Gs=xi(!0),zs=mr(function(t){for(var e=t.length,i=e,n=Wo(u),r=Xi(),s=r==o,a=[];i--;){var h=t[i]=Ki(h=t[i])?h:[];n[i]=s&&h.length>=120?pi(i&&h):null}var l=t[0],c=-1,u=l?l.length:0,f=n[0];t:for(;++c<u;)if(h=l[c],(f?Jt(f,h):r(a,h,0))<0){for(var i=e;--i;){var d=n[i];if((d?Jt(d,h):r(t[i],h,0))<0)continue t}f&&f.push(h),a.push(h)}return a}),qs=mr(function(t,e){e=ke(e);var i=ye(t,e);return Ue(t,e.sort(n)),i}),Vs=Li(),Ks=Li(!0),Js=mr(function(t){return Ze(ke(t,!1,!0))}),Qs=mr(function(t,e){return Ki(t)?Ce(t,e):[]}),Zs=mr(Nn),ta=mr(function(t){var e=t.length,i=e>2?t[e-2]:T,n=e>1?t[e-1]:T;return e>2&&"function"==typeof i?e-=2:(i=e>1&&"function"==typeof n?(--e,n):T,n=T),t.length=e,Bn(t,i,n)}),ea=mr(function(t){return t=ke(t),this.thru(function(e){return Zt(ka(e)?e:[un(e)],t)})}),ia=mr(function(t,e){return ye(t,ke(e))}),na=li(function(t,e,i){es.call(t,i)?++t[i]:t[i]=1}),ra=_i(Rs),oa=_i(Ns,!0),sa=Si(ee,Rs),aa=Si(re,Ns),ha=li(function(t,e,i){es.call(t,i)?t[i].push(e):t[i]=[e]}),la=li(function(t,e,i){t[i]=e}),ca=mr(function(t,e,i){var n=-1,r="function"==typeof e,o=Zi(e),s=Ki(t)?Wo(t.length):[];return Rs(t,function(t){var a=r?e:o&&null!=t?t[e]:T;s[++n]=a?a.apply(t,i):Vi(t,e,i)}),s}),ua=li(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),fa=ji(ce,Rs),da=ji(ue,Ns),pa=mr(function(t,e){if(null==t)return[];var i=e[2];return i&&Qi(e[0],e[1],i)&&(e.length=1),Je(t,ke(e),[])}),ga=Ss||function(){return(new Xo).getTime()},va=mr(function(t,e,i){var n=E;if(i.length){var r=b(i,va.placeholder);n|=M}return Ri(t,n,e,i,r)}),ma=mr(function(t,e){e=e.length?ke(e):Kr(t);for(var i=-1,n=e.length;++i<n;){var r=e[i];t[r]=Ri(t[r],E,t)}return t}),ya=mr(function(t,e,i){var n=E|A;if(i.length){var r=b(i,ya.placeholder);n|=M}return Ri(e,n,t,i,r)}),ba=mi(j),_a=mi(I),xa=mr(function(t,e){return we(t,1,e)}),wa=mr(function(t,e,i){return we(t,e,i)}),Ca=Ci(),Sa=Ci(!0),Ta=mr(function(t,e){if(e=ke(e),"function"!=typeof t||!oe(e,s))throw new Ko(Y);var i=e.length;return mr(function(n){for(var r=Cs(n.length,i);r--;)n[r]=e[r](n[r]);return t.apply(this,n)})}),Oa=ki(M),Ea=ki(P),Aa=mr(function(t,e){return Ri(t,L,T,T,T,ke(e))}),ka=bs||function(t){return m(t)&&en(t.length)&&ns.call(t)==G},ja=ci(We),Ia=ci(function(t,e,i){return i?ve(t,e,i):me(t,e)}),Ma=yi(Ia,pe),Pa=yi(ja,on),Da=wi(Ie),La=wi(Me),Ra=Ti(Bs),Na=Ti(Fs),Ba=Oi(Ie),Fa=Oi(Me),Ha=xs?function(t){var e=null==t?T:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ki(t)?ln(t):Dr(t)?xs(t):[]}:ln,Wa=Ei(!0),Xa=Ei(),Ya=mr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=he(ke(e),Vo);return sn(t,Ce(to(t),e))}var i=oi(e[0],e[1],3);return an(t,function(t,e,n){return!i(t,e,n)})}),$a=mr(function(t,e){return null==t?{}:"function"==typeof e[0]?an(t,oi(e[0],e[1],3)):sn(t,ke(e))}),Ua=gi(function(t,e,i){return e=e.toLowerCase(),t+(i?e.charAt(0).toUpperCase()+e.slice(1):e)}),Ga=gi(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),za=Ai(),qa=Ai(!0),Va=gi(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),Ka=gi(function(t,e,i){return t+(i?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ja=mr(function(t,e){try{return t.apply(T,e)}catch(i){return Ir(i)?i:new Yo(i)}}),Qa=mr(function(t,e){return function(i){return Vi(i,t,e)}}),Za=mr(function(t,e){return function(i){return Vi(t,i,e)}}),th=Di("ceil"),eh=Di("floor"),ih=bi(Cr,Es),nh=bi(Ur,As),rh=Di("round");return e.prototype=i.prototype,y.prototype=Ls(i.prototype),y.prototype.constructor=y,J.prototype=Ls(i.prototype),J.prototype.constructor=J,Ut.prototype["delete"]=Gt,Ut.prototype.get=zt,Ut.prototype.has=qt,Ut.prototype.set=Vt,Kt.prototype.push=Qt,pr.Cache=Ut,e.after=cr,e.ary=ur,e.assign=Ia,e.at=ia,e.before=fr,e.bind=va,e.bindAll=ma,e.bindKey=ya,e.callback=Oo,e.chain=Wn,e.chunk=pn,e.compact=gn,e.constant=Eo,e.countBy=na,e.create=Vr,e.curry=ba,e.curryRight=_a,e.debounce=dr,e.defaults=Ma,e.defaultsDeep=Pa,e.defer=xa,e.delay=wa,e.difference=$s,e.drop=vn,e.dropRight=mn,e.dropRightWhile=yn,e.dropWhile=bn,e.fill=_n,e.filter=Jn,e.flatten=wn,e.flattenDeep=Cn,e.flow=Ca,e.flowRight=Sa,e.forEach=sa,e.forEachRight=aa,e.forIn=Ra,e.forInRight=Na,e.forOwn=Ba,e.forOwnRight=Fa,e.functions=Kr,e.groupBy=ha,e.indexBy=la,e.initial=Tn,e.intersection=zs,e.invert=Zr,e.invoke=ca,e.keys=Ha,e.keysIn=to,e.map=tr,e.mapKeys=Wa,e.mapValues=Xa,e.matches=ko,e.matchesProperty=jo,e.memoize=pr,e.merge=ja,e.method=Qa,e.methodOf=Za,e.mixin=Io,e.modArgs=Ta,e.negate=gr,e.omit=Ya,e.once=vr,e.pairs=eo,e.partial=Oa,e.partialRight=Ea,e.partition=ua,e.pick=$a,e.pluck=er,e.property=Do,e.propertyOf=Lo,e.pull=An,e.pullAt=qs,e.range=Ro,e.rearg=Aa,e.reject=ir,e.remove=kn,e.rest=jn,e.restParam=mr,e.set=no,e.shuffle=rr,e.slice=In,e.sortBy=ar,e.sortByAll=pa,e.sortByOrder=hr,e.spread=yr,e.take=Mn,e.takeRight=Pn,e.takeRightWhile=Dn,e.takeWhile=Ln,e.tap=Xn,e.throttle=br,e.thru=Yn,e.times=No,e.toArray=zr,e.toPlainObject=qr,e.transform=ro,e.union=Js,e.uniq=Rn,e.unzip=Nn,e.unzipWith=Bn,e.values=oo,e.valuesIn=so,e.where=lr,e.without=Qs,e.wrap=_r,e.xor=Fn,e.zip=Zs,e.zipObject=Hn,e.zipWith=ta,e.backflow=Sa,e.collect=tr,e.compose=Sa,e.each=sa,e.eachRight=aa,e.extend=Ia,e.iteratee=Oo,e.methods=Kr,e.object=Hn,e.select=Jn,e.tail=jn,e.unique=Rn,Io(e,e),e.add=Fo,e.attempt=Ja,e.camelCase=Ua,e.capitalize=lo,e.ceil=th,e.clone=xr,e.cloneDeep=wr,e.deburr=co,e.endsWith=uo,e.escape=fo,e.escapeRegExp=po,e.every=Kn,e.find=ra,e.findIndex=Us,e.findKey=Da,e.findLast=oa,e.findLastIndex=Gs,e.findLastKey=La,e.findWhere=Qn,e.first=xn,e.floor=eh,e.get=Jr,e.gt=Cr,e.gte=Sr,e.has=Qr,e.identity=Ao,e.includes=Zn,e.indexOf=Sn,e.inRange=ao,e.isArguments=Tr,e.isArray=ka,e.isBoolean=Or,e.isDate=Er,e.isElement=Ar,e.isEmpty=kr,e.isEqual=jr,e.isError=Ir,e.isFinite=Mr,e.isFunction=Pr,e.isMatch=Lr,e.isNaN=Rr,e.isNative=Nr,e.isNull=Br,e.isNumber=Fr,e.isObject=Dr,e.isPlainObject=Hr,e.isRegExp=Wr,e.isString=Xr,e.isTypedArray=Yr,e.isUndefined=$r,e.kebabCase=Ga,e.last=On,e.lastIndexOf=En,e.lt=Ur,e.lte=Gr,e.max=ih,e.min=nh,e.noConflict=Mo,e.noop=Po,e.now=ga,e.pad=go,e.padLeft=za,e.padRight=qa,e.parseInt=vo,e.random=ho,e.reduce=fa,e.reduceRight=da,e.repeat=mo,e.result=io,e.round=rh,e.runInContext=S,e.size=or,e.snakeCase=Va,e.some=sr,e.sortedIndex=Vs,e.sortedLastIndex=Ks,e.startCase=Ka,e.startsWith=yo,e.sum=Ho,e.template=bo,e.trim=_o,e.trimLeft=xo,e.trimRight=wo,e.trunc=Co,e.unescape=So,e.uniqueId=Bo,e.words=To,e.all=Kn,e.any=sr,e.contains=Zn,e.eq=jr,e.detect=ra,e.foldl=fa,e.foldr=da,e.head=xn,e.include=Zn,e.inject=fa,Io(e,function(){var t={};return Ie(e,function(i,n){e.prototype[n]||(t[n]=i)}),t}(),!1),e.sample=nr,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return nr(e,t)}):nr(this.value())},e.VERSION=O,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){J.prototype[t]=function(i){var n=this.__filtered__;if(n&&!e)return new J(this);i=null==i?1:ws(ys(i)||0,0);var r=this.clone();return n?r.__takeCount__=Cs(r.__takeCount__,i):r.__views__.push({size:i,type:t+(r.__dir__<0?"Right":"")}),r},J.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var i=e+1,n=i!=X;J.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:Hi(t,e,1),type:i}),r.__filtered__=r.__filtered__||n,r}}),ee(["first","last"],function(t,e){var i="take"+(e?"Right":"");J.prototype[t]=function(){return this[i](1).value()[0]}}),ee(["initial","rest"],function(t,e){var i="drop"+(e?"":"Right");J.prototype[t]=function(){return this.__filtered__?new J(this):this[i](1)}}),ee(["pluck","where"],function(t,e){var i=e?"filter":"map",n=e?Fe:Do;J.prototype[t]=function(t){return this[i](n(t))}}),J.prototype.compact=function(){return this.filter(Ao)},J.prototype.reject=function(t,e){return t=Hi(t,e,1),this.filter(function(e){return!t(e)})},J.prototype.slice=function(t,e){t=null==t?0:+t||0;var i=this;return i.__filtered__&&(t>0||0>e)?new J(i):(0>t?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==T&&(e=+e||0,i=0>e?i.dropRight(-e):i.take(e-t)),i)},J.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},J.prototype.toArray=function(){return this.take(As)},Ie(J.prototype,function(t,i){var n=/^(?:filter|map|reject)|While$/.test(i),r=/^(?:first|last)$/.test(i),o=e[r?"take"+("last"==i?"Right":""):i];o&&(e.prototype[i]=function(){var e=r?[1]:arguments,i=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,h=s instanceof J,l=e[0],c=h||ka(s);c&&n&&"function"==typeof l&&1!=l.length&&(h=c=!1);var u=function(t){return r&&i?o(t,1)[0]:o.apply(T,le([t],e))},f={func:Yn,args:[u],thisArg:T},d=h&&!a;if(r&&!i)return d?(s=s.clone(),s.__actions__.push(f),t.call(s)):o.call(T,this.value())[0];if(!r&&c){s=d?s:new J(this);var p=t.apply(s,e);return p.__actions__.push(f),new y(p,i)}return this.thru(u)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var i=(/^(?:replace|split)$/.test(t)?Zo:Jo)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?i.apply(this.value(),t):this[n](function(e){return i.apply(e,t)})}}),Ie(J.prototype,function(t,i){var n=e[i];if(n){var r=n.name,o=Ds[r]||(Ds[r]=[]);o.push({name:i,func:n})}}),Ds[Ii(T,A).name]=[{name:"wrapper",func:T}],J.prototype.clone=et,J.prototype.reverse=nt,J.prototype.value=$t,e.prototype.chain=$n,e.prototype.commit=Un,e.prototype.concat=ea,e.prototype.plant=Gn,e.prototype.reverse=zn,e.prototype.toString=qn,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Vn,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var T,O="3.10.1",E=1,A=2,k=4,j=8,I=16,M=32,P=64,D=128,L=256,R=30,N="...",B=150,F=16,H=200,W=1,X=2,Y="Expected a function",$="__lodash_placeholder__",U="[object Arguments]",G="[object Array]",z="[object Boolean]",q="[object Date]",V="[object Error]",K="[object Function]",J="[object Map]",Q="[object Number]",Z="[object Object]",tt="[object RegExp]",et="[object Set]",it="[object String]",nt="[object WeakMap]",rt="[object ArrayBuffer]",ot="[object Float32Array]",st="[object Float64Array]",at="[object Int8Array]",ht="[object Int16Array]",lt="[object Int32Array]",ct="[object Uint8Array]",ut="[object Uint8ClampedArray]",ft="[object Uint16Array]",dt="[object Uint32Array]",pt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,yt=/[&<>"'`]/g,bt=RegExp(mt.source),_t=RegExp(yt.source),xt=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Et=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,At=RegExp(Et.source),kt=/[\u0300-\u036f\ufe20-\ufe23]/g,jt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mt=/\w*$/,Pt=/^0[xX]/,Dt=/^\[object .+?Constructor\]$/,Lt=/^\d+$/,Rt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Nt=/($^)/,Bt=/['\n\r\u2028\u2029\\]/g,Ft=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ht=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Wt=-1,Xt={};Xt[ot]=Xt[st]=Xt[at]=Xt[ht]=Xt[lt]=Xt[ct]=Xt[ut]=Xt[ft]=Xt[dt]=!0,Xt[U]=Xt[G]=Xt[rt]=Xt[z]=Xt[q]=Xt[V]=Xt[K]=Xt[J]=Xt[Q]=Xt[Z]=Xt[tt]=Xt[et]=Xt[it]=Xt[nt]=!1;var Yt={};Yt[U]=Yt[G]=Yt[rt]=Yt[z]=Yt[q]=Yt[ot]=Yt[st]=Yt[at]=Yt[ht]=Yt[lt]=Yt[Q]=Yt[Z]=Yt[tt]=Yt[it]=Yt[ct]=Yt[ut]=Yt[ft]=Yt[dt]=!0,Yt[V]=Yt[K]=Yt[J]=Yt[et]=Yt[nt]=!1;var $t={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Gt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zt={"function":!0,object:!0},qt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kt=zt[typeof i]&&i&&!i.nodeType&&i,Jt=zt[typeof e]&&e&&!e.nodeType&&e,Qt=Kt&&Jt&&"object"==typeof t&&t&&t.Object&&t,Zt=zt[typeof self]&&self&&self.Object&&self,te=zt[typeof window]&&window&&window.Object&&window,ee=Jt&&Jt.exports===Kt&&Kt,ie=Qt||te!==(this&&this.window)&&te||Zt||this,ne=S();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ie._=ne,define(function(){return ne})):Kt&&Jt?ee?(Jt.exports=ne)._=ne:Kt._=ne:ie._=ne}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],58:[function(t,e,i){(function(e){"use strict";e.jQuery=t("jquery"),e.$=jQuery;var i=t("./views/Wizard");t("bootstrap");t("./lib/Fileinput"),$(function(){return $(document).on("click","a[href='#']",function(t){t.preventDefault()}),$("footer").css("background-color",$("body > nav").css("background-color")),$("footer *").css("color",$(".navbar-default .navbar-nav > li > a").css("color")),"undefined"!=typeof FileReader&&$.isFunction(FileReader)?($('[data-toggle="tooltip"]').tooltip(),$("#wizard").show(),$(":file").filestyle({buttonText:"",buttonName:"btn-primary",size:"sm"}),void new i):void $("#old-browser").fadeIn("slow")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/Fileinput":62,"./views/Wizard":89,bootstrap:4,jquery:56}],59:[function(t,e,i){"use strict";var n=t("./Canvas");e.exports={COLORS:{BLACK:[0,0,0,255],WHITE:[255,255,255,255]},grab:function(t,e,i,r,o,s,a){var h=n.createEmptyCanvas(e,i),l=h.getContext("2d"),c=l.createImageData(e,i);return c.data.set(t),l.putImageData(c,0,0),l.getImageData(Math.floor(r),Math.floor(o),Math.floor(s),Math.floor(a)).data},draw:function(t,e,i,r,o,s,a,h){var l=n.createEmptyCanvas(a,h),c=l.getContext("2d"),u=c.createImageData(e,i),f=c.createImageData(a,h);return f.data.set(r),c.putImageData(f,0,0),u.data.set(t),c.putImageData(u,o,s),c.getImageData(0,0,a,h).data},getPixel:function(t,e){var i=4*e;return[t[i],t[i+1],t[i+2],t[i+3]]},getPixelXY:function(t,e,i,n){return this.getPixel(t,Math.floor(i*n+e))},setPixel:function(t,e,i){var n=4*e;t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3]},setPixelXY:function(t,e,i,n,r){e>=r||this.setPixel(t,i*r+e,n)},mixColors:function(t,e,i){var n=i||.5,r=Math.round((e[0]-t[0])*n)+t[0],o=Math.round((e[1]-t[1])*n)+t[1],s=Math.round((e[2]-t[2])*n)+t[2],a=Math.round((e[3]-t[3])*n)+t[3];return[r,o,s,a]},setMixPixel:function(t,e,i,n,r){var o=this.getPixelXY(t,e,i,r),s=n[3]/255,a=1-s;this.setPixelXY(t,e,i,[Math.floor(o[0]*a+n[0]*s),Math.floor(o[1]*a+n[1]*s),Math.floor(o[2]*a+n[2]*s),o[3]],r)},setShadeBlendPixel:function(t,e,i,n,r,o){var s=this.getPixelXY(t,e,i,o),a=0>n?-1*n:n;r=r?r:0>n?[0,0,0,s[3]]:[255,255,255,s[3]];var h=Math.round((r[0]-s[0])*a)+s[0],l=Math.round((r[1]-s[1])*a)+s[1],c=Math.round((r[2]-s[2])*a)+s[2],u=Math.round((r[3]-s[3])*a)+s[3];this.setPixelXY(t,e,i,[h,l,c,u],o)},componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},rgbaToHex:function(t){return this.componentToHex(t[0])+this.componentToHex(t[1])+this.componentToHex(t[2])+this.componentToHex(t[3])},hsvToRgb:function(t,e,i){var n,r,o,s=Math.floor(6*t),a=6*t-s,h=i*(1-e),l=i*(1-a*e),c=i*(1-(1-a)*e);switch(s%6){case 0:n=i,r=c,o=h;break;case 1:n=l,r=i,o=h;break;case 2:n=h,r=i,o=c;break;case 3:n=h,r=l,o=i;break;case 4:n=c,r=h,o=i;break;case 5:n=i,r=h,o=l}return[255*n,255*r,255*o]},rgbToHsv:function(t,e,i){t/=255,e/=255,i/=255;var n,r,o=Math.max(t,e,i),s=Math.min(t,e,i),a=o,h=o-s;if(r=0===o?0:h/o,o===s)n=0;else{switch(o){case t:n=(e-i)/h+(i>e?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return[n,r,a]}}},{"./Canvas":60}],60:[function(t,e,i){"use strict";e.exports={createEmptyCanvas:function(t,e,i){var n=document.createElement("canvas");return n.width=t,n.height=e,i&&(n.id=i),n},convertImageToCanvas:function(t){var e=this.createEmptyCanvas(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),e},convertCanvasToImage:function(t,e){var i=new Image;i.onload=function(){e(i)},i.src=t.toDataURL("image/png")},createEmptyBuffer:function(t,e){var i=document.createElement("canvas");i.width=t,i.height=e;var n=i.getContext("2d");return n.getImageData(0,0,i.width,i.height)}}},{}],61:[function(t,e,i){"use strict";e.exports=function(){return{opt:{},ALGORITHM:{REDUCE:"Reduce",ORDERED:"Ordered",ERROR:"Error diffusion",ATKINSON:"Atkinson"},PALETTE:{C64:{name:"C64",data:[[0,0,0],[102,102,204],[102,204,204],[153,255,153],[204,102,102],[204,204,102],[255,255,255],[51,51,153],[102,51,0],[102,102,102],[102,153,51],[153,51,51],[153,51,153],[153,102,51],[153,153,153]]},BASIC:{name:"Basic",data:[[0,0,0],[255,0,255],[0,255,255],[255,255,255]]},SPECTRUM:{name:"ZX Spectrum",data:[[0,0,0],[0,0,255],[0,255,0],[0,255,255],[255,0,0],[255,0,255],[255,255,0],[255,255,255]]},MONO:{name:"Monochrome",data:[[0,0,0],[255,255,255]]},AMIGA_ORANGE:{name:"Amiga Orange",data:[[0,0,0],[0,0,51],[0,51,51],[102,102,204],[102,153,255],[204,102,51],[204,153,51],[204,153,153],[204,204,204],[255,153,102],[255,204,102],[255,204,153],[255,204,204],[51,0,0],[51,51,0],[51,51,51],[51,51,102],[51,51,153],[51,102,102],[51,102,153],[102,0,0],[102,51,0],[102,51,51],[102,102,51],[102,102,102],[153,51,0],[153,102,51],[153,153,153]]},AMIGA_BRONZE:{name:"Amiga Bronze",data:[[0,0,0],[204,102,51],[204,153,51],[204,153,102],[204,153,153],[204,204,153],[204,204,204],[255,153,102],[255,204,153],[255,204,204],[255,255,255],[51,0,0],[51,51,0],[51,51,51],[102,51,0],[102,51,51],[102,102,51],[102,102,102],[153,51,0],[153,102,51],[153,102,102],[153,153,102],[153,153,153]]}},dither:function(t,e,i,n){switch(n=n||{},this.opt.step=n.step||1,this.opt.algorithm=n.algorithm||this.ALGORITHM.REDUCE,this.opt.palette=n.palette.data||this.PALETTE.BASIC.data,this.w=e,this.h=i,this.opt.algorithm){case this.ALGORITHM.ERROR:return this.errorDiffusionDither(t);case this.ALGORITHM.ORDERED:return this.orderedDither(t);case this.ALGORITHM.ATKINSON:return this.atkinsonDither(t);case this.ALGORITHM.REDUCE:return this.reduceDither(t);default:throw new Error("Not a valid algorithm")}},colorDistance:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))},approximateColor:function(t){var e=this.opt.palette,i=function n(t,e,i,r){if(2==i.length)return t(e,r)<=t(e,i[1])?r:i[1];var o=i.slice(1);return r=t(e,r)<=t(e,i[1])?r:i[1],n(t,e,o,r)};return i(this.colorDistance,t,e,e[0])},threshold:function(t){return 127>t?0:255},orderedDither:function(t){for(var e=new Uint8ClampedArray(t),i=this.w,n=this.h,r=this.opt.step,o=3,s=[[1,9,3,11],[13,5,15,7],[4,12,2,10],[16,8,14,6]],a=0;n>a;a+=r)for(var h=0;i>h;h+=r){var l=4*h+4*a*i,c=l,u=l+1,f=l+2;e[c]+=s[h%4][a%4]*o,e[u]+=s[h%4][a%4]*o,e[f]+=s[h%4][a%4]*o;for(var d=[e[c],e[u],e[f]],p=this.approximateColor(d),g=p[0],v=p[1],m=p[2],y=0;r>y;y++)for(var b=0;r>b;b++){var _=l+4*y+4*i*b;e[_]=g,e[_+1]=v,e[_+2]=m}}return e},reduceDither:function(t){for(var e=new Uint8ClampedArray(t),i=this.w,n=this.h,r=this.opt.step,o=0;n>o;o+=r)for(var s=0;i>s;s+=r)for(var a=4*s+4*o*i,h=a,l=a+1,c=a+2,u=[e[h],e[l],e[c]],f=this.approximateColor(u),d=f[0],p=f[1],g=f[2],v=0;r>v;v++)for(var m=0;r>m;m++){var y=a+4*v+4*i*m;e[y]=d,e[y+1]=p,e[y+2]=g}return e},atkinsonDither:function(t){for(var e=new Uint8ClampedArray(t),i=new Uint8ClampedArray(t),n=this.w,r=this.h,o=this.opt.step,s=1/8,a=0;r>a;a+=o)for(var h=0;n>h;h+=o){var l=4*h+4*a*n,c=function(t,e){return 4*t+4*e*n},u=l,f=l+1,d=l+2,p=[e[u],e[f],e[d]],g=this.approximateColor(p),v=[];v[u]=e[u]-g[0],v[f]=e[f]-g[1],v[d]=e[d]-g[2],e[c(h+o,a)+0]+=s*v[u],e[c(h-o,a+o)+0]+=s*v[u],e[c(h,a+o)+0]+=s*v[u],e[c(h+o,a+o)+0]+=s*v[u],e[c(h+2*o,a)+0]+=s*v[u],e[c(h,a+2*o)+0]+=s*v[u],e[c(h+o,a)+1]+=s*v[u],e[c(h-o,a+o)+1]+=s*v[u],e[c(h,a+o)+1]+=s*v[u],e[c(h+o,a+o)+1]+=s*v[u],e[c(h+2*o,a)+1]+=s*v[u],e[c(h,a+2*o)+1]+=s*v[u],e[c(h+o,a)+2]+=s*v[u],e[c(h-o,a+o)+2]+=s*v[u],e[c(h,a+o)+2]+=s*v[u],e[c(h+o,a+o)+2]+=s*v[u],e[c(h+2*o,a)+2]+=s*v[u],e[c(h,a+2*o)+2]+=s*v[u];for(var m=g[0],y=g[1],b=g[2],_=0;o>_;_++)for(var x=0;o>x;x++){var w=l+4*_+4*n*x;i[w]=m,i[w+1]=y,i[w+2]=b}}return i},errorDiffusionDither:function(t){for(var e=new Uint8ClampedArray(t),i=new Uint8ClampedArray(t),n=this.w,r=this.h,o=this.opt.step,s=1/16,a=0;r>a;a+=o)for(var h=0;n>h;h+=o){var l=4*h+4*a*n,c=function(t,e){return 4*t+4*e*n},u=l,f=l+1,d=l+2,p=[e[u],e[f],e[d]],g=this.approximateColor(p),v=[];v[u]=e[u]-g[0],v[f]=e[f]-g[1],v[d]=e[d]-g[2],e[c(h+o,a)]=e[c(h+o,a)]+7*s*v[u],e[c(h-o,a+1)]=e[c(h-1,a+o)]+3*s*v[u],e[c(h,a+o)]=e[c(h,a+o)]+5*s*v[u],e[c(h+o,a+o)]=e[c(h+1,a+o)]+1*s*v[u],e[c(h+o,a)+1]=e[c(h+o,a)+1]+7*s*v[f],e[c(h-o,a+o)+1]=e[c(h-o,a+o)+1]+3*s*v[f],e[c(h,a+o)+1]=e[c(h,a+o)+1]+5*s*v[f],e[c(h+o,a+o)+1]=e[c(h+o,a+o)+1]+1*s*v[f],e[c(h+o,a)+2]=e[c(h+o,a)+2]+7*s*v[d],e[c(h-o,a+o)+2]=e[c(h-o,a+o)+2]+3*s*v[d],e[c(h,a+o)+2]=e[c(h,a+o)+2]+5*s*v[d],e[c(h+o,a+o)+2]=e[c(h+o,a+o)+2]+1*s*v[d];for(var m=g[0],y=g[1],b=g[2],_=0;o>_;_++)for(var x=0;o>x;x++){var w=l+4*_+4*n*x;i[w]=m,i[w+1]=y,i[w+2]=b}}return i}}}},{}],62:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=jQuery;e.exports=function(){var t=function(t,e){this.options=e,this.$elementFilestyle=[],this.$element=r(t)};t.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},disabled:function(t){if(t===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(t!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(t){if(t===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(t!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(t){if(t===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(t!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".glyphicon").remove())}},input:function(t){if(t===!0)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(t!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var e=this.pushNameFiles();e.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(t){if(void 0===t)return this.options.size;var e=this.$elementFilestyle.find("label"),i=this.$elementFilestyle.find("input");e.removeClass("btn-lg btn-sm"),i.removeClass("input-lg input-sm"),"nr"!=t&&(e.addClass("btn-"+t),i.addClass("input-"+t))},buttonText:function(t){return void 0===t?this.options.buttonText:(this.options.buttonText=t,void this.$elementFilestyle.find("label span").html(this.options.buttonText))},buttonName:function(t){return void 0===t?this.options.buttonName:(this.options.buttonName=t,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(t){return void 0===t?this.options.iconName:void this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="glyphicon '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" disabled> ':""},pushNameFiles:function(){var t="",e=[];void 0===this.$element[0].files?e[0]={name:this.$element[0]&&this.$element[0].value}:e=this.$element[0].files;for(var i=0;i<e.length;i++)t+=e[i].name.split("\\").pop()+", ";return""!==t?this.$elementFilestyle.find(":text").val(t.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),e},constructor:function(){var t=this,e="",i=t.$element.attr("id"),n="";""!==i&&i||(i="filestyle-"+r(".bootstrap-filestyle").length,t.$element.attr({id:i})),n='<span class="group-span-filestyle '+(t.options.input?"input-group-btn":"")+'"><label for="'+i+'" class="btn '+t.options.buttonName+" "+("nr"==t.options.size?"":"btn-"+t.options.size)+'" '+(t.options.disabled?'disabled="true"':"")+">"+t.htmlIcon()+t.options.buttonText+"</label></span>",e=t.options.buttonBefore?n+t.htmlInput():t.htmlInput()+n,t.$elementFilestyle=r('<div class="bootstrap-filestyle input-group">'+e+"</div>"),t.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(e){return 13===e.keyCode||32===e.charCode?(t.$elementFilestyle.find("label").click(),!1):void 0}),t.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(t.$elementFilestyle),t.options.disabled&&t.$element.attr("disabled","true"),t.$element.change(function(){var e=t.pushNameFiles();0==t.options.input&&t.options.badge?0==t.$elementFilestyle.find(".badge").length?t.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"):0==e.length?t.$elementFilestyle.find(".badge").remove():t.$elementFilestyle.find(".badge").html(e.length):t.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&t.$elementFilestyle.find("label").click(function(){return t.$element.click(),!1})}};var e=r.fn.filestyle;r.fn.filestyle=function(e,i){var o="",s=this.each(function(){if("file"===r(this).attr("type")){var s=r(this),a=s.data("filestyle"),h=r.extend({},r.fn.filestyle.defaults,e,"object"===("undefined"==typeof e?"undefined":n(e))&&e);a||(s.data("filestyle",a=new t(this,h)),a.constructor()),"string"==typeof e&&(o=a[e](i))}});return"undefined"!=typeof o?o:s},r.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1},r.fn.filestyle.noConflict=function(){return r.fn.filestyle=e,this},r(function(){r(".filestyle").each(function(){var t=r(this),e={input:"false"!==t.attr("data-input"),icon:"false"!==t.attr("data-icon"),buttonBefore:"true"===t.attr("data-buttonBefore"),disabled:"true"===t.attr("data-disabled"),size:t.attr("data-size"),buttonText:t.attr("data-buttonText"),buttonName:t.attr("data-buttonName"),iconName:t.attr("data-iconName"),badge:"false"!==t.attr("data-badge")};t.filestyle(e)})})}()},{}],63:[function(t,e,i){"use strict";var n=t("lodash"),r=t("./Dithering"),o=t("./Buffer");t("./Mixin");e.exports={border:function(t,e,i,n){for(var r,s=0;i>s;s++)if(n>s||s>=e-n)for(r=0;e>r;r++)o.setPixelXY(t,r,s,o.COLORS.BLACK,e);else{for(r=0;n>r;r++)o.setPixelXY(t,r,s,o.COLORS.BLACK,e);for(r=e-n;e>r;r++)o.setPixelXY(t,r,s,o.COLORS.BLACK,e)}return t},emboss:function(t,e,i,n,r,o){r=r||135,o=o||30,r=r/180*Math.PI,o=o/180*Math.PI;for(var s=3*n,a=255.9,h=[],l=e,c=0;c<t.length;c+=4)h[c/4]=(t[c]+t[c+1]+t[c+2])/3;var u,f,d,p,g,v,m,y,b,_,x;p=Math.floor(Math.cos(r)*Math.cos(o)*a),g=Math.floor(Math.sin(r)*Math.cos(o)*a),v=Math.floor(Math.sin(o)*a),d=Math.floor(1530/s),m=d*d,y=d*v,x=v;for(var w=0,C=0;i>C;C++,w+=l)for(var S=w,T=S+l,O=T+l,E=0;e>E;E++,S++,T++,O++){var A=4*(C*e+E);0!=C&&i-2>C&&0!=E&&e-2>E?(u=h[S-1]+h[T-1]+h[O-1]-h[S+1]-h[T+1]-h[O+1],f=h[O-1]+h[O]+h[O+1]-h[S-1]-h[S]-h[S+1],_=0==u&&0==f?x:(b=u*p+f*g+y)<0?0:Math.floor(b/Math.sqrt(u*u+f*f+m))):_=x,t[A]=t[A+1]=t[A+2]=_}return t},saturation:function(t,e,i,n){for(var r=.3086,o=.6084,s=.082,a=(1-n)*r+n,h=(1-n)*r,l=(1-n)*r,c=(1-n)*o,u=(1-n)*o+n,f=(1-n)*o,d=(1-n)*s,p=(1-n)*s,g=(1-n)*s+n,v=0;i>v;v++)for(var m=0;e>m;m++){var y=4*(v*e+m);t[y]=a*t[y]+c*t[y+1]+d*t[y+2],t[y+1]=h*t[y]+u*t[y+1]+p*t[y+2],t[y+2]=l*t[y]+f*t[y+1]+g*t[y+2]}return t},blur:function(t,e,i,n){var r,o=e<<2;0>n&&(n=0),r=n>=2.5?.98711*n-.9633:n>=.5?3.97156-4.14554*Math.sqrt(1-.26891*n):2*n*(3.97156-4.14554*Math.sqrt(.865545));var s,a,h,l,c,u,f,d=r*r,p=d*r,g=1.57825+2.44413*r+1.4281*d+.422205*p,v=(2.44413*r+2.85619*d+1.26661*p)/g,m=-(1.4281*d+1.26661*p)/g,y=.422205*p/g,b=1-(v+m+y);for(f=0;3>f;f++)for(var _=0;i>_;_++){for(s=_*o+f,a=_*o+(e-1<<2)+f,h=t[s],l=h,c=l,u=c;a>=s;s+=4)h=b*t[s]+v*l+m*c+y*u,t[s]=h,u=c,c=l,l=h;for(s=_*o+(e-1<<2)+f,a=_*o+f,h=t[s],l=h,c=l,u=c;s>=a;s-=4)h=b*t[s]+v*l+m*c+y*u,t[s]=h,u=c,c=l,l=h}for(f=0;3>f;f++)for(var x=0;e>x;x++){for(s=(x<<2)+f,a=(i-1)*o+(x<<2)+f,h=t[s],l=h,c=l,u=c;a>=s;s+=o)h=b*t[s]+v*l+m*c+y*u,t[s]=h,u=c,c=l,l=h;for(s=(i-1)*o+(x<<2)+f,a=(x<<2)+f,h=t[s],l=h,c=l,u=c;s>=a;s-=o)h=b*t[s]+v*l+m*c+y*u,t[s]=h,u=c,c=l,l=h}return t},hue:function(t,e,i,n){for(var r=0;i>r;r++)for(var s=0;e>s;s++){var a=4*(r*e+s),h=o.rgbToHsv(t[a],t[a+1],t[a+2]);for(h[0]+=n;h[0]<0;)h[0]+=360;for(var l=o.hsvToRgb(h[0],h[1],h[2]),c=0;3>c;c++)t[a+c]=l[c]}return t},contrast:function(t,e){for(var i=259*(e+255)/(255*(259-e)),n=0;n<t.length;n+=4)t[n]=i*(t[n]-128)+128,t[n+1]=i*(t[n+1]-128)+128,t[n+2]=i*(t[n+2]-128)+128;return t},zhangSuen:function(t,e,i){function r(t,i,n){for(var r=[],s=0;n>s;s++){for(var a=[],h=0;i>h;h++){var l=o.getPixelXY(t,h,s,e);if(0==h||0==s||h==i-1||s==n-1)a.push(!1);else{var c=Math.floor((l[0]+l[1]+l[2])/3);a.push(32>c)}}r.push(a)}return r}function s(t,i,n){for(var r=new Uint8ClampedArray(i*n*4),s=0;n>s;s++)for(var a=0;i>a;a++)t[s][a]?o.setPixelXY(r,a,s,o.COLORS.BLACK,e):o.setPixelXY(r,a,s,o.COLORS.WHITE,e);return r}function a(t,e,i){var n=0;return i[t-1][e]&&n++,i[t-1][e+1]&&n++,i[t-1][e-1]&&n++,i[t][e+1]&&n++,i[t][e-1]&&n++,i[t+1][e]&&n++,i[t+1][e+1]&&n++,i[t+1][e-1]&&n++,n}function h(t,e,i){var n=i[t][e-1],r=i[t+1][e-1],o=i[t+1][e],s=i[t+1][e+1],a=i[t][e+1],h=i[t-1][e+1],l=i[t-1][e],c=i[t-1][e-1];return+(!n&&r)+ +(!r&&o)+ +(!o&&s)+ +(!s&&a)+ +(!a&&h)+ +(!h&&l)+ +(!l&&c)+ +(!c&&n)}function l(t,e,i,n){var r=i[t][e-1],o=i[t+1][e],s=i[t][e+1],l=i[t-1][e],c=a(t,e,i);if(c>=2&&6>=c&&1==h(t,e,i))if(n){if(!(r&&o&&l||r&&s&&l))return!0}else if(!(r&&o&&s||o&&s&&l))return!0;return!1}function c(t,e,i){for(var n=0,r=1;r<e.length-1;r++)for(var o=1;o<e[0].length-1;o++)l(r,o,e,2==t)&&(i[r][o]&&n++,i[r][o]=!1);return n}function u(t,e,i){var o,a=r(t,e,i),h=0;do o=n.deepClone(a),h=c(1,o,a),o=n.deepClone(a),h+=c(2,o,a);while(h>0);return s(a,e,i)}return u(t,e,i)},kaleidoskopeCenter:function(t,e,i){t=o.grab(t,e,i,0,0,e,i);var n=Math.floor(e/2),r=Math.floor(i/2),s=o.grab(t,e,i,0,0,n,r);return t=o.draw(s,n,r,t,0,0,e,i),s=this.flipX(s,n,r),t=o.draw(s,n,r,t,n,0,e,i),s=this.flipY(s,n,r),t=o.draw(s,n,r,t,n,r,e,i),s=this.flipX(s,n,r),t=o.draw(s,n,r,t,0,r,e,i)},kaleidoskopeCenterOutside:function(t,e,i){t=o.grab(t,e,i,0,0,e,i);var n=Math.floor(e/2),r=Math.floor(i/2),s=o.grab(t,e,i,0,0,n,r);return t=o.draw(s,n,r,t,0,0,e,i),s=this.flipY(s,n,r),t=o.draw(s,n,r,t,n,0,e,i),s=this.flipX(s,n,r),t=o.draw(s,n,r,t,n,r,e,i),s=this.flipY(s,n,r),t=o.draw(s,n,r,t,0,r,e,i)},kaleidoskopeOutside:function(t,e,i){t=o.grab(t,e,i,0,0,e,i);var n=Math.floor(e/2),r=Math.floor(i/2),s=o.grab(t,e,i,0,0,n,r);return s=this.flipX(s,n,r),t=o.draw(s,n,r,t,0,0,e,i),s=this.flipX(s,n,r),t=o.draw(s,n,r,t,n,0,e,i),s=this.flipY(s,n,r),t=o.draw(s,n,r,t,n,r,e,i),s=this.flipX(s,n,r),t=o.draw(s,n,r,t,0,r,e,i)},kaleidoskopeVert:function(t,e,i){t=o.grab(t,e,i,0,0,e,i);var n=Math.floor(i/2),r=o.grab(t,e,i,0,0,e,n);return t=o.draw(r,e,n,t,0,0,e,i),r=this.flipY(r,e,n),t=o.draw(r,e,n,t,0,n,e,i)},kaleidoskopeCard:function(t,e,i){t=o.grab(t,e,i,0,0,e,i);var n=Math.floor(i/2),r=o.grab(t,e,i,0,0,e,n);return t=o.draw(r,e,n,t,0,0,e,i),r=this.flipY(r,e,n),r=this.flipX(r,e,n),t=o.draw(r,e,n,t,0,n,e,i)},kaleidoskopeHoriz:function(t,e,i){t=o.grab(t,e,i,0,0,e,i);var n=Math.floor(e/2),r=o.grab(t,e,i,0,0,n,i);return t=o.draw(r,n,i,t,0,0,e,i),r=this.flipX(r,n,i),t=o.draw(r,n,i,t,n,0,e,i)},sobel:function(t,e){for(var i=this.grayscale(t),n=this.convolve3x3(i,e,[-1,0,1,-2,0,2,-1,0,1]),r=this.convolve3x3(i,e,[-1,-2,-1,0,0,0,1,2,1]),o=new Uint8ClampedArray(t.length),s=0;s<t.length;s+=4){var a=Math.abs(n[s]);o[s]=a;var h=Math.abs(r[s]);o[s+1]=h,o[s+2]=(a+h)/4,o[s+3]=255}return o},convolute:function(t,e,i,n,r){r=r||!1;for(var o=Math.round(Math.sqrt(n.length)),s=Math.floor(o/2),a=new Uint8ClampedArray(t.length),h=+r,l=0;i>l;l++)for(var c=0;e>c;c++){for(var u=l,f=c,d=4*(l*e+c),p=0,g=0,v=0,m=0,y=0;o>y;y++)for(var b=0;o>b;b++){var _=u+y-s,x=f+b-s;if(_>=0&&i>_&&x>=0&&e>x){var w=4*(_*e+x),C=n[y*o+b];p+=t[w]*C,g+=t[w+1]*C,v+=t[w+2]*C,m+=t[w+3]*C}}a[d]=p,a[d+1]=g,a[d+2]=v,a[d+3]=m+h*(255-m)}return a},convolve3x3:function(t,e,i,n,r){n||(n=i.reduce(function(t,e){return t+e})||1);for(var o=new Uint8ClampedArray(t.length),s=o.length,a=0,h=0;s>h;h++)if((h+1)%4!==0){a=0;for(var l=[t[h-4*e-4]||t[h],t[h-4*e]||t[h],t[h-4*e+4]||t[h],t[h-4]||t[h],t[h],t[h+4]||t[h],t[h+4*e-4]||t[h],t[h+4*e]||t[h],t[h+4*e+4]||t[h]],c=0;9>c;c++)a+=l[c]*i[c];a/=n,r&&(a+=r),o[h]=a}else o[h]=t[h];return o},invert:function(t){for(var e=0;e<t.length;e+=4)t[e]=255-t[e],t[e+1]=255-t[e+1],t[e+2]=255-t[e+2];return t},flipX:function(t,e,i){var r,o,s,a,h,l=n.deepClone(t);for(a=0;i>a;a++)for(s=0;e>s;s++)for(r=4*(a*e+s),o=4*(a*e+(e-s-1)),h=0;4>h;h++)l[r+h]=t[o+h];return l},flipY:function(t,e,i){var r,o,s,a,h,l=n.deepClone(t);for(a=0;i>a;a++)for(s=0;e>s;s++)for(r=4*(a*e+s),o=4*((i-a-1)*e+s),h=0;4>h;h+=1)l[r+h]=t[o+h];return l},flipXY:function(t,e,i){return this.flipY(this.flipX(t,e,i),e,i)},threshold:function(t,e){for(var i=0;i<t.length;i+=4){var n=t[i],r=t[i+1],o=t[i+2],s=.2126*n+.7152*r+.0722*o>=e?255:0;t[i]=t[i+1]=t[i+2]=s}return t},brightness:function(t,e,i,n){for(var r=0;i>r;r++)for(var s=0;e>s;s++){var a=4*(r*e+s),h=o.rgbToHsv(t[a],t[a+1],t[a+2]);h[2]+=n,h[2]<0?h[2]=0:h[2]>1&&(h[2]=1);for(var l=o.hsvToRgb(h[0],h[1],h[2]),c=0;3>c;c++)t[a+c]=l[c]}return t},monochrome:function(t){for(var e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],r=t[e+2],o=Math.floor((i+n+r)/3);t[e]=t[e+1]=t[e+2]=o>127?255:0,t[e+3]=255}return t},grayscale:function(t){for(var e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],r=t[e+2],o=.2126*i+.7152*n+.0722*r;t[e]=t[e+1]=t[e+2]=o}return t},sepia:function(t){for(var e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],r=t[e+2];t[e]=.393*i+.769*n+.189*r,t[e+1]=.349*i+.686*n+.168*r,t[e+2]=.272*i+.534*n+.131*r}return t},red:function(t){for(var e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],r=t[e+2];t[e]=(i+n+r)/3,t[e+1]=t[e+2]=0}return t},green:function(t){for(var e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],r=t[e+2];t[e+1]=(i+n+r)/3,t[e]=t[e+2]=0}return t},blue:function(t){for(var e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],r=t[e+2];t[e+2]=(i+n+r)/3,t[e]=t[e+1]=0}return t},ditherC64_REDUCE:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.C64,algorithm:r.ALGORITHM.REDUCE})},ditherC64_ORDERED:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.C64,algorithm:r.ALGORITHM.ORDERED})},ditherC64_ERROR:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.C64,algorithm:r.ALGORITHM.ERROR})},ditherC64_ATKINSON:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.C64,algorithm:r.ALGORITHM.ATKINSON})},ditherSPECTRUM_ATKINSON:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.SPECTRUM,algorithm:r.ALGORITHM.ATKINSON})},ditherSPECTRUM_REDUCE:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.SPECTRUM,algorithm:r.ALGORITHM.REDUCE})},ditherSPECTRUM_ORDERED:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.SPECTRUM,algorithm:r.ALGORITHM.ORDERED})},ditherSPECTRUM_ERROR:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.SPECTRUM,algorithm:r.ALGORITHM.ERROR})},ditherAMIGA_BRONZE_ATKINSON:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_BRONZE,algorithm:r.ALGORITHM.ATKINSON})},ditherAMIGA_BRONZE_REDUCE:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_BRONZE,algorithm:r.ALGORITHM.REDUCE})},ditherAMIGA_BRONZE_ORDERED:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_BRONZE,algorithm:r.ALGORITHM.ORDERED})},ditherAMIGA_BRONZE_ERROR:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_BRONZE,algorithm:r.ALGORITHM.ERROR})},ditherMONO_ATKINSON:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.MONO,algorithm:r.ALGORITHM.ATKINSON})},ditherMONO_REDUCE:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.MONO,algorithm:r.ALGORITHM.REDUCE})},ditherMONO_ORDERED:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.MONO,algorithm:r.ALGORITHM.ORDERED})},ditherMONO_ERROR:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.MONO,algorithm:r.ALGORITHM.ERROR})},ditherAMIGA_ORANGE_ATKINSON:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_ORANGE,algorithm:r.ALGORITHM.ATKINSON})},ditherAMIGA_ORANGE_REDUCE:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_ORANGE,algorithm:r.ALGORITHM.REDUCE})},ditherAMIGA_ORANGE_ORDERED:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_ORANGE,algorithm:r.ALGORITHM.ORDERED})},ditherAMIGA_ORANGE_ERROR:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.AMIGA_ORANGE,algorithm:r.ALGORITHM.ERROR})},ditherBASIC_ATKINSON:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.BASIC,algorithm:r.ALGORITHM.ATKINSON})},ditherBASIC_REDUCE:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.BASIC,algorithm:r.ALGORITHM.REDUCE})},ditherBASIC_ORDERED:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.BASIC,algorithm:r.ALGORITHM.ORDERED})},ditherBASIC_ERROR:function(t,e,i){return r.dither(t,e,i,{palette:r.PALETTE.BASIC,algorithm:r.ALGORITHM.ERROR})}}},{"./Buffer":59,"./Dithering":61,"./Mixin":64,lodash:57}],64:[function(t,e,i){"use strict";t("lodash");e.exports={capitalize:function(t){return t.length&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},format:function(){for(var t=arguments[0],e=1;e<arguments.length;e++){var i=new RegExp("\\{"+(e-1)+"\\}","gm");t=t.replace(i,arguments[e])}return t},deepClone:function(t){return this.map(t,this.clone)}}},{lodash:57}],65:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=t("./Triangle"),o=n(r),s=t("./Filter"),a=t("./Dithering"),h=t("lodash");e.exports={options:{mirror:{name:"Отражение",type:"Select",options:[{text:"Нет"},{text:"По оси X",cb:s.flipX},{text:"По оси Y",cb:s.flipY},{text:"По оси X и Y",cb:s.flipXY}]},kaleidoscope:{name:"Калейдоскоп",type:"Select",options:[{text:"Нет"},{text:"К центру",cb:s.kaleidoskopeCenter},{text:"В стороны",cb:s.kaleidoskopeOutside},{text:"К центру и в стороны",cb:s.kaleidoskopeCenterOutside},{text:"По горизонтали",cb:s.kaleidoskopeHoriz},{text:"По вертикали",cb:s.kaleidoskopeVert},{text:"Игральная карта",cb:s.kaleidoskopeCard}]},colors:{name:"Цвет",type:"Select",options:[{text:"Нет"},{text:"Монохром",cb:s.monochrome},{text:"Градации серого",cb:s.grayscale},{text:"Сепия",cb:s.sepia},{text:"Красный",cb:s.red},{text:"Зеленый",cb:s.green},{text:"Синий",cb:s.blue}]},brightness:{name:"Яркость",type:"Slider",min:-1,max:1,def:0,step:.01},contrast:{name:"Контраст",type:"Slider",min:0,max:259,def:0},hue:{name:"Тон",type:"Slider",min:-1,max:1,def:0,step:.01},saturation:{name:"Насыщенность",type:"Slider",min:0,max:2,def:0,step:.01},threshold:{name:"Порог",type:"Slider",min:0,max:200,def:0,cb:s.threshold},blur:{name:"Размытие",type:"Slider",min:0,max:10,def:0,step:.1},sharpen:{name:"Резкость",type:"Slider",min:0,max:10,def:0},edge:{name:"Поиск края",type:"Slider",min:0,max:2,def:0},bump:{name:"Выдавливание",type:"Slider",min:0,max:1,def:0},emboss:{name:"Рельеф",type:"Slider",min:0,max:10,def:0,step:.1},sobel:{name:"Оператор Собеля",type:"Slider",min:0,max:1,def:0},thin:{name:"Контур",type:"Slider",min:0,max:2,def:0},dither:{name:"Дизеринг",type:"Select",options:function(){var t=[{text:"Нет"}];return h.each(a.PALETTE,function(e,i){var n=e.name;h.each(a.ALGORITHM,function(e,r){t.push({text:h.format("{0} ({1})",n,e),cb:s[h.format("dither{0}_{1}",i,r)]})},this)},this),t}()},pattern:{name:"Паттерн",type:"Select",options:function(){var t=[{text:"Нет"}];return Object.keys(o["default"]).forEach(function(e){t.push({text:h.capitalize(e),model:e})}),t}()},zhangSuen:{name:"Скелет",type:"Slider",min:0,max:1,def:0},invert:{name:"Инверсия",type:"Slider",min:0,max:1,def:0},border:{name:"Рамка",type:"Slider",min:0,max:10,def:0}}}},{"./Dithering":61,"./Filter":63,"./Triangle":70,lodash:57}],66:[function(t,e,i){"use strict";e.exports={"Fun dithering":{pattern:5,kaleidoscope:4},Thin:{saturation:2,colors:2,brightness:.15,contrast:95,sharpen:2,zhangSuen:1}}},{}],67:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=t("./Triangle"),o=n(r),s=(t("backbone"),t("lodash")),a=t("./Filter"),h=t("./Options");s.mixin(t("./Mixin")),e.exports={w:0,h:0,doit:function(t,e){return this.filter=e,this.options=h.options,this.data=t.data,this.w=t.width,this.h=t.height,this.applyPost(),{data:this.data,w:this.w,h:this.h}},applyPost:function(){0!==Object.getOwnPropertyNames(this.filter).length&&s.each(Object.keys(this.filter),function(t){this["post"+s.capitalize(t)](this.filter[t])},this)},postMirror:function(t){parseInt(t)&&this.options.mirror.options[t].cb&&this.options.mirror.options[t]&&(this.data=this.options.mirror.options[t].cb.call(a,this.data,this.w,this.h))},postInvert:function(t){parseInt(t)&&(this.data=a.invert(this.data))},postBorder:function(t){parseInt(t)&&(this.data=a.border(this.data,this.w,this.h,parseInt(t)))},postSaturation:function(t){parseFloat(t)&&(this.data=a.saturation(this.data,this.w,this.h,parseFloat(t)))},postDither:function(t){parseInt(t)&&this.options.dither.options[t].cb&&this.options.dither.options[t]&&(this.data=this.options.dither.options[t].cb.call(this,this.data,this.w,this.h))},postThin:function(t){if(parseInt(t))switch(parseInt(t)){case 1:this.data=a.convolute(this.data,this.w,this.h,[1,1,1,1,-7,1,1,1,1]);break;default:this.data=a.emboss(this.data,this.w,this.h,5,180,90)}},postZhangSuen:function(t){parseInt(t)&&(this.data=a.zhangSuen(this.data,this.w,this.h))},postSobel:function(t){parseInt(t)&&(this.data=a.sobel(this.data,this.w))},postEmboss:function(t){parseFloat(t)&&(this.data=a.emboss(this.data,this.w,this.h,parseFloat(t)))},postEdge:function(t){if(parseInt(t)){var e=parseInt(t),i=[];switch(e){case 1:i=[1,1,1,1,-7,1,1,1,1];break;case 2:i=[-5,0,0,0,0,0,0,0,5]}this.data=a.convolve3x3(this.data,this.w,i)}},postSharpen:function(t){if(parseInt(t)){var e=parseInt(t),i=[];2>e?(e+=4,i=[0,-1,0,-1,e,-1,0,-1,0]):(e+=7,i=[-1,-1,-1,-1,e,-1,-1,-1,-1]),this.data=a.convolute(this.data,this.w,this.h,i)}},postBump:function(t){parseInt(t)&&(this.data=a.convolve3x3(this.data,this.w,[-1,-1,0,-1,1,1,0,1,1]))},postPattern:function(t){if(parseInt(t)&&this.options.pattern.options[t]&&this.options.pattern.options[t].model){var e=o["default"][this.options.pattern.options[t].model](),i=e.doit(this.data,this.w,this.h);this.data=i.data,this.w=i.w,this.h=i.h}},postBlur:function(t){parseFloat(t)&&(this.data=a.blur(this.data,this.w,this.h,parseFloat(t)))},postThreshold:function(t){parseInt(t)&&this.options.threshold.cb&&(this.data=this.options.threshold.cb.call(this,this.data,parseInt(t)))},postContrast:function(t){parseInt(t)&&a.contrast&&(this.data=a.contrast(this.data,parseInt(t)))},postHue:function(t){parseFloat(t)&&a.hue&&(this.data=a.hue(this.data,this.w,this.h,parseFloat(t)))},postBrightness:function(t){parseFloat(t)&&a.brightness&&(this.data=a.brightness(this.data,this.w,this.h,parseFloat(t)))},postColors:function(t){parseInt(t)&&this.options.colors.options[t]&&this.options.colors.options[t].cb&&(this.data=this.options.colors.options[t].cb.call(this,this.data))},postKaleidoscope:function(t){parseInt(t)&&this.options.kaleidoscope.options[t]&&this.options.kaleidoscope.options[t].cb&&(this.data=this.options.kaleidoscope.options[t].cb.call(a,this.data,this.w,this.h))}}},{"./Filter":63,"./Mixin":64,"./Options":65,"./Triangle":70,backbone:2,lodash:57}],68:[function(t,e,i){"use strict";var n=t("./Canvas");t("fabric"),e.exports={generate:function(t,e,i){i=i||100;var r=(n.createEmptyCanvas(t,e,"random-canvas"),new fabric.Canvas("random-canvas"));
r.setDimensions({width:t,height:e});var o=Object.keys(this.objects),s=new fabric.Rect({left:0,top:0,fill:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",width:t,height:e});r.add(s);for(var a=0;a<=Math.round(Math.random()*i);a++){var h=o[Math.round(Math.random()*(o.length-1))];this.objects[h](r,t,e)}return r.toDataURL()},objects:{poly:function(t,e,i){for(var n=[],r=0;r<=Math.round(100*Math.random());r++)n.push({x:Math.round(Math.random()*e),y:Math.round(Math.random()*i)});var o=new fabric.Polygon(n,{fill:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",left:Math.round(Math.random()*e),top:Math.round(Math.random()*i),angle:Math.round(360*Math.random()),opacity:Math.round(100*Math.random())/100});o.setShadow({color:"rgba(0,0,0,0.3)",offsetX:Math.round(20*Math.random()),offsetY:Math.round(20*Math.random())}),t.add(o)},rect:function r(t,e,i){var r=new fabric.Rect({left:Math.round(Math.random()*e),top:Math.round(Math.random()*i),fill:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",width:Math.round(Math.random()*e),height:Math.round(Math.random()*i),angle:Math.round(360*Math.random()),opacity:Math.round(100*Math.random())/100});r.setShadow({color:"rgba(0,0,0,0.3)",offsetX:Math.round(20*Math.random()),offsetY:Math.round(20*Math.random())}),t.add(r)},ellipse:function(t,e,i){var n=new fabric.Ellipse({left:Math.round(Math.random()*e),top:Math.round(Math.random()*i),fill:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",rx:Math.round(Math.random()*e),ry:Math.round(Math.random()*i),opacity:Math.round(100*Math.random())/100});n.setShadow({color:"rgba(0,0,0,0.3)",offsetX:Math.round(20*Math.random()),offsetY:Math.round(20*Math.random())}),t.add(n)},triangle:function(t,e,i){var n=new fabric.Triangle({left:Math.round(Math.random()*e),top:Math.round(Math.random()*i),fill:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",width:Math.round(Math.random()*e),height:Math.round(Math.random()*i),angle:Math.round(360*Math.random()),opacity:Math.round(100*Math.random())/100});n.setShadow({color:"rgba(0,0,0,0.3)",offsetX:Math.round(20*Math.random()),offsetY:Math.round(20*Math.random())}),t.add(n)},circle:function(t,e,i){var n=new fabric.Circle({left:Math.round(Math.random()*e),top:Math.round(Math.random()*i),fill:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",radius:Math.round(Math.random()*e/2),opacity:Math.round(100*Math.random())/100});n.setShadow({color:"rgba(0,0,0,0.3)",offsetX:Math.round(20*Math.random()),offsetY:Math.round(20*Math.random())}),t.add(n)}}}},{"./Canvas":60,fabric:1}],69:[function(t,e,i){"use strict";e.exports={getFilter:function(){return localStorage.filter?JSON.parse(localStorage.filter):{}},setFilter:function(t){localStorage.filter=JSON.stringify(t||{})},unsetFilter:function(){delete localStorage.filter},getEncoded:function(){return localStorage.encoded?JSON.parse(localStorage.encoded):null},setEncoded:function(t){localStorage.encoded=JSON.stringify(t)}}},{}],70:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var r=t("../models/TriangleDithering"),o=n(r),s=t("../models/TriangleKuwahara"),a=n(s),h=t("../models/TriangleCross"),l=n(h),c=t("../models/TrianglePeecol"),u=t("../models/TriangleBlocks"),f=t("../models/TriangleCrossRadial"),d=t("../models/TriangleLine"),p=t("../models/TriangleMeander"),g=t("../models/TriangleRealCross"),v=t("../models/TriangleSkull"),m=t("../models/TriangleStone"),y=t("../models/TriangleStoneAdvanced");i["default"]={Cross:function(){return new l["default"]},"Cross Radial":function(){return new f},Peecol:function(){return new c},Blocks:function(){return new u},Dithering:function(){return new o["default"]},Kuwahara:function(){return new a["default"]},Line:function(){return new d},Meander:function(){return new p},"Real Cross":function(){return new g},Skull:function(){return new v},Stone:function(){return new m},"Stone Advanced":function(){return new y}}},{"../models/TriangleBlocks":72,"../models/TriangleCross":73,"../models/TriangleCrossRadial":74,"../models/TriangleDithering":75,"../models/TriangleKuwahara":76,"../models/TriangleLine":77,"../models/TriangleMeander":78,"../models/TrianglePeecol":79,"../models/TriangleRealCross":80,"../models/TriangleSkull":81,"../models/TriangleStone":82,"../models/TriangleStoneAdvanced":83}],71:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("backbone"),l=n(h),c=(t("lodash"),t("../lib/Buffer")),u=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.TILE_WIDTH=0,t.TILE_HEIGHT=0,t.w=0,t.h=0,t.pattern=[],t}return s(e,t),a(e,[{key:"getColors",value:function(t,e,i){return[]}},{key:"doit",value:function(t,e,i){return this.w=e,this.h=i,{data:t,w:this.w,h:this.h}}},{key:"crop",value:function(t,e,i,n,r){return t=c.grab(t,this.w,this.h,e,i,n,r),this.w=n,this.h=r,t}},{key:"getPixelXY",value:function(t,e,i){return c.getPixelXY(t,e,i,this.w)}},{key:"setPixelXY",value:function(t,e,i,n){c.setPixelXY(t,e,i,n,this.w)}}]),e}(l["default"].Model);i["default"]=u},{"../lib/Buffer":59,backbone:2,lodash:57}],72:[function(t,e,i){"use strict";var n=t("./TriangleCross"),r=t("../lib/Buffer");e.exports=function(){return n.extend({TILE_WIDTH:5,TILE_HEIGHT:5,getColors:function(t,e,i){var n,o=[];return o[5]=this.getPixelXY(t,e+Math.floor((this.TILE_WIDTH-1)/2),i+Math.floor((this.TILE_HEIGHT-1)/2)),n=.75,o[2]=r.mixColors(o[5],r.COLORS.BLACK,n),o[3]=r.mixColors(o[5],r.COLORS.WHITE,n),n=.125,o[4]=r.mixColors(o[5],r.COLORS.WHITE,n),o[6]=r.mixColors(o[5],r.COLORS.BLACK,n),n=.25,o[7]=r.mixColors(o[5],r.COLORS.BLACK,n),o},pattern:[[5,2,2,2,2],[2,3,4,4,5],[2,4,5,5,6],[2,4,5,5,6],[2,5,6,6,7]]})}},{"../lib/Buffer":59,"./TriangleCross":73}],73:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("./AbstractTemplate"),l=n(h),c=(t("backbone"),t("lodash")),u=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.pattern=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],[4,4,1,1,1,1,1,1,1,1,1,1,1,1,2,2],[4,4,4,1,1,1,1,1,1,1,1,1,1,2,2,2],[4,4,4,4,1,1,1,1,1,1,1,1,2,2,2,2],[4,4,4,4,4,1,1,1,1,1,1,2,2,2,2,2],[4,4,4,4,4,4,1,1,1,1,2,2,2,2,2,2],[4,4,4,4,4,4,4,1,1,2,2,2,2,2,2,2],[4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2],[4,4,4,4,4,4,4,3,3,2,2,2,2,2,2,2],[4,4,4,4,4,4,3,3,3,3,2,2,2,2,2,2],[4,4,4,4,4,3,3,3,3,3,3,2,2,2,2,2],[4,4,4,4,3,3,3,3,3,3,3,3,2,2,2,2],[4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2],[4,4,3,3,3,3,3,3,3,3,3,3,3,3,2,2],[4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2]],t.TILE_WIDTH=16,t.TILE_HEIGHT=16,t}return s(e,t),a(e,[{key:"getColors",value:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i+this.TILE_HEIGHT/4),n[2]=this.getPixelXY(t,e+this.TILE_WIDTH-this.TILE_WIDTH/4,i+this.TILE_HEIGHT/2),n[3]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i+this.TILE_HEIGHT-this.TILE_HEIGHT/4),n[4]=this.getPixelXY(t,e+this.TILE_WIDTH/4,i+this.TILE_HEIGHT/2),n}},{key:"doit",value:function(t,e,i){this.w=e,this.h=i;var n=Math.floor(this.w/this.TILE_WIDTH),r=Math.floor(this.h/this.TILE_HEIGHT),o=n*this.TILE_WIDTH,s=r*this.TILE_HEIGHT;t=this.crop(t,0,0,o,s);var a=new Uint8ClampedArray(t.length),h=c.isFunction(this.pattern)?this.pattern():this.pattern,l=void 0,u=void 0,f=void 0,d=void 0,p=void 0;for(u=0;o>u;u+=this.TILE_WIDTH)for(f=0;s>f;f+=this.TILE_HEIGHT)for(l=this.getColors(t,u,f),d=0;d<this.TILE_WIDTH;d++)for(p=0;p<this.TILE_WIDTH;p++)h[p][d]&&this.setPixelXY(a,u+d,f+p,l[h[p][d]]);return{data:a,w:this.w,h:this.h}}}]),e}(l["default"]);i["default"]=u},{"./AbstractTemplate":71,backbone:2,lodash:57}],74:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e+2,i+2),n[3]=this.getPixelXY(t,e+4,i+4),n[4]=this.getPixelXY(t,e+6,i+6),n},pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,4,4,4,4,3,3,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,3,3,3,3,3,3,3,3,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]})}},{"./TriangleCross":73}],75:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("./TriangleCross"),l=n(h),c=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.pattern=[[1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1],[1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2],[1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1],[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],[2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2],[2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],[2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1]],t}return s(e,t),a(e,[{key:"getColors",value:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e,i+4),n[3]=this.getPixelXY(t,e,i+8),n[4]=this.getPixelXY(t,e,i+12),n}}]),e}(l["default"]);i["default"]=c},{"./TriangleCross":73}],76:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("./TriangleCross"),l=n(h),c=t("../lib/Buffer"),u=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.pattern=[[1,1,5,2,2],[1,10,5,11,2],[6,6,9,7,7],[3,12,8,13,4],[3,3,8,4,4]],t.TILE_WIDTH=5,t.TILE_HEIGHT=5,t}return s(e,t),a(e,[{key:"getColors",value:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e+4,i),n[3]=this.getPixelXY(t,e,i+4),n[4]=this.getPixelXY(t,e+4,i+4),n[5]=c.mixColors(n[1],n[2]),n[6]=c.mixColors(n[1],n[3]),n[7]=c.mixColors(n[2],n[4]),n[8]=c.mixColors(n[3],n[4]),n[9]=c.mixColors(n[5],n[8]),n[10]=c.mixColors(n[6],n[5]),n[11]=c.mixColors(n[5],n[7]),n[12]=c.mixColors(n[6],n[8]),n[13]=c.mixColors(n[7],n[8]),n}}]),e}(l["default"]);i["default"]=u},{"../lib/Buffer":59,"./TriangleCross":73}],77:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e,i+4),n[3]=this.getPixelXY(t,e,i+8),n[4]=this.getPixelXY(t,e,i+12),n},pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]]})}},{"./TriangleCross":73}],78:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e,i+8),n},pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1],[1,2,2,2,1,2,2,2,2,2,2,1,2,2,2,1],[1,2,2,2,1,2,2,2,2,2,2,1,2,2,2,1],[1,2,2,2,1,1,1,1,2,2,2,1,2,2,2,1],[1,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1],[1,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1],[1,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1],[1,1,1,1,1,1,1,1,2,2,2,1,2,2,2,1],[2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1],[2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1],[2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1]]})}},{"./TriangleCross":73}],79:[function(t,e,i){"use strict";var n=(t("backbone"),t("lodash"),t("./TriangleCross")),r=t("../lib/Buffer");e.exports=function(){return n.extend({TILE_WIDTH:36,TILE_HEIGHT:36,getColors:function(t,e,i){var n=[];n[1]=r.COLORS.BLACK,n[2]=this.getPixelXY(t,e-1,i),n[3]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i),n[4]=this.getPixelXY(t,e-1,i+this.TILE_HEIGHT-1),n[5]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+this.TILE_HEIGHT-1),n[6]=this.getPixelXY(t,e-1,i+4),n[7]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+4),n[8]=this.getPixelXY(t,e-1,i+this.TILE_HEIGHT-1-4),n[9]=this.getPixelXY(t,e,i+Math.floor((this.TILE_HEIGHT-1)/2)),n[10]=this.getPixelXY(t,e-1,i+12),n[11]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+12),n[12]=this.getPixelXY(t,e-1,i+this.TILE_HEIGHT-1-12),n[13]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+this.TILE_HEIGHT-1-12),n[14]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+this.TILE_HEIGHT-1-4),n[15]=this.getPixelXY(t,e+7,i+7),n[16]=this.getPixelXY(t,e+this.TILE_WIDTH-1-7,i+7),n[17]=this.getPixelXY(t,e+7,i+this.TILE_HEIGHT-1-7),n[18]=this.getPixelXY(t,e+this.TILE_WIDTH-1-7,i+this.TILE_HEIGHT-1-7);var o=.25;return n[19]=r.mixColors(n[6],r.COLORS.BLACK,o),n[20]=r.mixColors(n[8],r.COLORS.BLACK,o),n[21]=r.mixColors(n[7],r.COLORS.BLACK,o),n[22]=r.mixColors(n[14],r.COLORS.BLACK,o),n[23]=r.mixColors(n[9],r.COLORS.BLACK,o),n[24]=n[9],n[25]=this.getPixelXY(t,e+Math.floor((this.TILE_WIDTH-1)/2),i+Math.floor((this.TILE_HEIGHT-1)/2)),n[26]=r.mixColors(n[9],r.COLORS.WHITE,o),n[27]=r.mixColors(n[6],r.COLORS.WHITE,o),n[28]=r.mixColors(n[8],r.COLORS.WHITE,o),n[29]=r.mixColors(n[7],r.COLORS.WHITE,o),n[30]=r.mixColors(n[14],r.COLORS.WHITE,o),n},pattern:[[2,1,19,27,6,1,2,2,2,1,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,1,3,3,3,1,7,29,21,1,3],[1,1,19,27,6,1,15,15,15,1,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,1,16,16,16,1,7,29,21,1,1],[19,19,19,27,6,1,15,15,15,1,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,1,16,16,16,1,7,29,21,21,21],[27,27,27,27,6,1,15,15,15,1,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,1,16,16,16,1,7,29,29,29,29],[6,6,6,6,6,1,15,15,15,1,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,1,16,16,16,1,7,7,7,7,7],[1,1,1,1,1,15,15,15,15,1,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,1,16,16,16,16,1,1,1,1,1],[2,15,15,15,15,15,15,15,1,10,10,10,10,10,1,24,26,26,26,26,24,1,11,11,11,11,11,1,16,16,16,16,16,16,16,3],[2,15,15,15,15,15,15,1,10,10,10,10,10,10,1,23,9,9,9,9,23,1,11,11,11,11,11,11,1,16,16,16,16,16,16,3],[2,15,15,15,15,15,1,10,10,10,10,10,10,1,23,9,9,9,9,9,9,23,1,11,11,11,11,11,11,1,16,16,16,16,16,3],[1,1,1,1,1,1,10,10,10,10,10,10,1,23,9,9,9,9,9,9,9,9,23,1,11,11,11,11,11,11,1,1,1,1,1,1],[10,10,10,10,10,10,10,10,10,10,10,1,23,9,9,9,9,9,9,9,9,9,9,23,1,11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10,1,23,9,9,9,9,9,9,9,9,9,9,9,9,23,1,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,1,23,9,9,9,9,9,9,9,9,9,9,9,9,9,9,23,1,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,1,23,9,9,9,9,23,23,23,23,23,23,23,23,9,9,9,9,23,1,11,11,11,11,11,11,11,11],[1,1,1,1,1,1,1,1,23,9,9,9,9,23,26,26,26,26,26,26,26,26,23,9,9,9,9,23,1,1,1,1,1,1,1,1],[24,24,24,24,24,24,24,23,9,9,9,9,9,23,26,23,23,23,23,23,23,26,23,9,9,9,9,9,23,24,24,24,24,24,24,24],[26,26,26,26,26,26,26,9,9,9,9,9,9,23,26,23,25,25,25,25,23,26,23,9,9,9,9,9,9,26,26,26,26,26,26,26],[26,26,26,26,26,26,26,9,9,9,9,9,9,23,26,23,25,25,25,25,23,26,23,9,9,9,9,9,9,26,26,26,26,26,26,26],[26,26,26,26,26,26,26,9,9,9,9,9,9,23,26,23,25,25,25,25,23,26,23,9,9,9,9,9,9,26,26,26,26,26,26,26],[26,26,26,26,26,26,26,9,9,9,9,9,9,23,26,23,25,25,25,25,23,26,23,9,9,9,9,9,9,26,26,26,26,26,26,26],[24,24,24,24,24,24,24,23,9,9,9,9,9,23,26,23,23,23,23,23,23,26,23,9,9,9,9,9,23,24,24,24,24,24,24,24],[1,1,1,1,1,1,1,1,23,9,9,9,9,23,26,26,26,26,26,26,26,26,23,9,9,9,9,23,1,1,1,1,1,1,1,1],[12,12,12,12,12,12,12,12,1,23,9,9,9,9,23,23,23,23,23,23,23,23,9,9,9,9,23,1,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,1,23,9,9,9,9,9,9,9,9,9,9,9,9,9,9,23,1,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,1,23,9,9,9,9,9,9,9,9,9,9,9,9,23,1,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,1,23,9,9,9,9,9,9,9,9,9,9,23,1,13,13,13,13,13,13,13,13,13,13,13],[1,1,1,1,1,1,12,12,12,12,12,12,1,23,9,9,9,9,9,9,9,9,23,1,13,13,13,13,13,13,1,1,1,1,1,1],[4,17,17,17,17,17,1,12,12,12,12,12,12,1,23,9,9,9,9,9,9,23,1,13,13,13,13,13,13,1,18,18,18,18,18,5],[4,17,17,17,17,17,17,1,12,12,12,12,12,12,1,23,9,9,9,9,23,1,13,13,13,13,13,13,1,18,18,18,18,18,18,5],[4,17,17,17,17,17,17,17,1,12,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,13,1,18,18,18,18,18,18,18,5],[1,1,1,1,1,17,17,17,17,1,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,1,18,18,18,18,1,1,1,1,1],[8,8,8,8,8,1,17,17,17,1,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,1,18,18,18,1,14,14,14,14,14],[28,28,28,28,8,1,17,17,17,1,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,1,18,18,18,1,14,30,30,30,30],[20,20,20,28,8,1,17,17,17,1,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,1,18,18,18,1,14,30,22,22,22],[1,1,20,28,8,1,17,17,17,1,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,1,18,18,18,1,14,30,22,1,1],[4,1,20,28,8,1,4,4,4,1,12,12,12,12,1,24,26,26,26,26,24,1,13,13,13,13,1,5,5,5,1,14,30,22,1,5]]})}},{"../lib/Buffer":59,"./TriangleCross":73,backbone:2,lodash:57}],80:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e+2,i+2),n[3]=this.getPixelXY(t,e+4,i+4),n[4]=this.getPixelXY(t,e+6,i+6),n},pattern:[[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[2,2,2,2,2,3,3,4,4,3,3,2,2,2,2,2],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1],[1,1,1,2,2,3,3,4,4,3,3,2,2,1,1,1]]})}},{"./TriangleCross":73}],81:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e,i),n[2]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i),n[3]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+4),n[4]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i+this.TILE_HEIGHT/2),n[5]=this.getPixelXY(t,e,i+this.TILE_HEIGHT-1),n[6]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+this.TILE_HEIGHT-1),n},pattern:[[1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3],[1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,3,3],[1,1,2,2,2,2,4,4,4,4,2,2,2,2,3,3],[2,2,2,2,2,4,4,4,4,4,4,2,2,2,2,2],[2,2,2,2,4,4,4,4,4,4,4,4,2,2,2,2],[2,2,2,2,4,4,2,4,4,2,4,4,2,2,2,2],[2,2,2,2,4,4,2,4,4,2,4,4,2,2,2,2],[2,2,2,2,4,4,4,4,4,4,4,4,2,2,2,2],[2,2,2,2,4,4,4,4,4,4,4,4,2,2,2,2],[2,2,2,2,2,2,4,4,4,4,2,2,2,2,2,2],[5,5,2,2,2,2,4,4,4,4,2,2,2,2,6,6],[5,5,5,2,2,2,2,2,2,2,2,2,2,6,6,6],[5,5,5,5,2,2,2,2,2,2,2,2,6,6,6,6],[5,2,5,5,2,2,2,2,2,2,2,2,6,6,2,6],[5,2,5,5,2,2,2,2,2,2,2,2,6,6,2,6]]})}},{"./TriangleCross":73}],82:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e+1,i+1),n[2]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+this.TILE_HEIGHT-1),n},pattern:[[1,1,2,1,2,1,1,1,2,1,2,1,2,1,2,1],[1,1,2,1,2,1,1,1,2,1,2,1,2,1,2,1],[1,1,2,1,2,1,1,1,2,1,2,1,2,1,2,1],[2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,1,2,2,2,1,2,2,2,2,2,1,2],[1,1,1,2,1,2,1,2,1,2,1,1,1,2,1,2],[2,2,2,2,1,2,2,2,1,2,2,2,2,2,1,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2],[1,1,2,1,2,1,1,1,2,1,2,1,2,1,2,1],[1,1,2,1,2,1,1,1,2,1,2,1,2,1,2,1],[1,1,2,1,2,1,1,1,2,1,2,1,2,1,2,1],[2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2]]})}},{"./TriangleCross":73}],83:[function(t,e,i){"use strict";var n=t("./TriangleCross");e.exports=function(){return n.extend({getColors:function(t,e,i){var n=[];return n[1]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i+this.TILE_HEIGHT/2),n[2]=this.getPixelXY(t,e,i),n[3]=this.getPixelXY(t,e+this.TILE_WIDTH/4,i),n[4]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i),n[4]=this.getPixelXY(t,e+this.TILE_WIDTH/4*3,i),n[5]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i),n[6]=this.getPixelXY(t,e,i+this.TILE_HEIGHT/4),n[7]=this.getPixelXY(t,e+this.TILE_WIDTH/2-1,i+this.TILE_HEIGHT/2-1),n[8]=this.getPixelXY(t,e+this.TILE_WIDTH/4*3,i+this.TILE_HEIGHT/2-1),n[9]=this.getPixelXY(t,e+this.TILE_WIDTH-1,i+this.TILE_HEIGHT/2-1),n[10]=this.getPixelXY(t,e,i+this.TILE_HEIGHT/4*3),n[11]=this.getPixelXY(t,e+this.TILE_HEIGHT/4,i+this.TILE_HEIGHT/4*3),n[12]=this.getPixelXY(t,e+this.TILE_HEIGHT/2,i+this.TILE_HEIGHT/4*3),n[13]=this.getPixelXY(t,e+this.TILE_HEIGHT/4*3,i+this.TILE_HEIGHT/4*3),n[14]=this.getPixelXY(t,e,i+this.TILE_HEIGHT-1),n[15]=this.getPixelXY(t,e+this.TILE_WIDTH/4,i+this.TILE_HEIGHT-1),n[16]=this.getPixelXY(t,e+this.TILE_WIDTH/2,i+this.TILE_HEIGHT-1),n[17]=this.getPixelXY(t,e+this.TILE_WIDTH/4*3,i+this.TILE_HEIGHT-1),n},pattern:[[1,1,2,1,3,1,1,1,3,1,4,1,4,1,5,1],[1,1,2,1,3,1,1,1,3,1,4,1,4,1,5,1],[1,1,2,1,3,1,1,1,3,1,4,1,4,1,5,1],[2,2,2,1,3,3,3,3,3,1,4,4,4,1,5,5],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[6,6,6,6,1,7,7,7,1,8,8,8,8,8,1,9],[1,1,1,6,1,7,1,7,1,8,1,1,1,8,1,9],[6,6,6,6,1,7,7,7,1,8,8,8,8,8,1,9],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[10,10,10,1,11,11,11,11,11,1,12,12,12,1,13,13],[1,1,10,1,11,1,1,1,11,1,12,1,12,1,13,1],[1,1,10,1,11,1,1,1,11,1,12,1,12,1,13,1],[1,1,10,1,11,1,1,1,11,1,12,1,12,1,13,1],[10,10,10,1,11,11,11,11,11,1,12,12,12,1,13,13],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[14,14,14,1,15,15,15,15,15,1,16,16,16,1,17,17]]})}},{"./TriangleCross":73}],84:[function(t,e,i){"use strict";e.exports={OptionsTitle:t("./templates/OptionsTitle.ejs"),options:{Select:t("./templates/options/Select.ejs"),Slider:t("./templates/options/Slider.ejs")}}},{"./templates/OptionsTitle.ejs":85,"./templates/options/Select.ejs":86,"./templates/options/Slider.ejs":87}],85:[function(require,module,exports){require("lodash");module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+=""+(null==(__t=name)?"":__t)+' <small class="text-muted">настройки</small>';return __p}},{lodash:57}],86:[function(require,module,exports){var _=require("lodash");module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="form-group" data-id="'+(null==(__t=id)?"":__t)+'">\n    <span class="glyphicon glyphicon-sort text-info col-sm-1 drag-handle"></span>\n\n    <label class="control-label col-sm-3" for="option-'+(null==(__t=id)?"":__t)+'">\n        '+(null==(__t=option.name)?"":__t)+':\n    </label>\n\n    <div class="col-sm-8">\n        <select class="form-control input-sm" data-option="'+(null==(__t=id)?"":__t)+'">\n            ',_.each(option.options,function(t,e){__p+='\n            <option value="'+(null==(__t=e)?"":__t)+'" '+(null==(__t=e==value?"selected":"")?"":__t)+">\n                "+(null==(__t=t.text)?"":__t)+"\n            </option>\n            "}),__p+="\n        </select>\n    </div>\n</div>";return __p}},{lodash:57}],87:[function(require,module,exports){require("lodash");module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="form-group" data-id="'+(null==(__t=id)?"":__t)+'">\n    <span class="glyphicon glyphicon-sort text-info col-sm-1 drag-handle"></span>\n\n    <label class="control-label col-sm-3" for="option-'+(null==(__t=id)?"":__t)+'">\n        '+(null==(__t=option.name)?"":__t)+':\n    </label>\n\n    <div class="col-sm-6">\n        <input class="form-control input-sm" data-option="'+(null==(__t=id)?"":__t)+'"\n               id="option-'+(null==(__t=id)?"":__t)+'"\n               type="range" min="'+(null==(__t=option.min||0)?"":__t)+'" max="'+(null==(__t=option.max||100)?"":__t)+'"\n               value="'+(null==(__t=value||option.def||0)?"":__t)+'" step="'+(null==(__t=option.step||1)?"":__t)+'"\n               onchange="$(\'#option-'+(null==(__t=id)?"":__t)+'-value\').val(this.value);"/>\n    </div>\n\n    <div class="col-sm-2 text-center">\n        <input title class="form-control text-center input-sm" id="option-'+(null==(__t=id)?"":__t)+'-value"\n               readonly value="'+(null==(__t=value||option.def||0)?"":__t)+'" />\n    </div>\n</div>';return __p}},{lodash:57}],88:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof e&&"undefined"!=typeof e.exports?e.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){function t(t,e){this.el=t,this.options=e=m({},e),t[D]=this;var r={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0};for(var o in r)!(o in e)&&(e[o]=r[o]);var a=e.group;a&&"object"==("undefined"==typeof a?"undefined":n(a))||(a=e.group={name:a}),["pull","put"].forEach(function(t){t in a||(a[t]=!0)}),e.groups=" "+a.name+(a.put.join?" "+a.put.join(" "):"")+" ";for(var h in this)"_"===h.charAt(0)&&(this[h]=i(this,this[h]));s(t,"mousedown",this._onTapStart),s(t,"touchstart",this._onTapStart),s(t,"dragover",this),s(t,"dragenter",this),Y.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){_&&_.state!==t&&(l(_,"display",t?"none":""),!t&&_.state&&x.insertBefore(_,y),_.state=t)}function i(t,e){var i=X.call(arguments,2);return e.bind?e.bind.apply(e,[t].concat(i)):function(){return e.apply(t,i.concat(X.call(arguments)))}}function r(t,e,i){if(t){i=i||R,e=e.split(".");var n=e.shift().toUpperCase(),r=new RegExp("\\s("+e.join("|")+")\\s","g");do if(">*"===n&&t.parentNode===i||(""===n||t.nodeName.toUpperCase()==n)&&(!e.length||((" "+t.className+" ").match(r)||[]).length==e.length))return t;while(t!==i&&(t=t.parentNode))}return null}function o(t){t.dataTransfer.dropEffect="move",t.preventDefault()}function s(t,e,i){t.addEventListener(e,i,!1)}function a(t,e,i){t.removeEventListener(e,i,!1)}function h(t,e,i){if(t)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(P," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(P," ")}}function l(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return R.defaultView&&R.defaultView.getComputedStyle?i=R.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function c(t,e,i){if(t){var n=t.getElementsByTagName(e),r=0,o=n.length;if(i)for(;o>r;r++)i(n[r],r);return n}return[]}function u(t){t.draggable=!1}function f(){F=!1}function d(t,e){var i=t.lastElementChild,n=i.getBoundingClientRect();return e.clientY-(n.top+n.height)>5&&i}function p(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function g(t){for(var e=0;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function v(t,e){var i,n;return function(){void 0===i&&(i=arguments,n=this,setTimeout(function(){1===i.length?t.call(n,i[0]):t.apply(n,i),i=void 0},e))}}function m(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}var y,b,_,x,w,C,S,T,O,E,A,k,j,I,M={},P=/\s+/g,D="Sortable"+(new Date).getTime(),L=window,R=L.document,N=L.parseInt,B=!!("draggable"in R.createElement("div")),F=!1,H=function(t,e,i,n,r,o,s){var a=R.createEvent("Event"),h=(t||e[D]).options,l="on"+i.charAt(0).toUpperCase()+i.substr(1);a.initEvent(i,!0,!0),a.item=n||e,a.from=r||e,a.clone=_,a.oldIndex=o,a.newIndex=s,h[l]&&h[l].call(t,a),e.dispatchEvent(a)},W=Math.abs,X=[].slice,Y=[],$=v(function(t,e,i){if(i&&e.scroll){var n,r,o,s,a=e.scrollSensitivity,h=e.scrollSpeed,l=t.clientX,c=t.clientY,u=window.innerWidth,f=window.innerHeight;if(S!==i&&(C=e.scroll,
S=i,C===!0)){C=i;do if(C.offsetWidth<C.scrollWidth||C.offsetHeight<C.scrollHeight)break;while(C=C.parentNode)}C&&(n=C,r=C.getBoundingClientRect(),o=(W(r.right-l)<=a)-(W(r.left-l)<=a),s=(W(r.bottom-c)<=a)-(W(r.top-c)<=a)),o||s||(o=(a>=u-l)-(a>=l),s=(a>=f-c)-(a>=c),(o||s)&&(n=L)),M.vx===o&&M.vy===s&&M.el===n||(M.el=n,M.vx=o,M.vy=s,clearInterval(M.pid),n&&(M.pid=setInterval(function(){n===L?L.scrollTo(L.pageXOffset+o*h,L.pageYOffset+s*h):(s&&(n.scrollTop+=s*h),o&&(n.scrollLeft+=o*h))},24)))}},30);return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,n=this.options,o=t.type,s=t.touches&&t.touches[0],a=(s||t).target,h=a,l=n.filter;if(!("mousedown"===o&&0!==t.button||n.disabled)&&(a=r(a,n.draggable,i))){if(E=g(a),"function"==typeof l){if(l.call(this,t,a,this))return H(e,h,"filter",a,i,E),void t.preventDefault()}else if(l&&(l=l.split(",").some(function(t){return t=r(h,t.trim(),i),t?(H(e,t,"filter",a,i,E),!0):void 0})))return void t.preventDefault();n.handle&&!r(h,n.handle,i)||this._prepareDragStart(t,s,a)}},_prepareDragStart:function(t,e,i){var n,r=this,o=r.el,a=r.options,h=o.ownerDocument;i&&!y&&i.parentNode===o&&(j=t,x=o,y=i,w=y.nextSibling,k=a.group,n=function(){r._disableDelayedDrag(),y.draggable=!0,a.ignore.split(",").forEach(function(t){c(y,t.trim(),u)}),r._triggerDragStart(e)},s(h,"mouseup",r._onDrop),s(h,"touchend",r._onDrop),s(h,"touchcancel",r._onDrop),a.delay?(s(h,"mousemove",r._disableDelayedDrag),s(h,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(n,a.delay)):n())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),a(t,"mousemove",this._disableDelayedDrag),a(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(j={target:y,clientX:t.clientX,clientY:t.clientY},this._onDragStart(j,"touch")):B?(s(y,"dragend",this),s(x,"dragstart",this._onDragStart)):this._onDragStart(j,!0);try{R.selection?R.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){x&&y&&(h(y,this.options.ghostClass,!0),t.active=this,H(this,x,"start",y,x,E))},_emulateDragOver:function(){if(I){l(b,"display","none");var t=R.elementFromPoint(I.clientX,I.clientY),e=t,i=" "+this.options.group.name,n=Y.length;if(e)do{if(e[D]&&e[D].options.groups.indexOf(i)>-1){for(;n--;)Y[n]({clientX:I.clientX,clientY:I.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);l(b,"display","")}},_onTouchMove:function(t){if(j){var e=t.touches?t.touches[0]:t,i=e.clientX-j.clientX,n=e.clientY-j.clientY,r=t.touches?"translate3d("+i+"px,"+n+"px,0)":"translate("+i+"px,"+n+"px)";I=e,l(b,"webkitTransform",r),l(b,"mozTransform",r),l(b,"msTransform",r),l(b,"transform",r),t.preventDefault()}},_onDragStart:function(t,e){var i=t.dataTransfer,n=this.options;if(this._offUpEvents(),"clone"==k.pull&&(_=y.cloneNode(!0),l(_,"display","none"),x.insertBefore(_,y)),e){var r,o=y.getBoundingClientRect(),a=l(y);b=y.cloneNode(!0),l(b,"top",o.top-N(a.marginTop,10)),l(b,"left",o.left-N(a.marginLeft,10)),l(b,"width",o.width),l(b,"height",o.height),l(b,"opacity","0.8"),l(b,"position","fixed"),l(b,"zIndex","100000"),x.appendChild(b),r=b.getBoundingClientRect(),l(b,"width",2*o.width-r.width),l(b,"height",2*o.height-r.height),"touch"===e?(s(R,"touchmove",this._onTouchMove),s(R,"touchend",this._onDrop),s(R,"touchcancel",this._onDrop)):(s(R,"mousemove",this._onTouchMove),s(R,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else i&&(i.effectAllowed="move",n.setData&&n.setData.call(this,i,y)),s(R,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(t){var i,n,o,s=this.el,a=this.options,h=a.group,c=h.put,u=k===h,p=a.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!a.dragoverBubble&&t.stopPropagation()),k&&!a.disabled&&(u?p||(o=!x.contains(y)):k.pull&&c&&(k.name===h.name||c.indexOf&&~c.indexOf(k.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if($(t,a,this.el),F)return;if(i=r(t.target,a.draggable,s),n=y.getBoundingClientRect(),o)return e(!0),void(_||w?x.insertBefore(y,_||w):p||x.appendChild(y));if(0===s.children.length||s.children[0]===b||s===t.target&&(i=d(s,t))){if(i){if(i.animated)return;v=i.getBoundingClientRect()}e(u),s.appendChild(y),this._animate(n,y),i&&this._animate(v,i)}else if(i&&!i.animated&&i!==y&&void 0!==i.parentNode[D]){T!==i&&(T=i,O=l(i));var g,v=i.getBoundingClientRect(),m=v.right-v.left,C=v.bottom-v.top,S=/left|right|inline/.test(O.cssFloat+O.display),E=i.offsetWidth>y.offsetWidth,A=i.offsetHeight>y.offsetHeight,j=(S?(t.clientX-v.left)/m:(t.clientY-v.top)/C)>.5,I=i.nextElementSibling;F=!0,setTimeout(f,30),e(u),g=S?i.previousElementSibling===y&&!E||j&&E:I!==y&&!A||j&&A,g&&!I?s.appendChild(y):i.parentNode.insertBefore(y,g?I:i),this._animate(n,y),this._animate(v,i)}}},_animate:function(t,e){var i=this.options.animation;if(i){var n=e.getBoundingClientRect();l(e,"transition","none"),l(e,"transform","translate3d("+(t.left-n.left)+"px,"+(t.top-n.top)+"px,0)"),e.offsetWidth,l(e,"transition","all "+i+"ms"),l(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){l(e,"transition",""),l(e,"transform",""),e.animated=!1},i)}},_offUpEvents:function(){var t=this.el.ownerDocument;a(R,"touchmove",this._onTouchMove),a(t,"mouseup",this._onDrop),a(t,"touchend",this._onDrop),a(t,"touchcancel",this._onDrop)},_onDrop:function(e){var i=this.el,n=this.options;clearInterval(this._loopId),clearInterval(M.pid),clearTimeout(this.dragStartTimer),a(R,"drop",this),a(R,"mousemove",this._onTouchMove),a(i,"dragstart",this._onDragStart),this._offUpEvents(),e&&(e.preventDefault(),!n.dropBubble&&e.stopPropagation(),b&&b.parentNode.removeChild(b),y&&(a(y,"dragend",this),u(y),h(y,this.options.ghostClass,!1),x!==y.parentNode?(A=g(y),H(null,y.parentNode,"sort",y,x,E,A),H(this,x,"sort",y,x,E,A),H(null,y.parentNode,"add",y,x,E,A),H(this,x,"remove",y,x,E,A)):(_&&_.parentNode.removeChild(_),y.nextSibling!==w&&(A=g(y),H(this,x,"update",y,x,E,A),H(this,x,"sort",y,x,E,A))),t.active&&H(this,x,"end",y,x,E,A)),x=y=b=w=_=C=S=j=I=T=O=k=t.active=null,this.save())},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?y&&(this._onDragOver(t),o(t)):"drop"!==e&&"dragend"!==e||this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,n=0,o=i.length,s=this.options;o>n;n++)t=i[n],r(t,s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||p(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,n){var o=i.children[n];r(o,this.options.draggable,i)&&(e[t]=o)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return r(t,e||this.options.draggable,this.el)},option:function(t,e){var i=this.options;return void 0===e?i[t]:void(i[t]=e)},destroy:function(){var t=this.el;t[D]=null,a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),a(t,"dragover",this),a(t,"dragenter",this),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),Y.splice(Y.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:s,off:a,css:l,find:c,bind:i,is:function(t,e){return!!r(t,e,t)},extend:m,throttle:v,closest:r,toggleClass:h,index:g},t.version="1.2.0",t.create=function(e,i){return new t(e,i)},t})},{}],89:[function(t,e,i){"use strict";var n=t("backbone"),r=t("lodash"),o=t("../vendor/sortable"),s=t("../templates"),a=t("../lib/Canvas"),h=t("../lib/Processor"),l=t("../lib/Storage"),c=t("../lib/Random"),u=t("../lib/Options"),f=t("../lib/Preset");n.$=jQuery,e.exports=n.View.extend({el:"#wizard",encoded:null,imageName:null,elements:[],filterId:null,initialize:function(){this.elements.preloader=this.$(".preloader"),this.elements.error=this.$(".error400"),this.elements.srcImage=this.$(".src-image"),this.elements.dstImage=this.$(".dst-image"),this.elements.inputPreset=this.$("#input-preset"),this.elements.optionsModal=this.$("#options-modal"),this.elements.optionsForm=this.$("#options-form"),this.elements.messageModal=this.$("#message"),this.elements.save=this.$("#output-save"),Object.keys(f).forEach(function(t){this.elements.inputPreset.append($("<option/>",{value:t,text:t}))},this);var t=l.getEncoded();t&&(this.encoded=t,this.elements.srcImage.attr("src",t),this.render())},events:{"click #input-random":"onRandomButtonClick","click #input-url":"onUrlTextClick","click #input-url-button":"onDownloadButtonClick","click #show-options":"onShowOptionsButtonClick","click #options-apply":"onOptionsApplyClick","change #input-file":"onFileChange","change #input-preset":"onPresetChange"},onRandomButtonClick:function(t){t.preventDefault();var e=c.generate(505,505,100);this.elements.srcImage.attr("src",e),this.encoded=e,l.setEncoded(this.encoded),this.render()},onOptionsApplyClick:function(t){t.preventDefault();var e={};this.elements.optionsModal.find("[data-option]").each(function(){var t=$(this);e[t.data("option")]=t.val()}),l.setFilter(e),this.elements.optionsModal.modal("hide"),this.render()},onPresetChange:function(t){this.presetId=$(t.currentTarget).val(),this.presetId&&f[this.presetId]?l.setFilter(f[this.presetId]):l.unsetFilter(),this.render()},onShowOptionsButtonClick:function(t){t.preventDefault();var e=this.buildOptions();this.elements.optionsForm.html(e),this.sortable=o.create(this.elements.optionsForm.get(0),{sort:!0,group:"options",handle:".drag-handle",animation:150});var i=l.getFilter();r.isEmpty(i)||this.sortable.sort(Object.keys(i)),this.elements.optionsModal.modal()},onDownloadButtonClick:function(t){t.preventDefault();var e=$.trim(this.$("#input-url").val());!e.length||e.length>8190||(this.showPreloader(),$.getJSON("/api.php",{url:e},function(t){0==parseInt(t.error)?(this.elements.srcImage.title=t.name,this.elements.srcImage.attr("src",t.data),this.imageName=t.name,this.encoded=t.data,l.setEncoded(this.encoded),this.render()):this.elements.error.show(),this.showPreloader(!1)}.bind(this)))},onUrlTextClick:function(t){$(t.currentTarget).select()},onFileChange:function(t){var e=t.target.files[0],i=new FileReader;this.elements.srcImage.title=e.name,this.imageName=e.name,i.onload=function(t){this.elements.srcImage.attr("src",t.target.result),this.encoded=t.target.result,l.setEncoded(this.encoded),this.render()}.bind(this),i.readAsDataURL(e)},message:function(t){this.elements.messageModal.find(".message-body p").text(t),this.elements.messageModal.modal()},buildOptions:function(){var t=u.options,e=l.getFilter(),i="";return r.each(t,function(t,n){i+=s.options[t.type]({option:t,id:n,value:e[n]||null})},this),i},showPreloader:function(t){t===!0||"undefined"==typeof t?this.elements.preloader.show():this.elements.preloader.fadeOut()},render:function(){if(this.encoded){this.showPreloader(),this.elements.error.hide();var t=this.elements.srcImage[0],e=a.createEmptyCanvas(t.width,t.height),i=e.getContext("2d");i.drawImage(t,0,0,e.width,e.height);var n=i.getImageData(0,0,e.width,e.height),r=h.doit(n,l.getFilter()),o=a.createEmptyCanvas(r.w,r.h),s=o.getContext("2d"),c=s.createImageData(r.w,r.h);c.data.set(r.data),s.putImageData(c,0,0),this.outData=o.toDataURL("image/png"),this.elements.dstImage.attr("src",this.outData);var u=new Date,f="pixla_"+u.getDate()+"-"+(u.getMonth()+1)+"-"+u.getFullYear()+"_"+u.getHours()+"-"+u.getMinutes()+"-"+u.getSeconds()+".png";this.elements.save.attr("href",this.outData),this.elements.save.attr("download",f),this.showPreloader(!1)}}})},{"../lib/Canvas":60,"../lib/Options":65,"../lib/Preset":66,"../lib/Processor":67,"../lib/Random":68,"../lib/Storage":69,"../templates":84,"../vendor/sortable":88,backbone:2,lodash:57}]},{},[58]);